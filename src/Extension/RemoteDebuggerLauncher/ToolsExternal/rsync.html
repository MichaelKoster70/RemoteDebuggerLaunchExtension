<!-- Creator     : groff version 1.23.0 -->
<!-- CreationDate: Wed Jan 15 21:18:14 2025 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>rsync</title>

</head>
<body>

<h1 align="center">rsync</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GENERAL">GENERAL</a><br>
<a href="#SETUP">SETUP</a><br>
<a href="#USAGE">USAGE</a><br>
<a href="#COPYING TO A DIFFERENT NAME">COPYING TO A DIFFERENT NAME</a><br>
<a href="#SORTED TRANSFER ORDER">SORTED TRANSFER ORDER</a><br>
<a href="#MULTI-HOST SECURITY">MULTI-HOST SECURITY</a><br>
<a href="#ADVANCED USAGE">ADVANCED USAGE</a><br>
<a href="#CONNECTING TO AN RSYNC DAEMON">CONNECTING TO AN RSYNC DAEMON</a><br>
<a href="#USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION">USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION</a><br>
<a href="#STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS">STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#OPTION SUMMARY">OPTION SUMMARY</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DAEMON OPTIONS">DAEMON OPTIONS</a><br>
<a href="#FILTER RULES">FILTER RULES</a><br>
<a href="#SIMPLE INCLUDE/EXCLUDE RULES">SIMPLE INCLUDE/EXCLUDE RULES</a><br>
<a href="#SIMPLE INCLUDE/EXCLUDE EXAMPLE">SIMPLE INCLUDE/EXCLUDE EXAMPLE</a><br>
<a href="#FILTER RULES WHEN DELETING">FILTER RULES WHEN DELETING</a><br>
<a href="#FILTER RULES IN DEPTH">FILTER RULES IN DEPTH</a><br>
<a href="#PATTERN MATCHING RULES">PATTERN MATCHING RULES</a><br>
<a href="#FILTER RULE MODIFIERS">FILTER RULE MODIFIERS</a><br>
<a href="#MERGE-FILE FILTER RULES">MERGE-FILE FILTER RULES</a><br>
<a href="#LIST-CLEARING FILTER RULE">LIST-CLEARING FILTER RULE</a><br>
<a href="#ANCHORING INCLUDE/EXCLUDE PATTERNS">ANCHORING INCLUDE/EXCLUDE PATTERNS</a><br>
<a href="#PER-DIRECTORY RULES AND DELETE">PER-DIRECTORY RULES AND DELETE</a><br>
<a href="#TRANSFER RULES">TRANSFER RULES</a><br>
<a href="#BATCH MODE">BATCH MODE</a><br>
<a href="#SYMBOLIC LINKS">SYMBOLIC LINKS</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>
<a href="#EXIT VALUES">EXIT VALUES</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#INTERNAL OPTIONS">INTERNAL OPTIONS</a><br>
<a href="#CREDITS">CREDITS</a><br>
<a href="#THANKS">THANKS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">rsync &minus; a
fast, versatile, remote (and local) file-copying tool</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Local: <br>
rsync [OPTION...] SRC... [DEST]</p>

<p style="margin-left:9%; margin-top: 1em">Access via
remote shell: <br>
Pull: <br>
rsync [OPTION...] [USER@]HOST:SRC... [DEST] <br>
Push: <br>
rsync [OPTION...] SRC... [USER@]HOST:DEST</p>

<p style="margin-left:9%; margin-top: 1em">Access via rsync
daemon: <br>
Pull: <br>
rsync [OPTION...] [USER@]HOST::SRC... [DEST] <br>
rsync [OPTION...] rsync://[USER@]HOST[:PORT]/SRC... [DEST]
<br>
Push: <br>
rsync [OPTION...] SRC... [USER@]HOST::DEST <br>
rsync [OPTION...] SRC...
rsync://[USER@]HOST[:PORT]/DEST)</p>

<p style="margin-left:9%; margin-top: 1em">Usages with just
one SRC arg and no DEST arg will list the source files
instead of copying.</p>

<p style="margin-left:9%; margin-top: 1em">The online
version of this manpage (that includes cross-linking of
topics) is available at
<a href="https://download.samba.org/pub/rsync/rsync.1">https://download.samba.org/pub/rsync/rsync.1</a>.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Rsync is a fast
and extraordinarily versatile file copying tool. It can copy
locally, to/from another host over any remote shell, or
to/from a remote rsync daemon. It offers a large number of
options that control every aspect of its behavior and permit
very flexible specification of the set of files to be
copied. It is famous for its delta-transfer algorithm, which
reduces the amount of data sent over the network by sending
only the differences between the source files and the
existing files in the destination. Rsync is widely used for
backups and mirroring and as an improved copy command for
everyday use.</p>

<p style="margin-left:9%; margin-top: 1em">Rsync finds
files that need to be transferred using a &quot;quick
check&quot; algorithm (by default) that looks for files that
have changed in size or in last-modified time. Any changes
in the other preserved attributes (as requested by options)
are made on the destination file directly when the quick
check indicates that the file&rsquo;s data does not need to
be updated.</p>

<p style="margin-left:9%; margin-top: 1em">Some of the
additional features of rsync are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>support for copying links, devices, owners, groups, and
permissions</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>exclude and exclude-from options similar to GNU tar</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>a CVS exclude mode for ignoring the same files that CVS
would ignore</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>can use any transparent remote shell, including ssh or
rsh</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>does not require super-user privileges</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>pipelining of file transfers to minimize latency
costs</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>support for anonymous or authenticated rsync daemons
(ideal for mirroring)</p></td></tr>
</table>

<h2>GENERAL
<a name="GENERAL"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Rsync copies
files either to or from a remote host, or locally on the
current host (it does not support copying files between two
remote hosts).</p>

<p style="margin-left:9%; margin-top: 1em">There are two
different ways for rsync to contact a remote system: using a
remote-shell program as the transport (such as ssh or rsh)
or contacting an rsync daemon directly via TCP. The
remote-shell transport is used whenever the source or
destination path contains a single colon (:) separator after
a host specification. Contacting an rsync daemon directly
happens when the source or destination path contains a
double colon (::) separator after a host specification, OR
when an rsync:// URL is specified (see also the USING
RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION section
for an exception to this latter rule).</p>

<p style="margin-left:9%; margin-top: 1em">As a special
case, if a single source arg is specified without a
destination, the files are listed in an output format
similar to &quot;<b>ls&nbsp;&minus;l</b>&quot;.</p>

<p style="margin-left:9%; margin-top: 1em">As expected, if
neither the source or destination path specify a remote
host, the copy occurs locally (see also the
<b>&minus;&minus;list-only</b> option).</p>

<p style="margin-left:9%; margin-top: 1em">Rsync refers to
the local side as the client and the remote side as the
server. Don&rsquo;t confuse server with an rsync daemon. A
daemon is always a server, but a server can be either a
daemon or a remote-shell spawned process.</p>

<h2>SETUP
<a name="SETUP"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">See the file
README.md for installation instructions.</p>

<p style="margin-left:9%; margin-top: 1em">Once installed,
you can use rsync to any machine that you can access via a
remote shell (as well as some that you can access using the
rsync daemon-mode protocol). For remote transfers, a modern
rsync uses ssh for its communications, but it may have been
configured to use a different remote shell by default, such
as rsh or remsh.</p>

<p style="margin-left:9%; margin-top: 1em">You can also
specify any remote shell you like, either by using the
<b>&minus;e</b> command line option, or by setting the
<b>RSYNC_RSH</b> environment variable.</p>

<p style="margin-left:9%; margin-top: 1em">Note that rsync
must be installed on both the source and destination
machines.</p>

<h2>USAGE
<a name="USAGE"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">You use rsync in
the same way you use rcp. You must specify a source and a
destination, one of which may be remote.</p>

<p style="margin-left:9%; margin-top: 1em">Perhaps the best
way to explain the syntax is with some examples:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -t *.c
foo:src/</p>

<p style="margin-left:9%; margin-top: 1em">This would
transfer all files matching the pattern <b>*.c</b> from the
current directory to the directory src on the machine foo.
If any of the files already exist on the remote system then
the rsync remote-update protocol is used to update the file
by sending only the differences in the data. Note that the
expansion of wildcards on the command-line (<b>*.c</b>) into
a list of files is handled by the shell before it runs rsync
and not by rsync itself (exactly the same as all other
Posix-style programs).</p>

<p style="margin-left:14%; margin-top: 1em">rsync -avz
foo:src/bar /data/tmp</p>

<p style="margin-left:9%; margin-top: 1em">This would
recursively transfer all files from the directory src/bar on
the machine foo into the /data/tmp/bar directory on the
local machine. The files are transferred in archive mode,
which ensures that symbolic links, devices, attributes,
permissions, ownerships, etc. are preserved in the transfer.
Additionally, compression will be used to reduce the size of
data portions of the transfer.</p>

<p style="margin-left:14%; margin-top: 1em">rsync -avz
foo:src/bar/ /data/tmp</p>

<p style="margin-left:9%; margin-top: 1em">A trailing slash
on the source changes this behavior to avoid creating an
additional directory level at the destination. You can think
of a trailing / on a source as meaning &quot;copy the
contents of this directory&quot; as opposed to &quot;copy
the directory by name&quot;, but in both cases the
attributes of the containing directory are transferred to
the containing directory on the destination. In other words,
each of the following commands copies the files in the same
way, including their setting of the attributes of
/dest/foo:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -av
/src/foo /dest <br>
rsync -av /src/foo/ /dest/foo</p>

<p style="margin-left:9%; margin-top: 1em">Note also that
host and module references don&rsquo;t require a trailing
slash to copy the contents of the default directory. For
example, both of these copy the remote directory&rsquo;s
contents into &quot;/dest&quot;:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -av host:
/dest <br>
rsync -av host::module /dest</p>

<p style="margin-left:9%; margin-top: 1em">You can also use
rsync in local-only mode, where both the source and
destination don&rsquo;t have a &rsquo;:&rsquo; in the name.
In this case it behaves like an improved copy command.</p>

<p style="margin-left:9%; margin-top: 1em">Finally, you can
list all the (listable) modules available from a particular
rsync daemon by leaving off the module name:</p>

<p style="margin-left:14%; margin-top: 1em">rsync
somehost.mydomain.com::</p>

<h2>COPYING TO A DIFFERENT NAME
<a name="COPYING TO A DIFFERENT NAME"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">When you want to
copy a directory to a different name, use a trailing slash
on the source directory to put the contents of the directory
into any destination directory you like:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -ai foo/
bar/</p>

<p style="margin-left:9%; margin-top: 1em">Rsync also has
the ability to customize a destination file&rsquo;s name
when copying a single item. The rules for this are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="82%">


<p style="margin-top: 1em">The transfer list must consist
of a single item (either a file or an empty directory)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>The final element of the destination path must not exist
as a directory</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>The destination path must not have been specified with a
trailing slash</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Under those
circumstances, rsync will set the name of the
destination&rsquo;s single item to the last element of the
destination path. Keep in mind that it is best to only use
this idiom when copying a file and use the above
trailing-slash idiom when copying a directory.</p>

<p style="margin-left:9%; margin-top: 1em">The following
example copies the <b>foo.c</b> file as <b>bar.c</b> in the
<b>save</b> dir (assuming that <b>bar.c</b> isn&rsquo;t a
directory):</p>

<p style="margin-left:14%; margin-top: 1em">rsync -ai
src/foo.c save/bar.c</p>

<p style="margin-left:9%; margin-top: 1em">The single-item
copy rule might accidentally bite you if you unknowingly
copy a single item and specify a destination dir that
doesn&rsquo;t exist (without using a trailing slash). For
example, if <b>src/*.c</b> matches one file and
<b>save/dir</b> doesn&rsquo;t exist, this will confuse you
by naming the destination file <b>save/dir</b>:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -ai
src/*.c save/dir</p>

<p style="margin-left:9%; margin-top: 1em">To prevent such
an accident, either make sure the destination dir exists or
specify the destination path with a trailing slash:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -ai
src/*.c save/dir/</p>

<h2>SORTED TRANSFER ORDER
<a name="SORTED TRANSFER ORDER"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Rsync always
sorts the specified filenames into its internal transfer
list. This handles the merging together of the contents of
identically named directories, makes it easy to remove
duplicate filenames. It can, however, confuse someone when
the files are transferred in a different order than what was
given on the command-line.</p>

<p style="margin-left:9%; margin-top: 1em">If you need a
particular file to be transferred prior to another, either
separate the files into different rsync calls, or consider
using <b>&minus;&minus;delay-updates</b> (which
doesn&rsquo;t affect the sorted transfer order, but does
make the final file-updating phase happen much more
rapidly).</p>

<h2>MULTI-HOST SECURITY
<a name="MULTI-HOST SECURITY"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Rsync takes
steps to ensure that the file requests that are shared in a
transfer are protected against various security issues. Most
of the potential problems arise on the receiving side where
rsync takes steps to ensure that the list of files being
transferred remains within the bounds of what was
requested.</p>

<p style="margin-left:9%; margin-top: 1em">Toward this end,
rsync 3.1.2 and later have aborted when a file list contains
an absolute or relative path that tries to escape out of the
top of the transfer. Also, beginning with version 3.2.5,
rsync does two more safety checks of the file list to (1)
ensure that no extra source arguments were added into the
transfer other than those that the client requested and (2)
ensure that the file list obeys the exclude rules that were
sent to the sender.</p>

<p style="margin-left:9%; margin-top: 1em">For those that
don&rsquo;t yet have a 3.2.5 client rsync (or those that
want to be extra careful), it is safest to do a copy into a
dedicated destination directory for the remote files when
you don&rsquo;t trust the remote host. For example, instead
of doing an rsync copy into your home directory:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -aiv
host1:dir1 &#732;</p>

<p style="margin-left:9%; margin-top: 1em">Dedicate a
&quot;host1-files&quot; dir to the remote content:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -aiv
host1:dir1 &#732;/host1-files</p>

<p style="margin-left:9%; margin-top: 1em">See the
<b>&minus;&minus;trust-sender</b> option for additional
details.</p>

<p style="margin-left:9%; margin-top: 1em">CAUTION: it is
not particularly safe to use rsync to copy files from a
case-preserving filesystem to a case-ignoring filesystem. If
you must perform such a copy, you should either disable
symlinks via <b>&minus;&minus;no-links</b> or enable the
munging of symlinks via <b>&minus;&minus;munge-links</b>
(and make sure you use the right local or remote option).
This will prevent rsync from doing potentially dangerous
things if a symlink name overlaps with a file or directory.
It does not, however, ensure that you get a full copy of all
the files (since that may not be possible when the names
overlap). A potentially better solution is to list all the
source files and create a safe list of filenames that you
pass to the <b>&minus;&minus;files-from</b> option. Any
files that conflict in name would need to be copied to
different destination directories using more than one
copy.</p>

<p style="margin-left:9%; margin-top: 1em">While a copy of
a case-ignoring filesystem to a case-ignoring filesystem can
work out fairly well, if no
<b>&minus;&minus;delete-during</b> or
<b>&minus;&minus;delete-before</b> option is active, rsync
can potentially update an existing file on the receiving
side without noticing that the upper-/lower-case of the
filename should be changed to match the sender.</p>

<h2>ADVANCED USAGE
<a name="ADVANCED USAGE"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The syntax for
requesting multiple files from a remote host is done by
specifying additional remote-host args in the same style as
the first, or with the hostname omitted. For instance, all
these work:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -aiv
host:file1 :file2 host:file{3,4} /dest/ <br>
rsync -aiv host::modname/file{1,2} host::modname/extra
/dest/ <br>
rsync -aiv host::modname/first ::extra-file{1,2} /dest/</p>

<p style="margin-left:9%; margin-top: 1em">Note that a
daemon connection only supports accessing one module per
copy command, so if the start of a follow-up path
doesn&rsquo;t begin with the modname of the first path, it
is assumed to be a path in the module (such as the
extra-file1 &amp; extra-file2 that are grabbed above).</p>

<p style="margin-left:9%; margin-top: 1em">Really old
versions of rsync (2.6.9 and before) only allowed specifying
one remote-source arg, so some people have instead relied on
the remote-shell performing space splitting to break up an
arg into multiple paths. Such unintuitive behavior is no
longer supported by default (though you can request it, as
described below).</p>

<p style="margin-left:9%; margin-top: 1em">Starting in
3.2.4, filenames are passed to a remote shell in such a way
as to preserve the characters you give it. Thus, if you ask
for a file with spaces in the name, that&rsquo;s what the
remote rsync looks for:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -aiv
host:&rsquo;a simple file.pdf&rsquo; /dest/</p>

<p style="margin-left:9%; margin-top: 1em">If you use
scripts that have been written to manually apply extra
quoting to the remote rsync args (or to require remote arg
splitting), you can ask rsync to let your script handle the
extra escaping. This is done by either adding the
<b>&minus;&minus;old-args</b> option to the rsync runs in
the script (which requires a new rsync) or exporting
RSYNC_OLD_ARGS=1 and RSYNC_PROTECT_ARGS=0 (which works with
old or new rsync versions).</p>

<h2>CONNECTING TO AN RSYNC DAEMON
<a name="CONNECTING TO AN RSYNC DAEMON"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">It is also
possible to use rsync without a remote shell as the
transport. In this case you will directly connect to a
remote rsync daemon, typically using TCP port 873. (This
obviously requires the daemon to be running on the remote
system, so refer to the STARTING AN RSYNC DAEMON TO ACCEPT
CONNECTIONS section below for information on that.)</p>

<p style="margin-left:9%; margin-top: 1em">Using rsync in
this way is the same as using it with a remote shell except
that:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="82%">


<p style="margin-top: 1em">Use either double-colon syntax
or rsync:// URL syntax instead of the single-colon (remote
shell) syntax.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>The first element of the &quot;path&quot; is actually a
module name.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Additional remote source args can use an abbreviated
syntax that omits the hostname and/or the module name, as
discussed in ADVANCED USAGE.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>The remote daemon may print a &quot;message of the
day&quot; when you connect.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>If you specify only the host (with no module or path)
then a list of accessible modules on the daemon is
output.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>If you specify a remote source path but no destination,
a listing of the matching files on the remote daemon is
output.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>The <b>&minus;&minus;rsh</b> (<b>&minus;e</b>) option
must be omitted to avoid changing the connection style from
using a socket connection to USING RSYNC-DAEMON FEATURES VIA
A REMOTE-SHELL CONNECTION.</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">An example that
copies all the files in a remote module named
&quot;src&quot;:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -av
host::src /dest</p>

<p style="margin-left:9%; margin-top: 1em">Some modules on
the remote daemon may require authentication. If so, you
will receive a password prompt when you connect. You can
avoid the password prompt by setting the environment
variable <b>RSYNC_PASSWORD</b> to the password you want to
use or using the <b>&minus;&minus;password-file</b> option.
This may be useful when scripting rsync.</p>

<p style="margin-left:9%; margin-top: 1em">WARNING: On some
systems environment variables are visible to all users. On
those systems using <b>&minus;&minus;password-file</b> is
recommended.</p>

<p style="margin-left:9%; margin-top: 1em">You may
establish the connection via a web proxy by setting the
environment variable <b>RSYNC_PROXY</b> to a hostname:port
pair pointing to your web proxy. Note that your web
proxy&rsquo;s configuration must support proxy connections
to port 873.</p>

<p style="margin-left:9%; margin-top: 1em">You may also
establish a daemon connection using a program as a proxy by
setting the environment variable <b>RSYNC_CONNECT_PROG</b>
to the commands you wish to run in place of making a direct
socket connection. The string may contain the escape
&quot;%H&quot; to represent the hostname specified in the
rsync command (so use &quot;%%&quot; if you need a single
&quot;%&quot; in your string). For example:</p>

<p style="margin-left:14%; margin-top: 1em">export
RSYNC_CONNECT_PROG=&rsquo;ssh proxyhost nc %H 873&rsquo;
<br>
rsync -av targethost1::module/src/ /dest/ <br>
rsync -av rsync://targethost2/module/src/ /dest/</p>

<p style="margin-left:9%; margin-top: 1em">The command
specified above uses ssh to run nc (netcat) on a proxyhost,
which forwards all data to port 873 (the rsync daemon) on
the targethost (%H).</p>

<p style="margin-left:9%; margin-top: 1em">Note also that
if the <b>RSYNC_SHELL</b> environment variable is set, that
program will be used to run the <b>RSYNC_CONNECT_PROG</b>
command instead of using the default shell of the
<b>system()</b> call.</p>

<h2>USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION
<a name="USING RSYNC-DAEMON FEATURES VIA A REMOTE-SHELL CONNECTION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">It is sometimes
useful to use various features of an rsync daemon (such as
named modules) without actually allowing any new socket
connections into a system (other than what is already
required to allow remote-shell access). Rsync supports
connecting to a host using a remote shell and then spawning
a single-use &quot;daemon&quot; server that expects to read
its config file in the home dir of the remote user. This can
be useful if you want to encrypt a daemon-style
transfer&rsquo;s data, but since the daemon is started up
fresh by the remote user, you may not be able to use
features such as chroot or change the uid used by the
daemon. (For another way to encrypt a daemon transfer,
consider using ssh to tunnel a local port to a remote
machine and configure a normal rsync daemon on that remote
host to only allow connections from
&quot;localhost&quot;.)</p>

<p style="margin-left:9%; margin-top: 1em">From the
user&rsquo;s perspective, a daemon transfer via a
remote-shell connection uses nearly the same command-line
syntax as a normal rsync-daemon transfer, with the only
exception being that you must explicitly set the remote
shell program on the command-line with the
<b>&minus;&minus;rsh=COMMAND</b> option. (Setting the
RSYNC_RSH in the environment will not turn on this
functionality.) For example:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -av
--rsh=ssh host::module /dest</p>

<p style="margin-left:9%; margin-top: 1em">If you need to
specify a different remote-shell user, keep in mind that the
user@ prefix in front of the host is specifying the
rsync-user value (for a module that requires user-based
authentication). This means that you must give the
&rsquo;&minus;l user&rsquo; option to ssh when specifying
the remote-shell, as in this example that uses the short
version of the <b>&minus;&minus;rsh</b> option:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -av -e
&quot;ssh -l ssh-user&quot; rsync-user@host::module
/dest</p>

<p style="margin-left:9%; margin-top: 1em">The
&quot;ssh-user&quot; will be used at the ssh level; the
&quot;rsync-user&quot; will be used to log-in to the
&quot;module&quot;.</p>

<p style="margin-left:9%; margin-top: 1em">In this setup,
the daemon is started by the ssh command that is accessing
the system (which can be forced via the
<b>&#732;/.ssh/authorized_keys</b> file, if desired).
However, when accessing a daemon directly, it needs to be
started beforehand.</p>

<h2>STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS
<a name="STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">In order to
connect to an rsync daemon, the remote system needs to have
a daemon already running (or it needs to have configured
something like inetd to spawn an rsync daemon for incoming
connections on a particular port). For full information on
how to start a daemon that will handling incoming socket
connections, see the <b>rsyncd.conf</b>(5)
manpage&nbsp;&minus;&minus; that is the config file for the
daemon, and it contains the full details for how to run the
daemon (including stand-alone and inetd configurations).</p>

<p style="margin-left:9%; margin-top: 1em">If you&rsquo;re
using one of the remote-shell transports for the transfer,
there is no need to manually start an rsync daemon.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Here are some
examples of how rsync can be used.</p>

<p style="margin-left:9%; margin-top: 1em">To backup a home
directory, which consists of large MS Word files and mail
folders, a per-user cron job can be used that runs this each
day:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -aiz .
bkhost:backup/joe/</p>

<p style="margin-left:9%; margin-top: 1em">To move some
files from a remote host to the local host, you could
run:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -aiv
--remove-source-files rhost:/tmp/{file1,file2}.c
&#732;/src/</p>

<h2>OPTION SUMMARY
<a name="OPTION SUMMARY"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Here is a short
summary of the options available in rsync. Each option also
has its own detailed description later in this manpage.</p>

<p style="margin-left:9%; margin-top: 1em">--verbose, -v
increase verbosity <br>
--info=FLAGS fine-grained informational verbosity <br>
--debug=FLAGS fine-grained debug verbosity <br>
--stderr=e|a|c change stderr output mode (default: errors)
<br>
--quiet, -q suppress non-error messages <br>
--no-motd suppress daemon-mode MOTD <br>
--checksum, -c skip based on checksum, not mod-time &amp;
size <br>
--archive, -a archive mode is -rlptgoD (no -A,-X,-U,-N,-H)
<br>
--no-OPTION turn off an implied OPTION (e.g. --no-D) <br>
--recursive, -r recurse into directories <br>
--relative, -R use relative path names <br>
--no-implied-dirs don&rsquo;t send implied dirs with
--relative <br>
--backup, -b make backups (see --suffix &amp; --backup-dir)
<br>
--backup-dir=DIR make backups into hierarchy based in DIR
<br>
--suffix=SUFFIX backup suffix (default &#732; w/o
--backup-dir) <br>
--update, -u skip files that are newer on the receiver <br>
--inplace update destination files in-place <br>
--append append data onto shorter files <br>
--append-verify --append w/old data in file checksum <br>
--dirs, -d transfer directories without recursing <br>
--old-dirs, --old-d works like --dirs when talking to old
rsync <br>
--mkpath create destination&rsquo;s missing path components
<br>
--links, -l copy symlinks as symlinks <br>
--copy-links, -L transform symlink into referent file/dir
<br>
--copy-unsafe-links only &quot;unsafe&quot; symlinks are
transformed <br>
--safe-links ignore symlinks that point outside the tree
<br>
--munge-links munge symlinks to make them safe &amp;
unusable <br>
--copy-dirlinks, -k transform symlink to dir into referent
dir <br>
--keep-dirlinks, -K treat symlinked dir on receiver as dir
<br>
--hard-links, -H preserve hard links <br>
--perms, -p preserve permissions <br>
--executability, -E preserve executability <br>
--chmod=CHMOD affect file and/or directory permissions <br>
--acls, -A preserve ACLs (implies --perms) <br>
--xattrs, -X preserve extended attributes <br>
--owner, -o preserve owner (super-user only) <br>
--group, -g preserve group <br>
--devices preserve device files (super-user only) <br>
--copy-devices copy device contents as a regular file <br>
--write-devices write to devices as files (implies
--inplace) <br>
--specials preserve special files <br>
-D same as --devices --specials <br>
--times, -t preserve modification times <br>
--atimes, -U preserve access (use) times <br>
--open-noatime avoid changing the atime on opened files <br>
--crtimes, -N preserve create times (newness) <br>
--omit-dir-times, -O omit directories from --times <br>
--omit-link-times, -J omit symlinks from --times <br>
--super receiver attempts super-user activities <br>
--fake-super store/recover privileged attrs using xattrs
<br>
--sparse, -S turn sequences of nulls into sparse blocks <br>
--preallocate allocate dest files before writing them <br>
--dry-run, -n perform a trial run with no changes made <br>
--whole-file, -W copy files whole (w/o delta-xfer algorithm)
<br>
--checksum-choice=STR choose the checksum algorithm (aka
--cc) <br>
--one-file-system, -x don&rsquo;t cross filesystem
boundaries <br>
--block-size=SIZE, -B force a fixed checksum block-size <br>
--rsh=COMMAND, -e specify the remote shell to use <br>
--rsync-path=PROGRAM specify the rsync to run on remote
machine <br>
--existing skip creating new files on receiver <br>
--ignore-existing skip updating files that exist on receiver
<br>
--remove-source-files sender removes synchronized files
(non-dir) <br>
--del an alias for --delete-during <br>
--delete delete extraneous files from dest dirs <br>
--delete-before receiver deletes before xfer, not during
<br>
--delete-during receiver deletes during the transfer <br>
--delete-delay find deletions during, delete after <br>
--delete-after receiver deletes after transfer, not during
<br>
--delete-excluded also delete excluded files from dest dirs
<br>
--ignore-missing-args ignore missing source args without
error <br>
--delete-missing-args delete missing source args from
destination <br>
--ignore-errors delete even if there are I/O errors <br>
--force force deletion of dirs even if not empty <br>
--max-delete=NUM don&rsquo;t delete more than NUM files <br>
--max-size=SIZE don&rsquo;t transfer any file larger than
SIZE <br>
--min-size=SIZE don&rsquo;t transfer any file smaller than
SIZE <br>
--max-alloc=SIZE change a limit relating to memory alloc
<br>
--partial keep partially transferred files <br>
--partial-dir=DIR put a partially transferred file into DIR
<br>
--delay-updates put all updated files into place at end <br>
--prune-empty-dirs, -m prune empty directory chains from
file-list <br>
--numeric-ids don&rsquo;t map uid/gid values by user/group
name <br>
--usermap=STRING custom username mapping <br>
--groupmap=STRING custom groupname mapping <br>
--chown=USER:GROUP simple username/groupname mapping <br>
--timeout=SECONDS set I/O timeout in seconds <br>
--contimeout=SECONDS set daemon connection timeout in
seconds <br>
--ignore-times, -I don&rsquo;t skip files that match size
and time <br>
--size-only skip files that match in size <br>
--modify-window=NUM, -@ set the accuracy for mod-time
comparisons <br>
--temp-dir=DIR, -T create temporary files in directory DIR
<br>
--fuzzy, -y find similar file for basis if no dest file <br>
--compare-dest=DIR also compare destination files relative
to DIR <br>
--copy-dest=DIR ... and include copies of unchanged files
<br>
--link-dest=DIR hardlink to files in DIR when unchanged <br>
--compress, -z compress file data during the transfer <br>
--compress-choice=STR choose the compression algorithm (aka
--zc) <br>
--compress-level=NUM explicitly set compression level (aka
--zl) <br>
--skip-compress=LIST skip compressing files with suffix in
LIST <br>
--cvs-exclude, -C auto-ignore files in the same way CVS does
<br>
--filter=RULE, -f add a file-filtering RULE <br>
-F same as --filter=&rsquo;dir-merge /.rsync-filter&rsquo;
<br>
repeated: --filter=&rsquo;- .rsync-filter&rsquo; <br>
--exclude=PATTERN exclude files matching PATTERN <br>
--exclude-from=FILE read exclude patterns from FILE <br>
--include=PATTERN don&rsquo;t exclude files matching PATTERN
<br>
--include-from=FILE read include patterns from FILE <br>
--files-from=FILE read list of source-file names from FILE
<br>
--from0, -0 all *-from/filter files are delimited by 0s <br>
--old-args disable the modern arg-protection idiom <br>
--secluded-args, -s use the protocol to safely send the args
<br>
--trust-sender trust the remote sender&rsquo;s file list
<br>
--copy-as=USER[:GROUP] specify user &amp; optional group for
the copy <br>
--address=ADDRESS bind address for outgoing socket to daemon
<br>
--port=PORT specify double-colon alternate port number <br>
--sockopts=OPTIONS specify custom TCP options <br>
--blocking-io use blocking I/O for the remote shell <br>
--outbuf=N|L|B set out buffering to None, Line, or Block
<br>
--stats give some file-transfer stats <br>
--8-bit-output, -8 leave high-bit chars unescaped in output
<br>
--human-readable, -h output numbers in a human-readable
format <br>
--progress show progress during transfer <br>
-P same as --partial --progress <br>
--itemize-changes, -i output a change-summary for all
updates <br>
--remote-option=OPT, -M send OPTION to the remote side only
<br>
--out-format=FORMAT output updates using the specified
FORMAT <br>
--log-file=FILE log what we&rsquo;re doing to the specified
FILE <br>
--log-file-format=FMT log updates using the specified FMT
<br>
--password-file=FILE read daemon-access password from FILE
<br>
--early-input=FILE use FILE for daemon&rsquo;s early exec
input <br>
--list-only list the files instead of copying them <br>
--bwlimit=RATE limit socket I/O bandwidth <br>
--stop-after=MINS Stop rsync after MINS minutes have elapsed
<br>
--stop-at=y-m-dTh:m Stop rsync at the specified point in
time <br>
--fsync fsync every written file <br>
--write-batch=FILE write a batched update to FILE <br>
--only-write-batch=FILE like --write-batch but w/o updating
dest <br>
--read-batch=FILE read a batched update from FILE <br>
--protocol=NUM force an older protocol version to be used
<br>
--iconv=CONVERT_SPEC request charset conversion of filenames
<br>
--tr=BAD/GOOD transliterate filenames <br>
--checksum-seed=NUM set block/file checksum seed (advanced)
<br>
--ipv4, -4 prefer IPv4 <br>
--ipv6, -6 prefer IPv6 <br>
--version, -V print the version + other info and exit <br>
--help, -h (*) show this help (* -h is help only on its
own)</p>

<p style="margin-left:9%; margin-top: 1em">Rsync can also
be run as a daemon, in which case the following options are
accepted:</p>

<p style="margin-left:9%; margin-top: 1em">--daemon run as
an rsync daemon <br>
--address=ADDRESS bind to the specified address <br>
--bwlimit=RATE limit socket I/O bandwidth <br>
--config=FILE specify alternate rsyncd.conf file <br>
--dparam=OVERRIDE, -M override global daemon config
parameter <br>
--no-detach do not detach from the parent <br>
--port=PORT listen on alternate port number <br>
--log-file=FILE override the &quot;log file&quot; setting
<br>
--log-file-format=FMT override the &quot;log format&quot;
setting <br>
--sockopts=OPTIONS specify custom TCP options <br>
--verbose, -v increase verbosity <br>
--ipv4, -4 prefer IPv4 <br>
--ipv6, -6 prefer IPv6 <br>
--help, -h show this help (when used with --daemon)</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Rsync accepts
both long (double-dash + word) and short (single-dash +
letter) options. The full list of the available options are
described below. If an option can be specified in more than
one way, the choices are comma-separated. Some options only
have a long variant, not a short.</p>

<p style="margin-left:9%; margin-top: 1em">If the option
takes a parameter, the parameter is only listed after the
long variant, even though it must also be specified for the
short. When specifying a parameter, you can either use the
form <b>&minus;&minus;option=param</b>,
<b>&minus;&minus;option&nbsp;param</b>,
<b>&minus;o=param</b>, <b>&minus;o&nbsp;param</b>, or
<b>&minus;oparam</b> (the latter choices assume that your
option has a short variant).</p>

<p style="margin-left:9%; margin-top: 1em">The parameter
may need to be quoted in some manner for it to survive the
shell&rsquo;s command-line parsing. Also keep in mind that a
leading tilde (<b>&#732;</b>) in a pathname is substituted
by your shell, so make sure that you separate the option
name from the pathname using a space if you want the local
shell to expand it.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="8%">


<p style="margin-top: 1em"><b>&minus;&minus;help</b></p></td>
<td width="1%"></td>
<td width="82%">


<p style="margin-top: 1em">Print a short help page
describing the options available in rsync and exit. You can
also use <b>&minus;h</b> for <b>&minus;&minus;help</b> when
it is used without any other options (since it normally
means <b>&minus;&minus;human-readable</b>).</p></td></tr>
</table>

<p style="margin-left:9%;"><b>&minus;&minus;version</b>,
<b>&minus;V</b></p>

<p style="margin-left:18%;">Print the rsync version plus
other info and exit. When repeated, the information is
output is a JSON format that is still fairly readable
(client side only).</p>

<p style="margin-left:18%; margin-top: 1em">The output
includes a list of compiled-in capabilities, a list of
optimizations, the default list of checksum algorithms, the
default list of compression algorithms, the default list of
daemon auth digests, a link to the rsync web site, and a few
other items.</p>

<p style="margin-left:9%;"><b>&minus;&minus;verbose</b>,
<b>&minus;v</b></p>

<p style="margin-left:18%;">This option increases the
amount of information you are given during the transfer. By
default, rsync works silently. A single <b>&minus;v</b> will
give you information about what files are being transferred
and a brief summary at the end. Two <b>&minus;v</b> options
will give you information on what files are being skipped
and slightly more information at the end. More than two
<b>&minus;v</b> options should only be used if you are
debugging rsync.</p>

<p style="margin-left:18%; margin-top: 1em">The end-of-run
summary tells you the number of bytes sent to the remote
rsync (which is the receiving side on a local copy), the
number of bytes received from the remote host, and the
average bytes per second of the transferred data computed
over the entire length of the rsync run. The second line
shows the total size (in bytes), which is the sum of all the
file sizes that rsync considered transferring. It also shows
a &quot;speedup&quot; value, which is a ratio of the total
file size divided by the sum of the sent and received bytes
(which is really just a feel-good bigger-is-better number).
Note that these byte values can be made more (or less)
human-readable by using the
<b>&minus;&minus;human-readable</b> (or
<b>&minus;&minus;no-human-readable</b>) options.</p>

<p style="margin-left:18%; margin-top: 1em">In a modern
rsync, the <b>&minus;v</b> option is equivalent to the
setting of groups of <b>&minus;&minus;info</b> and
<b>&minus;&minus;debug</b> options. You can choose to use
these newer options in addition to, or in place of using
<b>&minus;&minus;verbose</b>, as any fine-grained settings
override the implied settings of <b>&minus;v</b>. Both
<b>&minus;&minus;info</b> and <b>&minus;&minus;debug</b>
have a way to ask for help that tells you exactly what flags
are set for each increase in verbosity.</p>

<p style="margin-left:18%; margin-top: 1em">However, do
keep in mind that a daemon&rsquo;s
&quot;<b>max&nbsp;verbosity</b>&quot; setting will limit how
high of a level the various individual flags can be set on
the daemon side. For instance, if the max is 2, then any
info and/or debug flag that is set to a higher value than
what would be set by <b>&minus;vv</b> will be downgraded to
the <b>&minus;vv</b> level in the daemon&rsquo;s
logging.</p>


<p style="margin-left:9%;"><b>&minus;&minus;info=FLAGS</b></p>

<p style="margin-left:18%;">This option lets you have
fine-grained control over the information output you want to
see. An individual flag name may be followed by a level
number, with 0 meaning to silence that output, 1 being the
default output level, and higher numbers increasing the
output of that flag (for those that support higher levels).
Use <b>&minus;&minus;info=help</b> to see all the available
flag names, what they output, and what flag names are added
for each increase in the verbose level. Some examples:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -a
--info=progress2 src/ dest/ <br>
rsync -avv --info=stats2,misc1,flist0 src/ dest/</p>

<p style="margin-left:18%; margin-top: 1em">Note that
<b>&minus;&minus;info=name</b>&rsquo;s output is affected by
the <b>&minus;&minus;out-format</b> and
<b>&minus;&minus;itemize-changes</b> (<b>&minus;i</b>)
options. See those options for more information on what is
output and when.</p>

<p style="margin-left:18%; margin-top: 1em">This option was
added to 3.1.0, so an older rsync on the server side might
reject your attempts at fine-grained control (if one or more
flags needed to be send to the server and the server was too
old to understand them). See also the
&quot;<b>max&nbsp;verbosity</b>&quot; caveat above when
dealing with a daemon.</p>


<p style="margin-left:9%;"><b>&minus;&minus;debug=FLAGS</b></p>

<p style="margin-left:18%;">This option lets you have
fine-grained control over the debug output you want to see.
An individual flag name may be followed by a level number,
with 0 meaning to silence that output, 1 being the default
output level, and higher numbers increasing the output of
that flag (for those that support higher levels). Use
<b>&minus;&minus;debug=help</b> to see all the available
flag names, what they output, and what flag names are added
for each increase in the verbose level. Some examples:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -avvv
--debug=none src/ dest/ <br>
rsync -avA --del --debug=del2,acl src/ dest/</p>

<p style="margin-left:18%; margin-top: 1em">Note that some
debug messages will only be output when the
<b>&minus;&minus;stderr=all</b> option is specified,
especially those pertaining to I/O and buffer debugging.</p>

<p style="margin-left:18%; margin-top: 1em">Beginning in
3.2.0, this option is no longer auto-forwarded to the server
side in order to allow you to specify different debug values
for each side of the transfer, as well as to specify a new
debug option that is only present in one of the rsync
versions. If you want to duplicate the same option on both
sides, using brace expansion is an easy way to save you some
typing. This works in zsh and bash:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -aiv
{-M,}--debug=del2 src/ dest/</p>


<p style="margin-left:9%;"><b>&minus;&minus;stderr=errors|all|client</b></p>

<p style="margin-left:18%;">This option controls which
processes output to stderr and if info messages are also
changed to stderr. The mode strings can be abbreviated, so
feel free to use a single letter value. The 3 possible
choices are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>errors</b> &minus; (the default) causes all the rsync
processes to send an error directly to stderr, even if the
process is on the remote side of the transfer. Info messages
are sent to the client side via the protocol stream. If
stderr is not available (i.e. when directly connecting with
a daemon via a socket) errors fall back to being sent via
the protocol stream.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>all</b> &minus; causes all rsync messages (info and
error) to get written directly to stderr from all (possible)
processes. This causes stderr to become line-buffered
(instead of raw) and eliminates the ability to divide up the
info and error messages by file handle. For those doing
debugging or using several levels of verbosity, this option
can help to avoid clogging up the transfer stream (which
should prevent any chance of a deadlock bug hanging things
up). It also allows <b>&minus;&minus;debug</b> to enable
some extra I/O related messages.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>client</b> &minus; causes all rsync messages to be
sent to the client side via the protocol stream. One client
process outputs all messages, with errors on stderr and info
messages on stdout. This <b>was</b> the default in older
rsync versions, but can cause error delays when a lot of
transfer data is ahead of the messages. If you&rsquo;re
pushing files to an older rsync, you may want to use
<b>&minus;&minus;stderr=all</b> since that idiom has been
around for several releases.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">This option was
added in rsync 3.2.3. This version also began the forwarding
of a non-default setting to the remote side, though rsync
uses the backward-compatible options
<b>&minus;&minus;msgs2stderr</b> and
<b>&minus;&minus;no-msgs2stderr</b> to represent the
<b>all</b> and <b>client</b> settings, respectively. A newer
rsync will continue to accept these older option names to
maintain compatibility.</p>

<p style="margin-left:9%;"><b>&minus;&minus;quiet</b>,
<b>&minus;q</b></p>

<p style="margin-left:18%;">This option decreases the
amount of information you are given during the transfer,
notably suppressing information messages from the remote
server. This option is useful when invoking rsync from
cron.</p>


<p style="margin-left:9%;"><b>&minus;&minus;no-motd</b></p>

<p style="margin-left:18%;">This option affects the
information that is output by the client at the start of a
daemon transfer. This suppresses the message-of-the-day
(MOTD) text, but it also affects the list of modules that
the daemon sends in response to the &quot;rsync host::&quot;
request (due to a limitation in the rsync protocol), so omit
this option if you want to request the list of modules from
the daemon.</p>


<p style="margin-left:9%;"><b>&minus;&minus;ignore-times</b>,
<b>&minus;I</b></p>

<p style="margin-left:18%;">Normally rsync will skip any
files that are already the same size and have the same
modification timestamp. This option turns off this
&quot;quick check&quot; behavior, causing all files to be
updated.</p>

<p style="margin-left:18%; margin-top: 1em">This option can
be confusing compared to
<b>&minus;&minus;ignore-existing</b> and
<b>&minus;&minus;ignore-non-existing</b> in that that they
cause rsync to transfer fewer files, while this option
causes rsync to transfer more files.</p>


<p style="margin-left:9%;"><b>&minus;&minus;size-only</b></p>

<p style="margin-left:18%;">This modifies rsync&rsquo;s
&quot;quick check&quot; algorithm for finding files that
need to be transferred, changing it from the default of
transferring files with either a changed size or a changed
last-modified time to just looking for files that have
changed in size. This is useful when starting to use rsync
after using another mirroring system which may not preserve
timestamps exactly.</p>


<p style="margin-left:9%;"><b>&minus;&minus;modify-window=NUM</b>,
<b>&minus;@</b></p>

<p style="margin-left:18%;">When comparing two timestamps,
rsync treats the timestamps as being equal if they differ by
no more than the modify-window value. The default is 0,
which matches just integer seconds. If you specify a
negative value (and the receiver is at least version 3.1.3)
then nanoseconds will also be taken into account. Specifying
1 is useful for copies to/from MS Windows FAT filesystems,
because FAT represents times with a 2-second resolution
(allowing times to differ from the original by up to 1
second).</p>

<p style="margin-left:18%; margin-top: 1em">If you want all
your transfers to default to comparing nanoseconds, you can
create a <b>&#732;/.popt</b> file and put these lines in
it:</p>

<p style="margin-left:23%; margin-top: 1em">rsync alias -a
-a@-1 <br>
rsync alias -t -t@-1</p>

<p style="margin-left:18%; margin-top: 1em">With that as
the default, you&rsquo;d need to specify
<b>&minus;&minus;modify-window=0</b> (aka <b>&minus;@0</b>)
to override it and ignore nanoseconds, e.g. if you&rsquo;re
copying between ext3 and ext4, or if the receiving rsync is
older than 3.1.3.</p>

<p style="margin-left:9%;"><b>&minus;&minus;checksum</b>,
<b>&minus;c</b></p>

<p style="margin-left:18%;">This changes the way rsync
checks if the files have been changed and are in need of a
transfer. Without this option, rsync uses a &quot;quick
check&quot; that (by default) checks if each file&rsquo;s
size and time of last modification match between the sender
and receiver. This option changes this to compare a 128-bit
checksum for each file that has a matching size. Generating
the checksums means that both sides will expend a lot of
disk I/O reading all the data in the files in the transfer,
so this can slow things down significantly (and this is
prior to any reading that will be done to transfer changed
files)</p>

<p style="margin-left:18%; margin-top: 1em">The sending
side generates its checksums while it is doing the
file-system scan that builds the list of the available
files. The receiver generates its checksums when it is
scanning for changed files, and will checksum any file that
has the same size as the corresponding sender&rsquo;s file:
files with either a changed size or a changed checksum are
selected for transfer.</p>

<p style="margin-left:18%; margin-top: 1em">Note that rsync
always verifies that each <i>transferred</i> file was
correctly reconstructed on the receiving side by checking a
whole-file checksum that is generated as the file is
transferred, but that automatic after-the-transfer
verification has nothing to do with this option&rsquo;s
before-the-transfer &quot;Does this file need to be
updated?&quot; check.</p>

<p style="margin-left:18%; margin-top: 1em">The checksum
used is auto-negotiated between the client and the server,
but can be overridden using either the
<b>&minus;&minus;checksum-choice</b>
(<b>&minus;&minus;cc</b>) option or an environment variable
that is discussed in that option&rsquo;s section.</p>

<p style="margin-left:9%;"><b>&minus;&minus;archive</b>,
<b>&minus;a</b></p>

<p style="margin-left:18%;">This is equivalent to
<b>&minus;rlptgoD</b>. It is a quick way of saying you want
recursion and want to preserve almost everything. Be aware
that it does <b>not</b> include preserving ACLs
(<b>&minus;A</b>), xattrs (<b>&minus;X</b>), atimes
(<b>&minus;U</b>), crtimes (<b>&minus;N</b>), nor the
finding and preserving of hardlinks (<b>&minus;H</b>).</p>

<p style="margin-left:18%; margin-top: 1em">The only
exception to the above equivalence is when
<b>&minus;&minus;files-from</b> is specified, in which case
<b>&minus;r</b> is not implied.</p>


<p style="margin-left:9%;"><b>&minus;&minus;no-OPTION</b></p>

<p style="margin-left:18%;">You may turn off one or more
implied options by prefixing the option name with
&quot;no-&quot;. Not all positive options have a negated
opposite, but a lot do, including those that can be used to
disable an implied option (e.g. <b>&minus;&minus;no-D</b>,
<b>&minus;&minus;no-perms</b>) or have different defaults in
various circumstances (e.g.
<b>&minus;&minus;no-whole-file</b>,
<b>&minus;&minus;no-blocking-io</b>,
<b>&minus;&minus;no-dirs</b>). Every valid negated option
accepts both the short and the long option name after the
&quot;no-&quot; prefix (e.g. <b>&minus;&minus;no-R</b> is
the same as <b>&minus;&minus;no-relative</b>).</p>

<p style="margin-left:18%; margin-top: 1em">As an example,
if you want to use <b>&minus;&minus;archive</b>
(<b>&minus;a</b>) but don&rsquo;t want
<b>&minus;&minus;owner</b> (<b>&minus;o</b>), instead of
converting <b>&minus;a</b> into <b>&minus;rlptgD</b>, you
can specify <b>&minus;a&nbsp;&minus;&minus;no-o</b> (aka
<b>&minus;&minus;archive&nbsp;&minus;&minus;no-owner</b>).</p>

<p style="margin-left:18%; margin-top: 1em">The order of
the options is important: if you specify
<b>&minus;&minus;no-r&nbsp;&minus;a</b>, the <b>&minus;r</b>
option would end up being turned on, the opposite of
<b>&minus;a&nbsp;&minus;&minus;no-r</b>. Note also that the
side-effects of the <b>&minus;&minus;files-from</b> option
are NOT positional, as it affects the default state of
several options and slightly changes the meaning of
<b>&minus;a</b> (see the <b>&minus;&minus;files-from</b>
option for more details).</p>

<p style="margin-left:9%;"><b>&minus;&minus;recursive</b>,
<b>&minus;r</b></p>

<p style="margin-left:18%;">This tells rsync to copy
directories recursively. See also <b>&minus;&minus;dirs</b>
(<b>&minus;d</b>) for an option that allows the scanning of
a single directory.</p>

<p style="margin-left:18%; margin-top: 1em">See the
<b>&minus;&minus;inc-recursive</b> option for a discussion
of the incremental recursion for creating the list of files
to transfer.</p>


<p style="margin-left:9%;"><b>&minus;&minus;inc-recursive</b>,
<b>&minus;&minus;i-r</b></p>

<p style="margin-left:18%;">This option explicitly enables
on incremental recursion when scanning for files, which is
enabled by default when using the
<b>&minus;&minus;recursive</b> option and both sides of the
transfer are running rsync 3.0.0 or newer.</p>

<p style="margin-left:18%; margin-top: 1em">Incremental
recursion uses much less memory than non-incremental, while
also beginning the transfer more quickly (since it
doesn&rsquo;t need to scan the entire transfer hierarchy
before it starts transferring files). If no recursion is
enabled in the source files, this option has no effect.</p>

<p style="margin-left:18%; margin-top: 1em">Some options
require rsync to know the full file list, so these options
disable the incremental recursion mode. These include:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="58%">


<p><b>&minus;&minus;delete-before</b> (the old default of
<b>&minus;&minus;delete</b>)</p> </td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="58%">


<p><b>&minus;&minus;delete-after</b></p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="58%">


<p><b>&minus;&minus;prune-empty-dirs</b></p></td>
<td width="15%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="58%">


<p><b>&minus;&minus;delay-updates</b></p></td>
<td width="15%">
</td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">In order to
make <b>&minus;&minus;delete</b> compatible with incremental
recursion, rsync 3.0.0 made
<b>&minus;&minus;delete-during</b> the default delete mode
(which was first added in 2.6.4).</p>

<p style="margin-left:18%; margin-top: 1em">One side-effect
of incremental recursion is that any missing sub-directories
inside a recursively-scanned directory are (by default)
created prior to recursing into the sub-dirs. This earlier
creation point (compared to a non-incremental recursion)
allows rsync to then set the modify time of the finished
directory right away (without having to delay that until a
bunch of recursive copying has finished). However, these
early directories don&rsquo;t yet have their completed mode,
mtime, or ownership set&nbsp;&minus;&minus; they have more
restrictive rights until the subdirectory&rsquo;s copying
actually begins. This early-creation idiom can be avoided by
using the <b>&minus;&minus;omit-dir-times</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">Incremental
recursion can be disabled using the
<b>&minus;&minus;no-inc-recursive</b>
(<b>&minus;&minus;no-i-r</b>) option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;no-inc-recursive</b>,
<b>&minus;&minus;no-i-r</b></p>

<p style="margin-left:18%;">Disables the new incremental
recursion algorithm of the <b>&minus;&minus;recursive</b>
option. This makes rsync scan the full file list before it
begins to transfer files. See
<b>&minus;&minus;inc-recursive</b> for more info.</p>

<p style="margin-left:9%;"><b>&minus;&minus;relative</b>,
<b>&minus;R</b></p>

<p style="margin-left:18%;">Use relative paths. This means
that the full path names specified on the command line are
sent to the server rather than just the last parts of the
filenames. This is particularly useful when you want to send
several different directories at the same time. For example,
if you used this command:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -av
/foo/bar/baz.c remote:/tmp/</p>

<p style="margin-left:18%; margin-top: 1em">would create a
file named baz.c in /tmp/ on the remote machine. If instead
you used</p>

<p style="margin-left:23%; margin-top: 1em">rsync -avR
/foo/bar/baz.c remote:/tmp/</p>

<p style="margin-left:18%; margin-top: 1em">then a file
named /tmp/foo/bar/baz.c would be created on the remote
machine, preserving its full path. These extra path elements
are called &quot;implied directories&quot; (i.e. the
&quot;foo&quot; and the &quot;foo/bar&quot; directories in
the above example).</p>

<p style="margin-left:18%; margin-top: 1em">Beginning with
rsync 3.0.0, rsync always sends these implied directories as
real directories in the file list, even if a path element is
really a symlink on the sending side. This prevents some
really unexpected behaviors when copying the full path of a
file that you didn&rsquo;t realize had a symlink in its
path. If you want to duplicate a server-side symlink,
include both the symlink via its path, and referent
directory via its real path. If you&rsquo;re dealing with an
older rsync on the sending side, you may need to use the
<b>&minus;&minus;no-implied-dirs</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">It is also
possible to limit the amount of path information that is
sent as implied directories for each path you specify. With
a modern rsync on the sending side (beginning with 2.6.7),
you can insert a dot and a slash into the source path, like
this:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -avR
/foo/./bar/baz.c remote:/tmp/</p>

<p style="margin-left:18%; margin-top: 1em">That would
create /tmp/bar/baz.c on the remote machine. (Note that the
dot must be followed by a slash, so &quot;/foo/.&quot; would
not be abbreviated.) For older rsync versions, you would
need to use a chdir to limit the source path. For example,
when pushing files:</p>

<p style="margin-left:23%; margin-top: 1em">(cd /foo; rsync
-avR bar/baz.c remote:/tmp/)</p>

<p style="margin-left:18%; margin-top: 1em">(Note that the
parens put the two commands into a sub-shell, so that the
&quot;cd&quot; command doesn&rsquo;t remain in effect for
future commands.) If you&rsquo;re pulling files from an
older rsync, use this idiom (but only for a non-daemon
transfer):</p>

<p style="margin-left:23%; margin-top: 1em">rsync -avR
--rsync-path=&quot;cd /foo; rsync&quot; \ <br>
remote:bar/baz.c /tmp/</p>


<p style="margin-left:9%;"><b>&minus;&minus;no-implied-dirs</b></p>

<p style="margin-left:18%;">This option affects the default
behavior of the <b>&minus;&minus;relative</b> option. When
it is specified, the attributes of the implied directories
from the source names are not included in the transfer. This
means that the corresponding path elements on the
destination system are left unchanged if they exist, and any
missing implied directories are created with default
attributes. This even allows these implied path elements to
have big differences, such as being a symlink to a directory
on the receiving side.</p>

<p style="margin-left:18%; margin-top: 1em">For instance,
if a command-line arg or a files-from entry told rsync to
transfer the file &quot;path/foo/file&quot;, the directories
&quot;path&quot; and &quot;path/foo&quot; are implied when
<b>&minus;&minus;relative</b> is used. If
&quot;path/foo&quot; is a symlink to &quot;bar&quot; on the
destination system, the receiving rsync would ordinarily
delete &quot;path/foo&quot;, recreate it as a directory, and
receive the file into the new directory. With
<b>&minus;&minus;no-implied-dirs</b>, the receiving rsync
updates &quot;path/foo/file&quot; using the existing path
elements, which means that the file ends up being created in
&quot;path/bar&quot;. Another way to accomplish this link
preservation is to use the
<b>&minus;&minus;keep-dirlinks</b> option (which will also
affect symlinks to directories in the rest of the
transfer).</p>

<p style="margin-left:18%; margin-top: 1em">When pulling
files from an rsync older than 3.0.0, you may need to use
this option if the sending side has a symlink in the path
you request and you wish the implied directories to be
transferred as normal directories.</p>

<p style="margin-left:9%;"><b>&minus;&minus;backup</b>,
<b>&minus;b</b></p>

<p style="margin-left:18%;">With this option, preexisting
destination files are renamed as each file is transferred or
deleted. You can control where the backup file goes and what
(if any) suffix gets appended using the
<b>&minus;&minus;backup-dir</b> and
<b>&minus;&minus;suffix</b> options.</p>

<p style="margin-left:18%; margin-top: 1em">If you
don&rsquo;t specify <b>&minus;&minus;backup-dir</b>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>1.</p></td>
<td width="6%"></td>
<td width="73%">


<p>the <b>&minus;&minus;omit-dir-times</b> option will be
forced on</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>2.</p></td>
<td width="6%"></td>
<td width="73%">


<p>the use of <b>&minus;&minus;delete</b> (without
<b>&minus;&minus;delete-excluded</b>), causes rsync to add a
&quot;protect&quot; filter-rule for the backup suffix to the
end of all your existing filters that looks like this:
<b>&minus;f&nbsp;&quot;P&nbsp;*&#732;&quot;</b>. This rule
prevents previously backed-up files from being deleted.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">Note that if
you are supplying your own filter rules, you may need to
manually insert your own exclude/protect rule somewhere
higher up in the list so that it has a high enough priority
to be effective (e.g. if your rules specify a trailing
inclusion/exclusion of <b>*</b>, the auto-added rule would
never be reached).</p>


<p style="margin-left:9%;"><b>&minus;&minus;backup-dir=DIR</b></p>

<p style="margin-left:18%;">This implies the
<b>&minus;&minus;backup</b> option, and tells rsync to store
all backups in the specified directory on the receiving
side. This can be used for incremental backups. You can
additionally specify a backup suffix using the
<b>&minus;&minus;suffix</b> option (otherwise the files
backed up in the specified directory will keep their
original filenames).</p>

<p style="margin-left:18%; margin-top: 1em">Note that if
you specify a relative path, the backup directory will be
relative to the destination directory, so you probably want
to specify either an absolute path or a path that starts
with &quot;../&quot;. If an rsync daemon is the receiver,
the backup dir cannot go outside the module&rsquo;s path
hierarchy, so take extra care not to delete it or copy into
it.</p>


<p style="margin-left:9%;"><b>&minus;&minus;suffix=SUFFIX</b></p>

<p style="margin-left:18%;">This option allows you to
override the default backup suffix used with the
<b>&minus;&minus;backup</b> (<b>&minus;b</b>) option. The
default suffix is a <b>&#732;</b> if no
<b>&minus;&minus;backup-dir</b> was specified, otherwise it
is an empty string.</p>

<p style="margin-left:9%;"><b>&minus;&minus;update</b>,
<b>&minus;u</b></p>

<p style="margin-left:18%;">This forces rsync to skip any
files which exist on the destination and have a modified
time that is newer than the source file. (If an existing
destination file has a modification time equal to the source
file&rsquo;s, it will be updated if the sizes are
different.)</p>

<p style="margin-left:18%; margin-top: 1em">Note that this
does not affect the copying of dirs, symlinks, or other
special files. Also, a difference of file format between the
sender and receiver is always considered to be important
enough for an update, no matter what date is on the objects.
In other words, if the source has a directory where the
destination has a file, the transfer would occur regardless
of the timestamps.</p>

<p style="margin-left:18%; margin-top: 1em">This option is
a TRANSFER RULE, so don&rsquo;t expect any exclude side
effects.</p>

<p style="margin-left:18%; margin-top: 1em">A caution for
those that choose to combine <b>&minus;&minus;inplace</b>
with <b>&minus;&minus;update</b>: an interrupted transfer
will leave behind a partial file on the receiving side that
has a very recent modified time, so re-running the transfer
will probably <b>not</b> continue the interrupted file. As
such, it is usually best to avoid combining this with
<b>&minus;&minus;inplace</b> unless you have implemented
manual steps to handle any interrupted in-progress
files.</p>


<p style="margin-left:9%;"><b>&minus;&minus;inplace</b></p>

<p style="margin-left:18%;">This option changes how rsync
transfers a file when its data needs to be updated: instead
of the default method of creating a new copy of the file and
moving it into place when it is complete, rsync instead
writes the updated data directly to the destination
file.</p>

<p style="margin-left:18%; margin-top: 1em">This has
several effects:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>Hard links are not broken. This means the new data will
be visible through other hard links to the destination file.
Moreover, attempts to copy differing source files onto a
multiply-linked destination file will result in a &quot;tug
of war&quot; with the destination data changing back and
forth.</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>In-use binaries cannot be updated (either the OS will
prevent this from happening, or binaries that attempt to
swap-in their data will misbehave or crash).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>The file&rsquo;s data will be in an inconsistent state
during the transfer and will be left that way if the
transfer is interrupted or if an update fails.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A file that rsync cannot write to cannot be updated.
While a super user can update any file, a normal user needs
to be granted write permission for the open of the file for
writing to be successful.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>The efficiency of rsync&rsquo;s delta-transfer algorithm
may be reduced if some data in the destination file is
overwritten before it can be copied to a position later in
the file. This does not apply if you use
<b>&minus;&minus;backup</b>, since rsync is smart enough to
use the backup file as the basis file for the transfer.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">WARNING: you
should not use this option to update files that are being
accessed by others, so be careful when choosing to use this
for a copy.</p>

<p style="margin-left:18%; margin-top: 1em">This option is
useful for transferring large files with block-based changes
or appended data, and also on systems that are disk bound,
not network bound. It can also help keep a copy-on-write
filesystem snapshot from diverging the entire contents of a
file that only has minor changes.</p>

<p style="margin-left:18%; margin-top: 1em">The option
implies <b>&minus;&minus;partial</b> (since an interrupted
transfer does not delete the file), but conflicts with
<b>&minus;&minus;partial-dir</b> and
<b>&minus;&minus;delay-updates</b>. Prior to rsync 2.6.4
<b>&minus;&minus;inplace</b> was also incompatible with
<b>&minus;&minus;compare-dest</b> and
<b>&minus;&minus;link-dest</b>.</p>

<p style="margin-left:9%;"><b>&minus;&minus;append</b></p>

<p style="margin-left:18%;">This special copy mode only
works to efficiently update files that are known to be
growing larger where any existing content on the receiving
side is also known to be the same as the content on the
sender. The use of <b>&minus;&minus;append can be
dangerous</b> if you aren&rsquo;t 100% sure that all the
files in the transfer are shared, growing files. You should
thus use filter rules to ensure that you weed out any files
that do not fit this criteria.</p>

<p style="margin-left:18%; margin-top: 1em">Rsync updates
these growing file in-place without verifying any of the
existing content in the file (it only verifies the content
that it is appending). Rsync skips any files that exist on
the receiving side that are not shorter than the associated
file on the sending side (which means that new files are
transferred). It also skips any files whose size on the
sending side gets shorter during the send negotiations
(rsync warns about a &quot;diminished&quot; file when this
happens).</p>

<p style="margin-left:18%; margin-top: 1em">This does not
interfere with the updating of a file&rsquo;s non-content
attributes (e.g. permissions, ownership, etc.) when the file
does not need to be transferred, nor does it affect the
updating of any directories or non-regular files.</p>


<p style="margin-left:9%;"><b>&minus;&minus;append-verify</b></p>

<p style="margin-left:18%;">This special copy mode works
like <b>&minus;&minus;append</b> except that all the data in
the file is included in the checksum verification (making it
less efficient but also potentially safer). This option
<b>can be dangerous</b> if you aren&rsquo;t 100% sure that
all the files in the transfer are shared, growing files. See
the <b>&minus;&minus;append</b> option for more details.</p>

<p style="margin-left:18%; margin-top: 1em">Note: prior to
rsync 3.0.0, the <b>&minus;&minus;append</b> option worked
like <b>&minus;&minus;append-verify</b>, so if you are
interacting with an older rsync (or the transfer is using a
protocol prior to 30), specifying either append option will
initiate an <b>&minus;&minus;append-verify</b> transfer.</p>

<p style="margin-left:9%;"><b>&minus;&minus;dirs</b>,
<b>&minus;d</b></p>

<p style="margin-left:18%;">Tell the sending side to
include any directories that are encountered. Unlike
<b>&minus;&minus;recursive</b>, a directory&rsquo;s contents
are not copied unless the directory name specified is
&quot;.&quot; or ends with a trailing slash (e.g.
&quot;.&quot;, &quot;dir/.&quot;, &quot;dir/&quot;, etc.).
Without this option or the <b>&minus;&minus;recursive</b>
option, rsync will skip all directories it encounters (and
output a message to that effect for each one). If you
specify both <b>&minus;&minus;dirs</b> and
<b>&minus;&minus;recursive</b>,
<b>&minus;&minus;recursive</b> takes precedence.</p>

<p style="margin-left:18%; margin-top: 1em">The
<b>&minus;&minus;dirs</b> option is implied by the
<b>&minus;&minus;files-from</b> option or the
<b>&minus;&minus;list-only</b> option (including an implied
<b>&minus;&minus;list-only</b> usage) if
<b>&minus;&minus;recursive</b> wasn&rsquo;t specified (so
that directories are seen in the listing). Specify
<b>&minus;&minus;no-dirs</b> (or <b>&minus;&minus;no-d</b>)
if you want to turn this off.</p>

<p style="margin-left:18%; margin-top: 1em">There is also a
backward-compatibility helper option,
<b>&minus;&minus;old-dirs</b> (<b>&minus;&minus;old-d</b>)
that tells rsync to use a hack of
<b>&minus;r&nbsp;&minus;&minus;exclude=&rsquo;/*/*&rsquo;</b>
to get an older rsync to list a single directory without
recursing.</p>

<p style="margin-left:9%;"><b>&minus;&minus;mkpath</b></p>

<p style="margin-left:18%;">Create all missing path
components of the destination path.</p>

<p style="margin-left:18%; margin-top: 1em">By default,
rsync allows only the final component of the destination
path to not exist, which is an attempt to help you to
validate your destination path. With this option, rsync
creates all the missing destination-path components, just as
if <b>mkdir&nbsp;&minus;p&nbsp;$DEST_PATH</b> had been run
on the receiving side.</p>

<p style="margin-left:18%; margin-top: 1em">When specifying
a destination path, including a trailing slash ensures that
the whole path is treated as directory names to be created,
even when the file list has a single item. See the COPYING
TO A DIFFERENT NAME section for full details on how rsync
decides if a final destination-path component should be
created as a directory or not.</p>

<p style="margin-left:18%; margin-top: 1em">If you would
like the newly-created destination dirs to match the dirs on
the sending side, you should be using
<b>&minus;&minus;relative</b> (<b>&minus;R</b>) instead of
<b>&minus;&minus;mkpath</b>. For instance, the following two
commands result in the same destination tree, but only the
second command ensures that the &quot;some/extra/path&quot;
components match the dirs on the sending side:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -ai
--mkpath host:some/extra/path/*.c some/extra/path/ <br>
rsync -aiR host:some/extra/path/*.c ./</p>

<p style="margin-left:9%;"><b>&minus;&minus;links</b>,
<b>&minus;l</b></p>

<p style="margin-left:18%;">Add symlinks to the transferred
files instead of noisily ignoring them with a
&quot;non-regular file&quot; warning for each symlink
encountered. You can alternately silence the warning by
specifying <b>&minus;&minus;info=nonreg0</b>.</p>

<p style="margin-left:18%; margin-top: 1em">The default
handling of symlinks is to recreate each symlink&rsquo;s
unchanged value on the receiving side.</p>

<p style="margin-left:18%; margin-top: 1em">See the
SYMBOLIC LINKS section for multi-option info.</p>


<p style="margin-left:9%;"><b>&minus;&minus;copy-links</b>,
<b>&minus;L</b></p>

<p style="margin-left:18%;">The sender transforms each
symlink encountered in the transfer into the referent item,
following the symlink chain to the file or directory that it
references. If a symlink chain is broken, an error is output
and the file is dropped from the transfer.</p>

<p style="margin-left:18%; margin-top: 1em">This option
supersedes any other options that affect symlinks in the
transfer, since there are no symlinks left in the
transfer.</p>

<p style="margin-left:18%; margin-top: 1em">This option
does not change the handling of existing symlinks on the
receiving side, unlike versions of rsync prior to 2.6.3
which had the side-effect of telling the receiving side to
also follow symlinks. A modern rsync won&rsquo;t forward
this option to a remote receiver (since only the sender
needs to know about it), so this caveat should only affect
someone using an rsync client older than 2.6.7 (which is
when <b>&minus;L</b> stopped being forwarded to the
receiver).</p>

<p style="margin-left:18%; margin-top: 1em">See the
<b>&minus;&minus;keep-dirlinks</b> (<b>&minus;K</b>) if you
need a symlink to a directory to be treated as a real
directory on the receiving side.</p>

<p style="margin-left:18%; margin-top: 1em">See the
SYMBOLIC LINKS section for multi-option info.</p>


<p style="margin-left:9%;"><b>&minus;&minus;copy-unsafe-links</b></p>

<p style="margin-left:18%;">This tells rsync to copy the
referent of symbolic links that point outside the copied
tree. Absolute symlinks are also treated like ordinary
files, and so are any symlinks in the source path itself
when <b>&minus;&minus;relative</b> is used.</p>

<p style="margin-left:18%; margin-top: 1em">Note that the
cut-off point is the top of the transfer, which is the part
of the path that rsync isn&rsquo;t mentioning in the verbose
output. If you copy &quot;/src/subdir&quot; to
&quot;/dest/&quot; then the &quot;subdir&quot; directory is
a name inside the transfer tree, not the top of the transfer
(which is /src) so it is legal for created relative symlinks
to refer to other names inside the /src and /dest
directories. If you instead copy &quot;/src/subdir/&quot;
(with a trailing slash) to &quot;/dest/subdir&quot; that
would not allow symlinks to any files outside of
&quot;subdir&quot;.</p>

<p style="margin-left:18%; margin-top: 1em">Note that safe
symlinks are only copied if <b>&minus;&minus;links</b> was
also specified or implied. The
<b>&minus;&minus;copy-unsafe-links</b> option has no extra
effect when combined with
<b>&minus;&minus;copy-links</b>.</p>

<p style="margin-left:18%; margin-top: 1em">See the
SYMBOLIC LINKS section for multi-option info.</p>


<p style="margin-left:9%;"><b>&minus;&minus;safe-links</b></p>

<p style="margin-left:18%;">This tells the receiving rsync
to ignore any symbolic links in the transfer which point
outside the copied tree. All absolute symlinks are also
ignored.</p>

<p style="margin-left:18%; margin-top: 1em">Since this
ignoring is happening on the receiving side, it will still
be effective even when the sending side has munged symlinks
(when it is using <b>&minus;&minus;munge-links</b>). It also
affects deletions, since the file being present in the
transfer prevents any matching file on the receiver from
being deleted when the symlink is deemed to be unsafe and is
skipped.</p>

<p style="margin-left:18%; margin-top: 1em">This option
must be combined with <b>&minus;&minus;links</b> (or
<b>&minus;&minus;archive</b>) to have any symlinks in the
transfer to conditionally ignore. Its effect is superseded
by <b>&minus;&minus;copy-unsafe-links</b>.</p>

<p style="margin-left:18%; margin-top: 1em">Using this
option in conjunction with <b>&minus;&minus;relative</b> may
give unexpected results.</p>

<p style="margin-left:18%; margin-top: 1em">See the
SYMBOLIC LINKS section for multi-option info.</p>


<p style="margin-left:9%;"><b>&minus;&minus;munge-links</b></p>

<p style="margin-left:18%;">This option affects just one
side of the transfer and tells rsync to munge symlink values
when it is receiving files or unmunge symlink values when it
is sending files. The munged values make the symlinks
unusable on disk but allows the original contents of the
symlinks to be recovered.</p>

<p style="margin-left:18%; margin-top: 1em">The server-side
rsync often enables this option without the client&rsquo;s
knowledge, such as in an rsync daemon&rsquo;s configuration
file or by an option given to the rrsync (restricted rsync)
script. When specified on the client side, specify the
option normally if it is the client side that has/needs the
munged symlinks, or use
<b>&minus;M&minus;&minus;munge-links</b> to give the option
to the server when it has/needs the munged symlinks. Note
that on a local transfer, the client is the sender, so
specifying the option directly unmunges symlinks while
specifying it as a remote option munges symlinks.</p>

<p style="margin-left:18%; margin-top: 1em">This option has
no effect when sent to a daemon via
<b>&minus;&minus;remote-option</b> because the daemon
configures whether it wants munged symlinks via its
&quot;<b>munge&nbsp;symlinks</b>&quot; parameter.</p>

<p style="margin-left:18%; margin-top: 1em">The symlink
value is munged/unmunged once it is in the transfer, so any
option that transforms symlinks into non-symlinks occurs
prior to the munging/unmunging <b>except</b> for
<b>&minus;&minus;safe-links</b>, which is a choice that the
receiver makes, so it bases its decision on the
munged/unmunged value. This does mean that if a receiver has
munging enabled, that using <b>&minus;&minus;safe-links</b>
will cause all symlinks to be ignored (since they are all
absolute).</p>

<p style="margin-left:18%; margin-top: 1em">The method that
rsync uses to munge the symlinks is to prefix each
one&rsquo;s value with the string
&quot;/rsyncd-munged/&quot;. This prevents the links from
being used as long as the directory does not exist. When
this option is enabled, rsync will refuse to run if that
path is a directory or a symlink to a directory (though it
only checks at startup). See also the
&quot;munge-symlinks&quot; python script in the support
directory of the source code for a way to munge/unmunge one
or more symlinks in-place.</p>


<p style="margin-left:9%;"><b>&minus;&minus;copy-dirlinks</b>,
<b>&minus;k</b></p>

<p style="margin-left:18%;">This option causes the sending
side to treat a symlink to a directory as though it were a
real directory. This is useful if you don&rsquo;t want
symlinks to non-directories to be affected, as they would be
using <b>&minus;&minus;copy-links</b>.</p>

<p style="margin-left:18%; margin-top: 1em">Without this
option, if the sending side has replaced a directory with a
symlink to a directory, the receiving side will delete
anything that is in the way of the new symlink, including a
directory hierarchy (as long as <b>&minus;&minus;force</b>
or <b>&minus;&minus;delete</b> is in effect).</p>

<p style="margin-left:18%; margin-top: 1em">See also
<b>&minus;&minus;keep-dirlinks</b> for an analogous option
for the receiving side.</p>


<p style="margin-left:18%; margin-top: 1em"><b>&minus;&minus;copy-dirlinks</b>
applies to all symlinks to directories in the source. If you
want to follow only a few specified symlinks, a trick you
can use is to pass them as additional source args with a
trailing slash, using <b>&minus;&minus;relative</b> to make
the paths match up right. For example:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -r
--relative src/./ src/./follow-me/ dest/</p>

<p style="margin-left:18%; margin-top: 1em">This works
because rsync calls <b>lstat</b>(2) on the source arg as
given, and the trailing slash makes <b>lstat</b>(2) follow
the symlink, giving rise to a directory in the file-list
which overrides the symlink found during the scan of
&quot;src/./&quot;.</p>

<p style="margin-left:18%; margin-top: 1em">See the
SYMBOLIC LINKS section for multi-option info.</p>


<p style="margin-left:9%;"><b>&minus;&minus;keep-dirlinks</b>,
<b>&minus;K</b></p>

<p style="margin-left:18%;">This option causes the
receiving side to treat a symlink to a directory as though
it were a real directory, but only if it matches a real
directory from the sender. Without this option, the
receiver&rsquo;s symlink would be deleted and replaced with
a real directory.</p>

<p style="margin-left:18%; margin-top: 1em">For example,
suppose you transfer a directory &quot;foo&quot; that
contains a file &quot;file&quot;, but &quot;foo&quot; is a
symlink to directory &quot;bar&quot; on the receiver.
Without <b>&minus;&minus;keep-dirlinks</b>, the receiver
deletes symlink &quot;foo&quot;, recreates it as a
directory, and receives the file into the new directory.
With <b>&minus;&minus;keep-dirlinks</b>, the receiver keeps
the symlink and &quot;file&quot; ends up in
&quot;bar&quot;.</p>

<p style="margin-left:18%; margin-top: 1em">One note of
caution: if you use <b>&minus;&minus;keep-dirlinks</b>, you
must trust all the symlinks in the copy or enable the
<b>&minus;&minus;munge-links</b> option on the receiving
side! If it is possible for an untrusted user to create
their own symlink to any real directory, the user could then
(on a subsequent copy) replace the symlink with a real
directory and affect the content of whatever directory the
symlink references. For backup copies, you are better off
using something like a bind mount instead of a symlink to
modify your receiving hierarchy.</p>

<p style="margin-left:18%; margin-top: 1em">See also
<b>&minus;&minus;copy-dirlinks</b> for an analogous option
for the sending side.</p>

<p style="margin-left:18%; margin-top: 1em">See the
SYMBOLIC LINKS section for multi-option info.</p>


<p style="margin-left:9%;"><b>&minus;&minus;hard-links</b>,
<b>&minus;H</b></p>

<p style="margin-left:18%;">This tells rsync to look for
hard-linked files in the source and link together the
corresponding files on the destination. Without this option,
hard-linked files in the source are treated as though they
were separate files.</p>

<p style="margin-left:18%; margin-top: 1em">This option
does NOT necessarily ensure that the pattern of hard links
on the destination exactly matches that on the source. Cases
in which the destination may end up with extra hard links
include the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>If the destination contains extraneous hard-links (more
linking than what is present in the source file list), the
copying algorithm will not break them explicitly. However,
if one or more of the paths have content differences, the
normal file-update process will break those extra links
(unless you are using the <b>&minus;&minus;inplace</b>
option).</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>If you specify a <b>&minus;&minus;link-dest</b>
directory that contains hard links, the linking of the
destination files against the <b>&minus;&minus;link-dest</b>
files can cause some paths in the destination to become
linked together due to the <b>&minus;&minus;link-dest</b>
associations.</p> </td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">Note that rsync
can only detect hard links between files that are inside the
transfer set. If rsync updates a file that has extra
hard-link connections to files outside the transfer, that
linkage will be broken. If you are tempted to use the
<b>&minus;&minus;inplace</b> option to avoid this breakage,
be very careful that you know how your files are being
updated so that you are certain that no unintended changes
happen due to lingering hard links (and see the
<b>&minus;&minus;inplace</b> option for more caveats).</p>

<p style="margin-left:18%; margin-top: 1em">If incremental
recursion is active (see
<b>&minus;&minus;inc-recursive</b>), rsync may transfer a
missing hard-linked file before it finds that another link
for that contents exists elsewhere in the hierarchy. This
does not affect the accuracy of the transfer (i.e. which
files are hard-linked together), just its efficiency (i.e.
copying the data for a new, early copy of a hard-linked file
that could have been found later in the transfer in another
member of the hard-linked set of files). One way to avoid
this inefficiency is to disable incremental recursion using
the <b>&minus;&minus;no-inc-recursive</b> option.</p>

<p style="margin-left:9%;"><b>&minus;&minus;perms</b>,
<b>&minus;p</b></p>

<p style="margin-left:18%;">This option causes the
receiving rsync to set the destination permissions to be the
same as the source permissions. (See also the
<b>&minus;&minus;chmod</b> option for a way to modify what
rsync considers to be the source permissions.)</p>

<p style="margin-left:18%; margin-top: 1em">When this
option is <i>off</i>, permissions are set as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>Existing files (including updated files) retain their
existing permissions, though the
<b>&minus;&minus;executability</b> option might change just
the execute permission for the file.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>New files get their &quot;normal&quot; permission bits
set to the source file&rsquo;s permissions masked with the
receiving directory&rsquo;s default permissions (either the
receiving process&rsquo;s umask, or the permissions
specified via the destination directory&rsquo;s default
ACL), and their special permission bits disabled except in
the case where a new directory inherits a setgid bit from
its parent directory.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">Thus, when
<b>&minus;&minus;perms</b> and
<b>&minus;&minus;executability</b> are both disabled,
rsync&rsquo;s behavior is the same as that of other
file-copy utilities, such as <b>cp</b>(1) and
<b>tar</b>(1).</p>

<p style="margin-left:18%; margin-top: 1em">In summary: to
give destination files (both old and new) the source
permissions, use <b>&minus;&minus;perms</b>. To give new
files the destination-default permissions (while leaving
existing files unchanged), make sure that the
<b>&minus;&minus;perms</b> option is off and use
<b>&minus;&minus;chmod=ugo=rwX</b> (which ensures that all
non-masked bits get enabled). If you&rsquo;d care to make
this latter behavior easier to type, you could define a popt
alias for it, such as putting this line in the file
<b>&#732;/.popt</b> (the following defines the
<b>&minus;Z</b> option, and includes
<b>&minus;&minus;no-g</b> to use the default group of the
destination dir):</p>

<p style="margin-left:23%; margin-top: 1em">rsync alias -Z
--no-p --no-g --chmod=ugo=rwX</p>

<p style="margin-left:18%; margin-top: 1em">You could then
use this new option in a command such as this one:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -avZ src/
dest/</p>

<p style="margin-left:18%; margin-top: 1em">(Caveat: make
sure that <b>&minus;a</b> does not follow <b>&minus;Z</b>,
or it will re-enable the two <b>&minus;&minus;no-*</b>
options mentioned above.)</p>

<p style="margin-left:18%; margin-top: 1em">The
preservation of the destination&rsquo;s setgid bit on
newly-created directories when <b>&minus;&minus;perms</b> is
off was added in rsync 2.6.7. Older rsync versions
erroneously preserved the three special permission bits for
newly-created files when <b>&minus;&minus;perms</b> was off,
while overriding the destination&rsquo;s setgid bit setting
on a newly-created directory. Default ACL observance was
added to the ACL patch for rsync 2.6.7, so older (or
non-ACL-enabled) rsyncs use the umask even if default ACLs
are present. (Keep in mind that it is the version of the
receiving rsync that affects these behaviors.)</p>


<p style="margin-left:9%;"><b>&minus;&minus;executability</b>,
<b>&minus;E</b></p>

<p style="margin-left:18%;">This option causes rsync to
preserve the executability (or non-executability) of regular
files when <b>&minus;&minus;perms</b> is not enabled. A
regular file is considered to be executable if at least one
&rsquo;x&rsquo; is turned on in its permissions. When an
existing destination file&rsquo;s executability differs from
that of the corresponding source file, rsync modifies the
destination file&rsquo;s permissions as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>To make a file non-executable, rsync turns off all its
&rsquo;x&rsquo; permissions.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>To make a file executable, rsync turns on each
&rsquo;x&rsquo; permission that has a corresponding
&rsquo;r&rsquo; permission enabled.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">If
<b>&minus;&minus;perms</b> is enabled, this option is
ignored.</p>

<p style="margin-left:9%;"><b>&minus;&minus;acls</b>,
<b>&minus;A</b></p>

<p style="margin-left:18%;">This option causes rsync to
update the destination ACLs to be the same as the source
ACLs. The option also implies
<b>&minus;&minus;perms</b>.</p>

<p style="margin-left:18%; margin-top: 1em">The source and
destination systems must have compatible ACL entries for
this option to work properly. See the
<b>&minus;&minus;fake-super</b> option for a way to backup
and restore ACLs that are not compatible.</p>

<p style="margin-left:9%;"><b>&minus;&minus;xattrs</b>,
<b>&minus;X</b></p>

<p style="margin-left:18%;">This option causes rsync to
update the destination extended attributes to be the same as
the source ones.</p>

<p style="margin-left:18%; margin-top: 1em">For systems
that support extended-attribute namespaces, a copy being
done by a super-user copies all namespaces except system.*.
A normal user only copies the user.* namespace. To be able
to backup and restore non-user namespaces as a normal user,
see the <b>&minus;&minus;fake-super</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">The above name
filtering can be overridden by using one or more filter
options with the <b>x</b> modifier. When you specify an
xattr-affecting filter rule, rsync requires that you do your
own system/user filtering, as well as any additional
filtering for what xattr names are copied and what names are
allowed to be deleted. For example, to skip the system
namespace, you could specify:</p>


<p style="margin-left:23%; margin-top: 1em">--filter=&rsquo;-x
system.*&rsquo;</p>

<p style="margin-left:18%; margin-top: 1em">To skip all
namespaces except the user namespace, you could specify a
negated-user match:</p>


<p style="margin-left:23%; margin-top: 1em">--filter=&rsquo;-x!
user.*&rsquo;</p>

<p style="margin-left:18%; margin-top: 1em">To prevent any
attributes from being deleted, you could specify a
receiver-only rule that excludes all names:</p>


<p style="margin-left:23%; margin-top: 1em">--filter=&rsquo;-xr
*&rsquo;</p>

<p style="margin-left:18%; margin-top: 1em">Note that the
<b>&minus;X</b> option does not copy rsync&rsquo;s special
xattr values (e.g. those used by
<b>&minus;&minus;fake-super</b>) unless you repeat the
option (e.g. <b>&minus;XX</b>). This &quot;copy all
xattrs&quot; mode cannot be used with
<b>&minus;&minus;fake-super</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;chmod=CHMOD</b></p>

<p style="margin-left:18%;">This option tells rsync to
apply one or more comma-separated &quot;chmod&quot; modes to
the permission of the files in the transfer. The resulting
value is treated as though it were the permissions that the
sending side supplied for the file, which means that this
option can seem to have no effect on existing files if
<b>&minus;&minus;perms</b> is not enabled.</p>

<p style="margin-left:18%; margin-top: 1em">In addition to
the normal parsing rules specified in the <b>chmod</b>(1)
manpage, you can specify an item that should only apply to a
directory by prefixing it with a &rsquo;D&rsquo;, or specify
an item that should only apply to a file by prefixing it
with a &rsquo;F&rsquo;. For example, the following will
ensure that all directories get marked set-gid, that no
files are other-writable, that both are user-writable and
group-writable, and that both have consistent executability
across all bits:</p>


<p style="margin-left:23%; margin-top: 1em">--chmod=Dg+s,ug+w,Fo-w,+X</p>

<p style="margin-left:18%; margin-top: 1em">Using octal
mode numbers is also allowed:</p>


<p style="margin-left:23%; margin-top: 1em">--chmod=D2775,F664</p>

<p style="margin-left:18%; margin-top: 1em">It is also
legal to specify multiple <b>&minus;&minus;chmod</b>
options, as each additional option is just appended to the
list of changes to make.</p>

<p style="margin-left:18%; margin-top: 1em">See the
<b>&minus;&minus;perms</b> and
<b>&minus;&minus;executability</b> options for how the
resulting permission value can be applied to the files in
the transfer.</p>

<p style="margin-left:9%;"><b>&minus;&minus;owner</b>,
<b>&minus;o</b></p>

<p style="margin-left:18%;">This option causes rsync to set
the owner of the destination file to be the same as the
source file, but only if the receiving rsync is being run as
the super-user (see also the <b>&minus;&minus;super</b> and
<b>&minus;&minus;fake-super</b> options). Without this
option, the owner of new and/or transferred files are set to
the invoking user on the receiving side.</p>

<p style="margin-left:18%; margin-top: 1em">The
preservation of ownership will associate matching names by
default, but may fall back to using the ID number in some
circumstances (see also the <b>&minus;&minus;numeric-ids</b>
option for a full discussion).</p>

<p style="margin-left:9%;"><b>&minus;&minus;group</b>,
<b>&minus;g</b></p>

<p style="margin-left:18%;">This option causes rsync to set
the group of the destination file to be the same as the
source file. If the receiving program is not running as the
super-user (or if <b>&minus;&minus;no-super</b> was
specified), only groups that the invoking user on the
receiving side is a member of will be preserved. Without
this option, the group is set to the default group of the
invoking user on the receiving side.</p>

<p style="margin-left:18%; margin-top: 1em">The
preservation of group information will associate matching
names by default, but may fall back to using the ID number
in some circumstances (see also the
<b>&minus;&minus;numeric-ids</b> option for a full
discussion).</p>


<p style="margin-left:9%;"><b>&minus;&minus;devices</b></p>

<p style="margin-left:18%;">This option causes rsync to
transfer character and block device files to the remote
system to recreate these devices. If the receiving rsync is
not being run as the super-user, rsync silently skips
creating the device files (see also the
<b>&minus;&minus;super</b> and
<b>&minus;&minus;fake-super</b> options).</p>

<p style="margin-left:18%; margin-top: 1em">By default,
rsync generates a &quot;non-regular file&quot; warning for
each device file encountered when this option is not set.
You can silence the warning by specifying
<b>&minus;&minus;info=nonreg0</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;specials</b></p>

<p style="margin-left:18%;">This option causes rsync to
transfer special files, such as named sockets and fifos. If
the receiving rsync is not being run as the super-user,
rsync silently skips creating the special files (see also
the <b>&minus;&minus;super</b> and
<b>&minus;&minus;fake-super</b> options).</p>

<p style="margin-left:18%; margin-top: 1em">By default,
rsync generates a &quot;non-regular file&quot; warning for
each special file encountered when this option is not set.
You can silence the warning by specifying
<b>&minus;&minus;info=nonreg0</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>&minus;D</b></p></td>
<td width="6%"></td>
<td width="69%">


<p>The <b>&minus;D</b> option is equivalent to
&quot;<b>&minus;&minus;devices
&minus;&minus;specials</b>&quot;.</p> </td>
<td width="13%">
</td></tr>
</table>


<p style="margin-left:9%;"><b>&minus;&minus;copy-devices</b></p>

<p style="margin-left:18%;">This tells rsync to treat a
device on the sending side as a regular file, allowing it to
be copied to a normal destination file (or another device if
<b>&minus;&minus;write-devices</b> was also specified).</p>

<p style="margin-left:18%; margin-top: 1em">This option is
refused by default by an rsync daemon.</p>


<p style="margin-left:9%;"><b>&minus;&minus;write-devices</b></p>

<p style="margin-left:18%;">This tells rsync to treat a
device on the receiving side as a regular file, allowing the
writing of file data into a device.</p>

<p style="margin-left:18%; margin-top: 1em">This option
implies the <b>&minus;&minus;inplace</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">Be careful
using this, as you should know what devices are present on
the receiving side of the transfer, especially when running
rsync as root.</p>

<p style="margin-left:18%; margin-top: 1em">This option is
refused by default by an rsync daemon.</p>

<p style="margin-left:9%;"><b>&minus;&minus;times</b>,
<b>&minus;t</b></p>

<p style="margin-left:18%;">This tells rsync to transfer
modification times along with the files and update them on
the remote system. Note that if this option is not used, the
optimization that excludes files that have not been modified
cannot be effective; in other words, a missing
<b>&minus;t</b> (or <b>&minus;a</b>) will cause the next
transfer to behave as if it used
<b>&minus;&minus;ignore-times</b> (<b>&minus;I</b>), causing
all files to be updated (though rsync&rsquo;s delta-transfer
algorithm will make the update fairly efficient if the files
haven&rsquo;t actually changed, you&rsquo;re much better off
using <b>&minus;t</b>).</p>

<p style="margin-left:18%; margin-top: 1em">A modern rsync
that is using transfer protocol 30 or 31 conveys a modify
time using up to 8-bytes. If rsync is forced to speak an
older protocol (perhaps due to the remote rsync being older
than 3.0.0) a modify time is conveyed using 4-bytes. Prior
to 3.2.7, these shorter values could convey a date range of
13-Dec-1901 to 19-Jan-2038. Beginning with 3.2.7, these
4-byte values now convey a date range of 1-Jan-1970 to
7-Feb-2106. If you have files dated older than 1970, make
sure your rsync executables are upgraded so that the full
range of dates can be conveyed.</p>

<p style="margin-left:9%;"><b>&minus;&minus;atimes</b>,
<b>&minus;U</b></p>

<p style="margin-left:18%;">This tells rsync to set the
access (use) times of the destination files to the same
value as the source files.</p>

<p style="margin-left:18%; margin-top: 1em">If repeated, it
also sets the <b>&minus;&minus;open-noatime</b> option,
which can help you to make the sending and receiving systems
have the same access times on the transferred files without
needing to run rsync an extra time after a file is
transferred.</p>

<p style="margin-left:18%; margin-top: 1em">Note that some
older rsync versions (prior to 3.2.0) may have been built
with a pre-release <b>&minus;&minus;atimes</b> patch that
does not imply <b>&minus;&minus;open-noatime</b> when this
option is repeated.</p>


<p style="margin-left:9%;"><b>&minus;&minus;open-noatime</b></p>

<p style="margin-left:18%;">This tells rsync to open files
with the O_NOATIME flag (on systems that support it) to
avoid changing the access time of the files that are being
transferred. If your OS does not support the O_NOATIME flag
then rsync will silently ignore this option. Note also that
some filesystems are mounted to avoid updating the atime on
read access even without the O_NOATIME flag being set.</p>

<p style="margin-left:9%;"><b>&minus;&minus;crtimes</b>,
<b>&minus;N,</b></p>

<p style="margin-left:18%;">This tells rsync to set the
create times (newness) of the destination files to the same
value as the source files. Your OS &amp; filesystem must
support the setting of arbitrary creation (birth) times for
this option to be supported.</p>


<p style="margin-left:9%;"><b>&minus;&minus;omit-dir-times</b>,
<b>&minus;O</b></p>

<p style="margin-left:18%;">This tells rsync to omit
directories when it is preserving modification, access, and
create times. If NFS is sharing the directories on the
receiving side, it is a good idea to use <b>&minus;O</b>.
This option is inferred if you use
<b>&minus;&minus;backup</b> without
<b>&minus;&minus;backup-dir</b>.</p>

<p style="margin-left:18%; margin-top: 1em">This option
also has the side-effect of avoiding early creation of
missing sub-directories when incremental recursion is
enabled, as discussed in the
<b>&minus;&minus;inc-recursive</b> section.</p>


<p style="margin-left:9%;"><b>&minus;&minus;omit-link-times</b>,
<b>&minus;J</b></p>

<p style="margin-left:18%;">This tells rsync to omit
symlinks when it is preserving modification, access, and
create times.</p>

<p style="margin-left:9%;"><b>&minus;&minus;super</b></p>

<p style="margin-left:18%;">This tells the receiving side
to attempt super-user activities even if the receiving rsync
wasn&rsquo;t run by the super-user. These activities
include: preserving users via the <b>&minus;&minus;owner</b>
option, preserving all groups (not just the current
user&rsquo;s groups) via the <b>&minus;&minus;group</b>
option, and copying devices via the
<b>&minus;&minus;devices</b> option. This is useful for
systems that allow such activities without being the
super-user, and also for ensuring that you will get errors
if the receiving side isn&rsquo;t being run as the
super-user. To turn off super-user activities, the
super-user can use <b>&minus;&minus;no-super</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;fake-super</b></p>

<p style="margin-left:18%;">When this option is enabled,
rsync simulates super-user activities by saving/restoring
the privileged attributes via special extended attributes
that are attached to each file (as needed). This includes
the file&rsquo;s owner and group (if it is not the default),
the file&rsquo;s device info (device &amp; special files are
created as empty text files), and any permission bits that
we won&rsquo;t allow to be set on the real file (e.g. the
real file gets u-s,g-s,o-t for safety) or that would limit
the owner&rsquo;s access (since the real super-user can
always access/change a file, the files we create can always
be accessed/changed by the creating user). This option also
handles ACLs (if <b>&minus;&minus;acls</b> was specified)
and non-user extended attributes (if
<b>&minus;&minus;xattrs</b> was specified).</p>

<p style="margin-left:18%; margin-top: 1em">This is a good
way to backup data without using a super-user, and to store
ACLs from incompatible systems.</p>

<p style="margin-left:18%; margin-top: 1em">The
<b>&minus;&minus;fake-super</b> option only affects the side
where the option is used. To affect the remote side of a
remote-shell connection, use the
<b>&minus;&minus;remote-option</b> (<b>&minus;M</b>)
option:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -av
-M--fake-super /src/ host:/dest/</p>

<p style="margin-left:18%; margin-top: 1em">For a local
copy, this option affects both the source and the
destination. If you wish a local copy to enable this option
just for the destination files, specify
<b>&minus;M&minus;&minus;fake-super</b>. If you wish a local
copy to enable this option just for the source files,
combine <b>&minus;&minus;fake-super</b> with
<b>&minus;M&minus;&minus;super</b>.</p>

<p style="margin-left:18%; margin-top: 1em">This option is
overridden by both <b>&minus;&minus;super</b> and
<b>&minus;&minus;no-super</b>.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
<b>fake&nbsp;super</b> setting in the daemon&rsquo;s
rsyncd.conf file.</p>

<p style="margin-left:9%;"><b>&minus;&minus;sparse</b>,
<b>&minus;S</b></p>

<p style="margin-left:18%;">Try to handle sparse files
efficiently so they take up less space on the destination.
If combined with <b>&minus;&minus;inplace</b> the file
created might not end up with sparse blocks with some
combinations of kernel version and/or filesystem type. If
<b>&minus;&minus;whole-file</b> is in effect (e.g. for a
local copy) then it will always work because rsync truncates
the file prior to writing out the updated version.</p>

<p style="margin-left:18%; margin-top: 1em">Note that
versions of rsync older than 3.1.3 will reject the
combination of <b>&minus;&minus;sparse</b> and
<b>&minus;&minus;inplace</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;preallocate</b></p>

<p style="margin-left:18%;">This tells the receiver to
allocate each destination file to its eventual size before
writing data to the file. Rsync will only use the real
filesystem-level preallocation support provided by
Linux&rsquo;s <b>fallocate</b>(2) system call or
Cygwin&rsquo;s <b>posix_fallocate</b>(3), not the slow glibc
implementation that writes a null byte into each block.</p>

<p style="margin-left:18%; margin-top: 1em">Without this
option, larger files may not be entirely contiguous on the
filesystem, but with this option rsync will probably copy
more slowly. If the destination is not an extent-supporting
filesystem (such as ext4, xfs, NTFS, etc.), this option may
have no positive effect at all.</p>

<p style="margin-left:18%; margin-top: 1em">If combined
with <b>&minus;&minus;sparse</b>, the file will only have
sparse blocks (as opposed to allocated sequences of null
bytes) if the kernel version and filesystem type support
creating holes in the allocated data.</p>

<p style="margin-left:9%;"><b>&minus;&minus;dry-run</b>,
<b>&minus;n</b></p>

<p style="margin-left:18%;">This makes rsync perform a
trial run that doesn&rsquo;t make any changes (and produces
mostly the same output as a real run). It is most commonly
used in combination with the <b>&minus;&minus;verbose</b>
(<b>&minus;v</b>) and/or
<b>&minus;&minus;itemize-changes</b> (<b>&minus;i</b>)
options to see what an rsync command is going to do before
one actually runs it.</p>

<p style="margin-left:18%; margin-top: 1em">The output of
<b>&minus;&minus;itemize-changes</b> is supposed to be
exactly the same on a dry run and a subsequent real run
(barring intentional trickery and system call failures); if
it isn&rsquo;t, that&rsquo;s a bug. Other output should be
mostly unchanged, but may differ in some areas. Notably, a
dry run does not send the actual data for file transfers, so
<b>&minus;&minus;progress</b> has no effect, the &quot;bytes
sent&quot;, &quot;bytes received&quot;, &quot;literal
data&quot;, and &quot;matched data&quot; statistics are too
small, and the &quot;speedup&quot; value is equivalent to a
run where no file transfers were needed.</p>


<p style="margin-left:9%;"><b>&minus;&minus;whole-file</b>,
<b>&minus;W</b></p>

<p style="margin-left:18%;">This option disables
rsync&rsquo;s delta-transfer algorithm, which causes all
transferred files to be sent whole. The transfer may be
faster if this option is used when the bandwidth between the
source and destination machines is higher than the bandwidth
to disk (especially when the &quot;disk&quot; is actually a
networked filesystem). This is the default when both the
source and destination are specified as local paths, but
only if no batch-writing option is in effect.</p>


<p style="margin-left:9%;"><b>&minus;&minus;no-whole-file</b>,
<b>&minus;&minus;no-W</b></p>

<p style="margin-left:18%;">Disable whole-file updating
when it is enabled by default for a local transfer. This
usually slows rsync down, but it can be useful if you are
trying to minimize the writes to the destination file (if
combined with <b>&minus;&minus;inplace</b>) or for testing
the checksum-based update algorithm.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
<b>&minus;&minus;whole-file</b> option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;checksum-choice=STR</b>,
<b>&minus;&minus;cc=STR</b></p>

<p style="margin-left:18%;">This option overrides the
checksum algorithms. If one algorithm name is specified, it
is used for both the transfer checksums and (assuming
<b>&minus;&minus;checksum</b> is specified) the pre-transfer
checksums. If two comma-separated names are supplied, the
first name affects the transfer checksums, and the second
name affects the pre-transfer checksums
(<b>&minus;c</b>).</p>

<p style="margin-left:18%; margin-top: 1em">The checksum
options that you may be able to use are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="45%">


<p><b>auto</b> (the default automatic choice)</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="45%">


<p><b>xxh128</b></p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="45%">


<p><b>xxh3</b></p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="45%">


<p><b>xxh64</b> (aka <b>xxhash</b>)</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="45%">


<p><b>md5</b></p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="45%">


<p><b>md4</b></p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="45%">


<p><b>sha1</b></p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="45%">


<p><b>none</b></p></td>
<td width="28%">
</td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">Run
<b>rsync&nbsp;&minus;&minus;version</b> to see the default
checksum list compiled into your version (which may differ
from the list above).</p>

<p style="margin-left:18%; margin-top: 1em">If
&quot;none&quot; is specified for the first (or only) name,
the <b>&minus;&minus;whole-file</b> option is forced on and
no checksum verification is performed on the transferred
data. If &quot;none&quot; is specified for the second (or
only) name, the <b>&minus;&minus;checksum</b> option cannot
be used.</p>

<p style="margin-left:18%; margin-top: 1em">The
&quot;auto&quot; option is the default, where rsync bases
its algorithm choice on a negotiation between the client and
the server as follows:</p>

<p style="margin-left:18%; margin-top: 1em">When both sides
of the transfer are at least 3.2.0, rsync chooses the first
algorithm in the client&rsquo;s list of choices that is also
in the server&rsquo;s list of choices. If no common checksum
choice is found, rsync exits with an error. If the remote
rsync is too old to support checksum negotiation, a value is
chosen based on the protocol version (which chooses between
MD5 and various flavors of MD4 based on protocol age).</p>

<p style="margin-left:18%; margin-top: 1em">The default
order can be customized by setting the environment variable
<b>RSYNC_CHECKSUM_LIST</b> to a space-separated list of
acceptable checksum names. If the string contains a
&quot;<b>&amp;</b>&quot; character, it is separated into the
&quot;client string &amp; server string&quot;, otherwise the
same string applies to both. If the string (or string
portion) contains no non-whitespace characters, the default
checksum list is used. This method does not allow you to
specify the transfer checksum separately from the
pre-transfer checksum, and it discards &quot;auto&quot; and
all unknown checksum names. A list with only invalid names
results in a failed negotiation.</p>

<p style="margin-left:18%; margin-top: 1em">The use of the
<b>&minus;&minus;checksum-choice</b> option overrides this
environment list.</p>


<p style="margin-left:9%;"><b>&minus;&minus;one-file-system</b>,
<b>&minus;x</b></p>

<p style="margin-left:18%;">This tells rsync to avoid
crossing a filesystem boundary when recursing. This does not
limit the user&rsquo;s ability to specify items to copy from
multiple filesystems, just rsync&rsquo;s recursion through
the hierarchy of each directory that the user specified, and
also the analogous recursion on the receiving side during
deletion. Also keep in mind that rsync treats a
&quot;bind&quot; mount to the same device as being on the
same filesystem.</p>

<p style="margin-left:18%; margin-top: 1em">If this option
is repeated, rsync omits all mount-point directories from
the copy. Otherwise, it includes an empty directory at each
mount-point it encounters (using the attributes of the
mounted directory because those of the underlying
mount-point directory are inaccessible).</p>

<p style="margin-left:18%; margin-top: 1em">If rsync has
been told to collapse symlinks (via
<b>&minus;&minus;copy-links</b> or
<b>&minus;&minus;copy-unsafe-links</b>), a symlink to a
directory on another device is treated like a mount-point.
Symlinks to non-directories are unaffected by this
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;ignore-non-existing</b>,
<b>&minus;&minus;existing</b></p>

<p style="margin-left:18%;">This tells rsync to skip
creating files (including directories) that do not exist yet
on the destination. If this option is combined with the
<b>&minus;&minus;ignore-existing</b> option, no files will
be updated (which can be useful if all you want to do is
delete extraneous files).</p>

<p style="margin-left:18%; margin-top: 1em">This option is
a TRANSFER RULE, so don&rsquo;t expect any exclude side
effects.</p>


<p style="margin-left:9%;"><b>&minus;&minus;ignore-existing</b></p>

<p style="margin-left:18%;">This tells rsync to skip
updating files that already exist on the destination (this
does <i>not</i> ignore existing directories, or nothing
would get done). See also
<b>&minus;&minus;ignore-non-existing</b>.</p>

<p style="margin-left:18%; margin-top: 1em">This option is
a TRANSFER RULE, so don&rsquo;t expect any exclude side
effects.</p>

<p style="margin-left:18%; margin-top: 1em">This option can
be useful for those doing backups using the
<b>&minus;&minus;link-dest</b> option when they need to
continue a backup run that got interrupted. Since a
<b>&minus;&minus;link-dest</b> run is copied into a new
directory hierarchy (when it is used properly), using
[<b>&minus;&minus;ignore-existing</b> will ensure that the
already-handled files don&rsquo;t get tweaked (which avoids
a change in permissions on the hard-linked files). This does
mean that this option is only looking at the existing files
in the destination hierarchy itself.</p>

<p style="margin-left:18%; margin-top: 1em">When
<b>&minus;&minus;info=skip2</b> is used rsync will output
&quot;FILENAME exists (INFO)&quot; messages where the INFO
indicates one of &quot;type change&quot;, &quot;sum
change&quot; (requires <b>&minus;c</b>), &quot;file
change&quot; (based on the quick check), &quot;attr
change&quot;, or &quot;uptodate&quot;. Using
<b>&minus;&minus;info=skip1</b> (which is also implied by 2
<b>&minus;v</b> options) outputs the exists message without
the INFO suffix.</p>


<p style="margin-left:9%;"><b>&minus;&minus;remove-source-files</b></p>

<p style="margin-left:18%;">This tells rsync to remove from
the sending side the files (meaning non-directories) that
are a part of the transfer and have been successfully
duplicated on the receiving side.</p>

<p style="margin-left:18%; margin-top: 1em">Note that you
should only use this option on source files that are
quiescent. If you are using this to move files that show up
in a particular directory over to another host, make sure
that the finished files get renamed into the source
directory, not directly written into it, so that rsync
can&rsquo;t possibly transfer a file that is not yet fully
written. If you can&rsquo;t first write the files into a
different directory, you should use a naming idiom that lets
rsync avoid transferring files that are not yet finished
(e.g. name the file &quot;foo.new&quot; when it is written,
rename it to &quot;foo&quot; when it is done, and then use
the option <b>&minus;&minus;exclude=&rsquo;*.new&rsquo;</b>
for the rsync transfer).</p>

<p style="margin-left:18%; margin-top: 1em">Starting with
3.1.0, rsync will skip the sender-side removal (and output
an error) if the file&rsquo;s size or modify time has not
stayed unchanged.</p>

<p style="margin-left:18%; margin-top: 1em">Starting with
3.2.6, a local rsync copy will ensure that the sender does
not remove a file the receiver just verified, such as when
the user accidentally makes the source and destination
directory the same path.</p>

<p style="margin-left:9%;"><b>&minus;&minus;delete</b></p>

<p style="margin-left:18%;">This tells rsync to delete
extraneous files from the receiving side (ones that
aren&rsquo;t on the sending side), but only for the
directories that are being synchronized. You must have asked
rsync to send the whole directory (e.g.
&quot;<b>dir</b>&quot; or &quot;<b>dir/</b>&quot;) without
using a wildcard for the directory&rsquo;s contents (e.g.
&quot;<b>dir/*</b>&quot;) since the wildcard is expanded by
the shell and rsync thus gets a request to transfer
individual files, not the files&rsquo; parent directory.
Files that are excluded from the transfer are also excluded
from being deleted unless you use the
<b>&minus;&minus;delete-excluded</b> option or mark the
rules as only matching on the sending side (see the
include/exclude modifiers in the FILTER RULES section).</p>

<p style="margin-left:18%; margin-top: 1em">Prior to rsync
2.6.7, this option would have no effect unless
<b>&minus;&minus;recursive</b> was enabled. Beginning with
2.6.7, deletions will also occur when
<b>&minus;&minus;dirs</b> (<b>&minus;d</b>) is enabled, but
only for directories whose contents are being copied.</p>

<p style="margin-left:18%; margin-top: 1em">This option can
be dangerous if used incorrectly! It is a very good idea to
first try a run using the <b>&minus;&minus;dry-run</b>
(<b>&minus;n</b>) option to see what files are going to be
deleted.</p>

<p style="margin-left:18%; margin-top: 1em">If the sending
side detects any I/O errors, then the deletion of any files
at the destination will be automatically disabled. This is
to prevent temporary filesystem failures (such as NFS
errors) on the sending side from causing a massive deletion
of files on the destination. You can override this with the
<b>&minus;&minus;ignore-errors</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">The
<b>&minus;&minus;delete</b> option may be combined with one
of the &minus;&minus;delete-WHEN options without conflict,
as well as <b>&minus;&minus;delete-excluded</b>. However, if
none of the <b>&minus;&minus;delete-WHEN</b> options are
specified, rsync will choose the
<b>&minus;&minus;delete-during</b> algorithm when talking to
rsync 3.0.0 or newer, or the
<b>&minus;&minus;delete-before</b> algorithm when talking to
an older rsync. See also <b>&minus;&minus;delete-delay</b>
and <b>&minus;&minus;delete-after</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;delete-before</b></p>

<p style="margin-left:18%;">Request that the file-deletions
on the receiving side be done before the transfer starts.
See <b>&minus;&minus;delete</b> (which is implied) for more
details on file-deletion.</p>

<p style="margin-left:18%; margin-top: 1em">Deleting before
the transfer is helpful if the filesystem is tight for space
and removing extraneous files would help to make the
transfer possible. However, it does introduce a delay before
the start of the transfer, and this delay might cause the
transfer to timeout (if <b>&minus;&minus;timeout</b> was
specified). It also forces rsync to use the old,
non-incremental recursion algorithm that requires rsync to
scan all the files in the transfer into memory at once (see
<b>&minus;&minus;recursive</b>).</p>


<p style="margin-left:9%;"><b>&minus;&minus;delete-during</b>,
<b>&minus;&minus;del</b></p>

<p style="margin-left:18%;">Request that the file-deletions
on the receiving side be done incrementally as the transfer
happens. The per-directory delete scan is done right before
each directory is checked for updates, so it behaves like a
more efficient <b>&minus;&minus;delete-before</b>, including
doing the deletions prior to any per-directory filter files
being updated. This option was first added in rsync version
2.6.4. See <b>&minus;&minus;delete</b> (which is implied)
for more details on file-deletion.</p>


<p style="margin-left:9%;"><b>&minus;&minus;delete-delay</b></p>

<p style="margin-left:18%;">Request that the file-deletions
on the receiving side be computed during the transfer (like
<b>&minus;&minus;delete-during</b>), and then removed after
the transfer completes. This is useful when combined with
<b>&minus;&minus;delay-updates</b> and/or
<b>&minus;&minus;fuzzy</b>, and is more efficient than using
<b>&minus;&minus;delete-after</b> (but can behave
differently, since <b>&minus;&minus;delete-after</b>
computes the deletions in a separate pass after all updates
are done). If the number of removed files overflows an
internal buffer, a temporary file will be created on the
receiving side to hold the names (it is removed while open,
so you shouldn&rsquo;t see it during the transfer). If the
creation of the temporary file fails, rsync will try to fall
back to using <b>&minus;&minus;delete-after</b> (which it
cannot do if <b>&minus;&minus;recursive</b> is doing an
incremental scan). See <b>&minus;&minus;delete</b> (which is
implied) for more details on file-deletion.</p>


<p style="margin-left:9%;"><b>&minus;&minus;delete-after</b></p>

<p style="margin-left:18%;">Request that the file-deletions
on the receiving side be done after the transfer has
completed. This is useful if you are sending new
per-directory merge files as a part of the transfer and you
want their exclusions to take effect for the delete phase of
the current transfer. It also forces rsync to use the old,
non-incremental recursion algorithm that requires rsync to
scan all the files in the transfer into memory at once (see
<b>&minus;&minus;recursive</b>). See
<b>&minus;&minus;delete</b> (which is implied) for more
details on file-deletion.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
<b>&minus;&minus;delete-delay</b> option that might be a
faster choice for those that just want the deletions to
occur at the end of the transfer.</p>


<p style="margin-left:9%;"><b>&minus;&minus;delete-excluded</b></p>

<p style="margin-left:18%;">This option turns any
unqualified exclude/include rules into server-side rules
that do not affect the receiver&rsquo;s deletions.</p>

<p style="margin-left:18%; margin-top: 1em">By default, an
exclude or include has both a server-side effect (to
&quot;hide&quot; and &quot;show&quot; files when building
the server&rsquo;s file list) and a receiver-side effect (to
&quot;protect&quot; and &quot;risk&quot; files when
deletions are occurring). Any rule that has no modifier to
specify what sides it is executed on will be instead treated
as if it were a server-side rule only, avoiding any
&quot;protect&quot; effects of the rules.</p>

<p style="margin-left:18%; margin-top: 1em">A rule can
still apply to both sides even with this option specified if
the rule is given both the sender &amp; receiver modifier
letters (e.g.,
<b>&minus;f&rsquo;&minus;sr&nbsp;foo&rsquo;</b>).
Receiver-side protect/risk rules can also be explicitly
specified to limit the deletions. This saves you from having
to edit a bunch of
<b>&minus;f&rsquo;&minus;&nbsp;foo&rsquo;</b> rules into
<b>&minus;f&rsquo;&minus;s&nbsp;foo&rsquo;</b> (aka
<b>&minus;f&rsquo;H&nbsp;foo&rsquo;</b>) rules (not to
mention the corresponding includes).</p>

<p style="margin-left:18%; margin-top: 1em">See the FILTER
RULES section for more information. See
<b>&minus;&minus;delete</b> (which is implied) for more
details on deletion.</p>


<p style="margin-left:9%;"><b>&minus;&minus;ignore-missing-args</b></p>

<p style="margin-left:18%;">When rsync is first processing
the explicitly requested source files (e.g. command-line
arguments or <b>&minus;&minus;files-from</b> entries), it is
normally an error if the file cannot be found. This option
suppresses that error, and does not try to transfer the
file. This does not affect subsequent vanished-file errors
if a file was initially found to be present and later is no
longer there.</p>


<p style="margin-left:9%;"><b>&minus;&minus;delete-missing-args</b></p>

<p style="margin-left:18%;">This option takes the behavior
of the (implied) <b>&minus;&minus;ignore-missing-args</b>
option a step farther: each missing arg will become a
deletion request of the corresponding destination file on
the receiving side (should it exist). If the destination
file is a non-empty directory, it will only be successfully
deleted if <b>&minus;&minus;force</b> or
<b>&minus;&minus;delete</b> are in effect. Other than that,
this option is independent of any other type of delete
processing.</p>

<p style="margin-left:18%; margin-top: 1em">The missing
source files are represented by special file-list entries
which display as a &quot;<b>*missing</b>&quot; entry in the
<b>&minus;&minus;list-only</b> output.</p>


<p style="margin-left:9%;"><b>&minus;&minus;ignore-errors</b></p>

<p style="margin-left:18%;">Tells
<b>&minus;&minus;delete</b> to go ahead and delete files
even when there are I/O errors.</p>

<p style="margin-left:9%;"><b>&minus;&minus;force</b></p>

<p style="margin-left:18%;">This option tells rsync to
delete a non-empty directory when it is to be replaced by a
non-directory. This is only relevant if deletions are not
active (see <b>&minus;&minus;delete</b> for details).</p>

<p style="margin-left:18%; margin-top: 1em">Note for older
rsync versions: <b>&minus;&minus;force</b> used to still be
required when using <b>&minus;&minus;delete-after</b>, and
it used to be non-functional unless the
<b>&minus;&minus;recursive</b> option was also enabled.</p>


<p style="margin-left:9%;"><b>&minus;&minus;max-delete=NUM</b></p>

<p style="margin-left:18%;">This tells rsync not to delete
more than NUM files or directories. If that limit is
exceeded, all further deletions are skipped through the end
of the transfer. At the end, rsync outputs a warning
(including a count of the skipped deletions) and exits with
an error code of 25 (unless some more important error
condition also occurred).</p>

<p style="margin-left:18%; margin-top: 1em">Beginning with
version 3.0.0, you may specify
<b>&minus;&minus;max-delete=0</b> to be warned about any
extraneous files in the destination without removing any of
them. Older clients interpreted this as
&quot;unlimited&quot;, so if you don&rsquo;t know what
version the client is, you can use the less obvious
<b>&minus;&minus;max-delete=&minus;1</b> as a
backward-compatible way to specify that no deletions be
allowed (though really old versions didn&rsquo;t warn when
the limit was exceeded).</p>


<p style="margin-left:9%;"><b>&minus;&minus;max-size=SIZE</b></p>

<p style="margin-left:18%;">This tells rsync to avoid
transferring any file that is larger than the specified
SIZE. A numeric value can be suffixed with a string to
indicate the numeric units or left unqualified to specify
bytes. Feel free to use a fractional value along with the
units, such as <b>&minus;&minus;max-size=1.5m</b>.</p>

<p style="margin-left:18%; margin-top: 1em">This option is
a TRANSFER RULE, so don&rsquo;t expect any exclude side
effects.</p>

<p style="margin-left:18%; margin-top: 1em">The first
letter of a units string can be <b>B</b> (bytes), <b>K</b>
(kilo), <b>M</b> (mega), <b>G</b> (giga), <b>T</b> (tera),
or <b>P</b> (peta). If the string is a single char or has
&quot;ib&quot; added to it (e.g. &quot;G&quot; or
&quot;GiB&quot;) then the units are multiples of 1024. If
you use a two-letter suffix that ends with a &quot;B&quot;
(e.g. &quot;kb&quot;) then you get units that are multiples
of 1000. The string&rsquo;s letters can be any mix of upper
and lower-case that you want to use.</p>

<p style="margin-left:18%; margin-top: 1em">Finally, if the
string ends with either &quot;+1&quot; or
&quot;&minus;1&quot;, it is offset by one byte in the
indicated direction. The largest possible value is usually
<b>8192P-1</b>.</p>

<p style="margin-left:18%; margin-top: 1em">Examples:
<b>&minus;&minus;max-size=1.5mb-1</b> is 1499999 bytes, and
<b>&minus;&minus;max-size=2g+1</b> is 2147483649 bytes.</p>

<p style="margin-left:18%; margin-top: 1em">Note that rsync
versions prior to 3.1.0 did not allow
<b>&minus;&minus;max-size=0</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;min-size=SIZE</b></p>

<p style="margin-left:18%;">This tells rsync to avoid
transferring any file that is smaller than the specified
SIZE, which can help in not transferring small, junk files.
See the <b>&minus;&minus;max-size</b> option for a
description of SIZE and other info.</p>

<p style="margin-left:18%; margin-top: 1em">Note that rsync
versions prior to 3.1.0 did not allow
<b>&minus;&minus;min-size=0</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;max-alloc=SIZE</b></p>

<p style="margin-left:18%;">By default rsync limits an
individual malloc/realloc to about 1GB in size. For most
people this limit works just fine and prevents a protocol
error causing rsync to request massive amounts of memory.
However, if you have many millions of files in a transfer, a
large amount of server memory, and you don&rsquo;t want to
split up your transfer into multiple parts, you can increase
the per-allocation limit to something larger and rsync will
consume more memory.</p>

<p style="margin-left:18%; margin-top: 1em">Keep in mind
that this is not a limit on the total size of allocated
memory. It is a sanity-check value for each individual
allocation.</p>

<p style="margin-left:18%; margin-top: 1em">See the
<b>&minus;&minus;max-size</b> option for a description of
how SIZE can be specified. The default suffix if none is
given is bytes.</p>

<p style="margin-left:18%; margin-top: 1em">Beginning in
3.2.7, a value of 0 is an easy way to specify SIZE_MAX (the
largest limit possible).</p>

<p style="margin-left:18%; margin-top: 1em">You can set a
default value using the environment variable
<b>RSYNC_MAX_ALLOC</b> using the same SIZE values as
supported by this option. If the remote rsync doesn&rsquo;t
understand the <b>&minus;&minus;max-alloc</b> option, you
can override an environmental value by specifying
<b>&minus;&minus;max-alloc=1g</b>, which will make rsync
avoid sending the option to the remote side (because
&quot;1G&quot; is the default).</p>


<p style="margin-left:9%;"><b>&minus;&minus;block-size=SIZE</b>,
<b>&minus;B</b></p>

<p style="margin-left:18%;">This forces the block size used
in rsync&rsquo;s delta-transfer algorithm to a fixed value.
It is normally selected based on the size of each file being
updated. See the technical report for details.</p>

<p style="margin-left:18%; margin-top: 1em">Beginning in
3.2.3 the SIZE can be specified with a suffix as detailed in
the <b>&minus;&minus;max-size</b> option. Older versions
only accepted a byte count.</p>


<p style="margin-left:9%;"><b>&minus;&minus;rsh=COMMAND</b>,
<b>&minus;e</b></p>

<p style="margin-left:18%;">This option allows you to
choose an alternative remote shell program to use for
communication between the local and remote copies of rsync.
Typically, rsync is configured to use ssh by default, but
you may prefer to use rsh on a local network.</p>

<p style="margin-left:18%; margin-top: 1em">If this option
is used with <b>[user@]host::module/path</b>, then the
remote shell <i>COMMAND</i> will be used to run an rsync
daemon on the remote host, and all data will be transmitted
through that remote shell connection, rather than through a
direct socket connection to a running rsync daemon on the
remote host. See the USING RSYNC-DAEMON FEATURES VIA A
REMOTE-SHELL CONNECTION section above.</p>

<p style="margin-left:18%; margin-top: 1em">Beginning with
rsync 3.2.0, the <b>RSYNC_PORT</b> environment variable will
be set when a daemon connection is being made via a
remote-shell connection. It is set to 0 if the default
daemon port is being assumed, or it is set to the value of
the rsync port that was specified via either the
<b>&minus;&minus;port</b> option or a non-empty port value
in an <b>rsync://</b> URL. This allows the script to discern
if a non-default port is being requested, allowing for
things such as an SSL or stunnel helper script to connect to
a default or alternate port.</p>

<p style="margin-left:18%; margin-top: 1em">Command-line
arguments are permitted in COMMAND provided that COMMAND is
presented to rsync as a single argument. You must use spaces
(not tabs or other whitespace) to separate the command and
args from each other, and you can use single- and/or
double-quotes to preserve spaces in an argument (but not
backslashes). Note that doubling a single-quote inside a
single-quoted string gives you a single-quote; likewise for
double-quotes (though you need to pay attention to which
quotes your shell is parsing and which quotes rsync is
parsing). Some examples:</p>

<p style="margin-left:23%; margin-top: 1em">-e &rsquo;ssh
-p 2234&rsquo; <br>
-e &rsquo;ssh -o &quot;ProxyCommand nohup ssh firewall nc
-w1 %h %p&quot;&rsquo;</p>

<p style="margin-left:18%; margin-top: 1em">(Note that ssh
users can alternately customize site-specific connect
options in their .ssh/config file.)</p>

<p style="margin-left:18%; margin-top: 1em">You can also
choose the remote shell program using the <b>RSYNC_RSH</b>
environment variable, which accepts the same range of values
as <b>&minus;e</b>.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
<b>&minus;&minus;blocking-io</b> option which is affected by
this option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;rsync-path=PROGRAM</b></p>

<p style="margin-left:18%;">Use this to specify what
program is to be run on the remote machine to start-up
rsync. Often used when rsync is not in the default
remote-shell&rsquo;s path (e.g.
<b>&minus;&minus;rsync-path=/usr/local/bin/rsync</b>). Note
that PROGRAM is run with the help of a shell, so it can be
any program, script, or command sequence you&rsquo;d care to
run, so long as it does not corrupt the standard-in &amp;
standard-out that rsync is using to communicate.</p>

<p style="margin-left:18%; margin-top: 1em">One tricky
example is to set a different default directory on the
remote machine for use with the
<b>&minus;&minus;relative</b> option. For instance:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -avR
--rsync-path=&quot;cd /a/b &amp;&amp; rsync&quot; host:c/d
/e/</p>


<p style="margin-left:9%;"><b>&minus;&minus;remote-option=OPTION</b>,
<b>&minus;M</b></p>

<p style="margin-left:18%;">This option is used for more
advanced situations where you want certain effects to be
limited to one side of the transfer only. For instance, if
you want to pass <b>&minus;&minus;log-file=FILE</b> and
<b>&minus;&minus;fake-super</b> to the remote system,
specify it like this:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -av -M
--log-file=foo -M--fake-super src/ dest/</p>

<p style="margin-left:18%; margin-top: 1em">If you want to
have an option affect only the local side of a transfer when
it normally affects both sides, send its negation to the
remote side. Like this:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -av -x
-M--no-x src/ dest/</p>

<p style="margin-left:18%; margin-top: 1em">Be cautious
using this, as it is possible to toggle an option that will
cause rsync to have a different idea about what data to
expect next over the socket, and that will make it fail in a
cryptic fashion.</p>

<p style="margin-left:18%; margin-top: 1em">Note that you
should use a separate <b>&minus;M</b> option for each remote
option you want to pass. On older rsync versions, the
presence of any spaces in the remote-option arg could cause
it to be split into separate remote args, but this requires
the use of <b>&minus;&minus;old-args</b> in a modern
rsync.</p>

<p style="margin-left:18%; margin-top: 1em">When performing
a local transfer, the &quot;local&quot; side is the sender
and the &quot;remote&quot; side is the receiver.</p>

<p style="margin-left:18%; margin-top: 1em">Note some
versions of the popt option-parsing library have a bug in
them that prevents you from using an adjacent arg with an
equal in it next to a short option letter (e.g.
<b>&minus;M&minus;&minus;log-file=/tmp/foo</b>). If this bug
affects your version of popt, you can use the version of
popt that is included with rsync.</p>


<p style="margin-left:9%;"><b>&minus;&minus;cvs-exclude</b>,
<b>&minus;C</b></p>

<p style="margin-left:18%;">This is a useful shorthand for
excluding a broad range of files that you often don&rsquo;t
want to transfer between systems. It uses a similar
algorithm to CVS to determine if a file should be
ignored.</p>

<p style="margin-left:18%; margin-top: 1em">The exclude
list is initialized to exclude the following items (these
initial items are marked as perishable&nbsp;&minus;&minus;
see the FILTER RULES section):</p>

<p style="margin-left:23%; margin-top: 1em"><b>RCS SCCS CVS
CVS.adm RCSLOG cvslog.* tags TAGS .make.state .nse_depinfo
*&#732; #* .#* ,* _$* *$ *.old *.bak *.BAK *.orig *.rej
.del-* *.a *.olb *.o *.obj *.so *.exe *.Z *.elc *.ln core
.svn/ .git/ .hg/ .bzr/</b></p>

<p style="margin-left:18%; margin-top: 1em">then, files
listed in a $HOME/.cvsignore are added to the list and any
files listed in the CVSIGNORE environment variable (all
cvsignore names are delimited by whitespace).</p>

<p style="margin-left:18%; margin-top: 1em">Finally, any
file is ignored if it is in the same directory as a
.cvsignore file and matches one of the patterns listed
therein. Unlike rsync&rsquo;s filter/exclude files, these
patterns are split on whitespace. See the <b>cvs</b>(1)
manual for more information.</p>

<p style="margin-left:18%; margin-top: 1em">If you&rsquo;re
combining <b>&minus;C</b> with your own
<b>&minus;&minus;filter</b> rules, you should note that
these CVS excludes are appended at the end of your own
rules, regardless of where the <b>&minus;C</b> was placed on
the command-line. This makes them a lower priority than any
rules you specified explicitly. If you want to control where
these CVS excludes get inserted into your filter rules, you
should omit the <b>&minus;C</b> as a command-line option and
use a combination of <b>&minus;&minus;filter=:C</b> and
<b>&minus;&minus;filter=&minus;C</b> (either on your
command-line or by putting the &quot;:C&quot; and
&quot;&minus;C&quot; rules into a filter file with your
other rules). The first option turns on the per-directory
scanning for the .cvsignore file. The second option does a
one-time import of the CVS excludes mentioned above.</p>


<p style="margin-left:9%;"><b>&minus;&minus;filter=RULE</b>,
<b>&minus;f</b></p>

<p style="margin-left:18%;">This option allows you to add
rules to selectively exclude certain files from the list of
files to be transferred. This is most useful in combination
with a recursive transfer.</p>

<p style="margin-left:18%; margin-top: 1em">You may use as
many <b>&minus;&minus;filter</b> options on the command line
as you like to build up the list of files to exclude. If the
filter contains whitespace, be sure to quote it so that the
shell gives the rule to rsync as a single argument. The text
below also mentions that you can use an underscore to
replace the space that separates a rule from its arg.</p>

<p style="margin-left:18%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>&minus;F</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>The <b>&minus;F</b> option is a shorthand for adding two
<b>&minus;&minus;filter</b> rules to your command. The first
time it is used is a shorthand for this rule:</p></td></tr>
</table>


<p style="margin-left:23%; margin-top: 1em">--filter=&rsquo;dir-merge
/.rsync-filter&rsquo;</p>

<p style="margin-left:18%; margin-top: 1em">This tells
rsync to look for per-directory .rsync-filter files that
have been sprinkled through the hierarchy and use their
rules to filter the files in the transfer. If
<b>&minus;F</b> is repeated, it is a shorthand for this
rule:</p>


<p style="margin-left:23%; margin-top: 1em">--filter=&rsquo;exclude
.rsync-filter&rsquo;</p>

<p style="margin-left:18%; margin-top: 1em">This filters
out the .rsync-filter files themselves from the
transfer.</p>

<p style="margin-left:18%; margin-top: 1em">See the FILTER
RULES section for detailed information on how these options
work.</p>


<p style="margin-left:9%;"><b>&minus;&minus;exclude=PATTERN</b></p>

<p style="margin-left:18%;">This option is a simplified
form of the <b>&minus;&minus;filter</b> option that
specifies an exclude rule and does not allow the full
rule-parsing syntax of normal filter rules. This is
equivalent to specifying
<b>&minus;f&rsquo;&minus;&nbsp;PATTERN&rsquo;</b>.</p>

<p style="margin-left:18%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;exclude-from=FILE</b></p>

<p style="margin-left:18%;">This option is related to the
<b>&minus;&minus;exclude</b> option, but it specifies a FILE
that contains exclude patterns (one per line). Blank lines
in the file are ignored, as are whole-line comments that
start with &rsquo;<b>;</b>&rsquo; or &rsquo;<b>#</b>&rsquo;
(filename rules that contain those characters are
unaffected).</p>

<p style="margin-left:18%; margin-top: 1em">If a line
begins with &quot;<b>&minus;&nbsp;</b>&quot; (dash, space)
or &quot;<b>+&nbsp;</b>&quot; (plus, space), then the type
of rule is being explicitly specified as an exclude or an
include (respectively). Any rules without such a prefix are
taken to be an exclude.</p>

<p style="margin-left:18%; margin-top: 1em">If a line
consists of just &quot;<b>!</b>&quot;, then the current
filter rules are cleared before adding any further
rules.</p>

<p style="margin-left:18%; margin-top: 1em">If <i>FILE</i>
is &rsquo;<b>&minus;</b>&rsquo;, the list will be read from
standard input.</p>


<p style="margin-left:9%;"><b>&minus;&minus;include=PATTERN</b></p>

<p style="margin-left:18%;">This option is a simplified
form of the <b>&minus;&minus;filter</b> option that
specifies an include rule and does not allow the full
rule-parsing syntax of normal filter rules. This is
equivalent to specifying
<b>&minus;f&rsquo;+&nbsp;PATTERN&rsquo;</b>.</p>

<p style="margin-left:18%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;include-from=FILE</b></p>

<p style="margin-left:18%;">This option is related to the
<b>&minus;&minus;include</b> option, but it specifies a FILE
that contains include patterns (one per line). Blank lines
in the file are ignored, as are whole-line comments that
start with &rsquo;<b>;</b>&rsquo; or &rsquo;<b>#</b>&rsquo;
(filename rules that contain those characters are
unaffected).</p>

<p style="margin-left:18%; margin-top: 1em">If a line
begins with &quot;<b>&minus;&nbsp;</b>&quot; (dash, space)
or &quot;<b>+&nbsp;</b>&quot; (plus, space), then the type
of rule is being explicitly specified as an exclude or an
include (respectively). Any rules without such a prefix are
taken to be an include.</p>

<p style="margin-left:18%; margin-top: 1em">If a line
consists of just &quot;<b>!</b>&quot;, then the current
filter rules are cleared before adding any further
rules.</p>

<p style="margin-left:18%; margin-top: 1em">If <i>FILE</i>
is &rsquo;<b>&minus;</b>&rsquo;, the list will be read from
standard input.</p>


<p style="margin-left:9%;"><b>&minus;&minus;files-from=FILE</b></p>

<p style="margin-left:18%;">Using this option allows you to
specify the exact list of files to transfer (as read from
the specified FILE or &rsquo;<b>&minus;</b>&rsquo; for
standard input). It also tweaks the default behavior of
rsync to make transferring just the specified files and
directories easier:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>The <b>&minus;&minus;relative</b> (<b>&minus;R</b>)
option is implied, which preserves the path information that
is specified for each item in the file (use
<b>&minus;&minus;no-relative</b> or
<b>&minus;&minus;no-R</b> if you want to turn that off).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>The <b>&minus;&minus;dirs</b> (<b>&minus;d</b>) option
is implied, which will create directories specified in the
list on the destination rather than noisily skipping them
(use <b>&minus;&minus;no-dirs</b> or
<b>&minus;&minus;no-d</b> if you want to turn that off).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>The <b>&minus;&minus;archive</b> (<b>&minus;a</b>)
option&rsquo;s behavior does not imply
<b>&minus;&minus;recursive</b> (<b>&minus;r</b>), so specify
it explicitly, if you want it.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>These side-effects change the default state of rsync, so
the position of the <b>&minus;&minus;files-from</b> option
on the command-line has no bearing on how other options are
parsed (e.g. <b>&minus;a</b> works the same before or after
<b>&minus;&minus;files-from</b>, as does
<b>&minus;&minus;no-R</b> and all other options).</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">The filenames
that are read from the FILE are all relative to the source
dir&nbsp;&minus;&minus; any leading slashes are removed and
no &quot;..&quot; references are allowed to go higher than
the source dir. For example, take this command:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -a
--files-from=/tmp/foo /usr remote:/backup</p>

<p style="margin-left:18%; margin-top: 1em">If /tmp/foo
contains the string &quot;bin&quot; (or even
&quot;/bin&quot;), the /usr/bin directory will be created as
/backup/bin on the remote host. If it contains
&quot;bin/&quot; (note the trailing slash), the immediate
contents of the directory would also be sent (without
needing to be explicitly mentioned in the
file&nbsp;&minus;&minus; this began in version 2.6.4). In
both cases, if the <b>&minus;r</b> option was enabled, that
dir&rsquo;s entire hierarchy would also be transferred (keep
in mind that <b>&minus;r</b> needs to be specified
explicitly with <b>&minus;&minus;files-from</b>, since it is
not implied by <b>&minus;a</b>. Also note that the effect of
the (enabled by default) <b>&minus;r</b> option is to
duplicate only the path info that is read from the
file&nbsp;&minus;&minus; it does not force the duplication
of the source-spec path (/usr in this case).</p>

<p style="margin-left:18%; margin-top: 1em">In addition,
the <b>&minus;&minus;files-from</b> file can be read from
the remote host instead of the local host if you specify a
&quot;host:&quot; in front of the file (the host must match
one end of the transfer). As a short-cut, you can specify
just a prefix of &quot;:&quot; to mean &quot;use the remote
end of the transfer&quot;. For example:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -a
--files-from=:/path/file-list src:/ /tmp/copy</p>

<p style="margin-left:18%; margin-top: 1em">This would copy
all the files specified in the /path/file-list file that was
located on the remote &quot;src&quot; host.</p>

<p style="margin-left:18%; margin-top: 1em">If the
<b>&minus;&minus;iconv</b> and
<b>&minus;&minus;secluded-args</b> options are specified and
the <b>&minus;&minus;files-from</b> filenames are being sent
from one host to another, the filenames will be translated
from the sending host&rsquo;s charset to the receiving
host&rsquo;s charset.</p>

<p style="margin-left:18%; margin-top: 1em">NOTE: sorting
the list of files in the <b>&minus;&minus;files-from</b>
input helps rsync to be more efficient, as it will avoid
re-visiting the path elements that are shared between
adjacent entries. If the input is not sorted, some path
elements (implied directories) may end up being scanned
multiple times, and rsync will eventually unduplicate them
after they get turned into file-list elements.</p>

<p style="margin-left:9%;"><b>&minus;&minus;from0</b>,
<b>&minus;0</b></p>

<p style="margin-left:18%;">This tells rsync that the
rules/filenames it reads from a file are terminated by a
null (&rsquo;\0&rsquo;) character, not a NL, CR, or CR+LF.
This affects <b>&minus;&minus;exclude-from</b>,
<b>&minus;&minus;include-from</b>,
<b>&minus;&minus;files-from</b>, and any merged files
specified in a <b>&minus;&minus;filter</b> rule. It does not
affect <b>&minus;&minus;cvs-exclude</b> (since all names
read from a .cvsignore file are split on whitespace).</p>


<p style="margin-left:9%;"><b>&minus;&minus;old-args</b></p>

<p style="margin-left:18%;">This option tells rsync to stop
trying to protect the arg values on the remote side from
unintended word-splitting or other misinterpretation. It
also allows the client to treat an empty arg as a
&quot;.&quot; instead of generating an error.</p>

<p style="margin-left:18%; margin-top: 1em">The default in
a modern rsync is for &quot;shell-active&quot; characters
(including spaces) to be backslash-escaped in the args that
are sent to the remote shell. The wildcard characters
<b>*</b>, <b>?</b>, <b>[</b>, &amp; <b>]</b> are not escaped
in filename args (allowing them to expand into multiple
filenames) while being protected in option args, such as
<b>&minus;&minus;usermap</b>.</p>

<p style="margin-left:18%; margin-top: 1em">If you have a
script that wants to use old-style arg splitting in its
filenames, specify this option once. If the remote shell has
a problem with any backslash escapes at all, specify this
option twice.</p>

<p style="margin-left:18%; margin-top: 1em">You may also
control this setting via the <b>RSYNC_OLD_ARGS</b>
environment variable. If it has the value &quot;1&quot;,
rsync will default to a single-option setting. If it has the
value &quot;2&quot; (or more), rsync will default to a
repeated-option setting. If it is &quot;0&quot;,
you&rsquo;ll get the default escaping behavior. The
environment is always overridden by manually specified
positive or negative options (the negative is
<b>&minus;&minus;no-old-args</b>).</p>

<p style="margin-left:18%; margin-top: 1em">Note that this
option also disables the extra safety check added in 3.2.5
that ensures that a remote sender isn&rsquo;t including
extra top-level items in the file-list that you didn&rsquo;t
request. This side-effect is necessary because we
can&rsquo;t know for sure what names to expect when the
remote shell is interpreting the args.</p>

<p style="margin-left:18%; margin-top: 1em">This option
conflicts with the <b>&minus;&minus;secluded-args</b>
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;secluded-args</b>,
<b>&minus;s</b></p>

<p style="margin-left:18%;">This option sends all filenames
and most options to the remote rsync via the protocol (not
the remote shell command line) which avoids letting the
remote shell modify them. Wildcards are expanded on the
remote host by rsync instead of a shell.</p>

<p style="margin-left:18%; margin-top: 1em">This is similar
to the default backslash-escaping of args that was added in
3.2.4 (see <b>&minus;&minus;old-args</b>) in that it
prevents things like space splitting and unwanted
special-character side-effects. However, it has the
drawbacks of being incompatible with older rsync versions
(prior to 3.0.0) and of being refused by restricted shells
that want to be able to inspect all the option values for
safety.</p>

<p style="margin-left:18%; margin-top: 1em">This option is
useful for those times that you need the argument&rsquo;s
character set to be converted for the remote host, if the
remote shell is incompatible with the default
backslash-escpaing method, or there is some other reason
that you want the majority of the options and arguments to
bypass the command-line of the remote shell.</p>

<p style="margin-left:18%; margin-top: 1em">If you combine
this option with <b>&minus;&minus;iconv</b>, the args
related to the remote side will be translated from the local
to the remote character-set. The translation happens before
wild-cards are expanded. See also the
<b>&minus;&minus;files-from</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">You may also
control this setting via the <b>RSYNC_PROTECT_ARGS</b>
environment variable. If it has a non-zero value, this
setting will be enabled by default, otherwise it will be
disabled by default. Either state is overridden by a
manually specified positive or negative version of this
option (note that <b>&minus;&minus;no-s</b> and
<b>&minus;&minus;no-secluded-args</b> are the negative
versions). This environment variable is also superseded by a
non-zero <b>RSYNC_OLD_ARGS</b> export.</p>

<p style="margin-left:18%; margin-top: 1em">This option
conflicts with the <b>&minus;&minus;old-args</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">This option
used to be called <b>&minus;&minus;protect-args</b> (before
3.2.6) and that older name can still be used (though
specifying it as <b>&minus;s</b> is always the easiest and
most compatible choice).</p>


<p style="margin-left:9%;"><b>&minus;&minus;trust-sender</b></p>

<p style="margin-left:18%;">This option disables two extra
validation checks that a local client performs on the file
list generated by a remote sender. This option should only
be used if you trust the sender to not put something
malicious in the file list (something that could possibly be
done via a modified rsync, a modified shell, or some other
similar manipulation).</p>

<p style="margin-left:18%; margin-top: 1em">Normally, the
rsync client (as of version 3.2.5) runs two extra validation
checks when pulling files from a remote rsync:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>It verifies that additional arg items didn&rsquo;t get
added at the top of the transfer.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>It verifies that none of the items in the file list are
names that should have been excluded (if filter rules were
specified).</p> </td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">Note that
various options can turn off one or both of these checks if
the option interferes with the validation. For instance:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="73%">


<p style="margin-top: 1em">Using a per-directory filter
file reads filter rules that only the server knows about, so
the filter checking is disabled.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>Using the <b>&minus;&minus;old-args</b> option allows
the sender to manipulate the requested args, so the arg
checking is disabled.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>Reading the files-from list from the server side means
that the client doesn&rsquo;t know the arg list, so the arg
checking is disabled.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>Using <b>&minus;&minus;read-batch</b> disables both
checks since the batch file&rsquo;s contents will have been
verified when it was created.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">This option may
help an under-powered client server if the extra pattern
matching is slowing things down on a huge transfer. It can
also be used to work around a currently-unknown bug in the
verification logic for a transfer from a trusted sender.</p>

<p style="margin-left:18%; margin-top: 1em">When using this
option it is a good idea to specify a dedicated destination
directory, as discussed in the MULTI-HOST SECURITY
section.</p>


<p style="margin-left:9%;"><b>&minus;&minus;copy-as=USER[:GROUP]</b></p>

<p style="margin-left:18%;">This option instructs rsync to
use the USER and (if specified after a colon) the GROUP for
the copy operations. This only works if the user that is
running rsync has the ability to change users. If the group
is not specified then the user&rsquo;s default groups are
used.</p>

<p style="margin-left:18%; margin-top: 1em">This option can
help to reduce the risk of an rsync being run as root into
or out of a directory that might have live changes happening
to it and you want to make sure that root-level read or
write actions of system files are not possible. While you
could alternatively run all of rsync as the specified user,
sometimes you need the root-level host-access credentials to
be used, so this allows rsync to drop root for the copying
part of the operation after the remote-shell or daemon
connection is established.</p>

<p style="margin-left:18%; margin-top: 1em">The option only
affects one side of the transfer unless the transfer is
local, in which case it affects both sides. Use the
<b>&minus;&minus;remote-option</b> to affect the remote
side, such as <b>&minus;M&minus;&minus;copy-as=joe</b>. For
a local transfer, the lsh (or lsh.sh) support file provides
a local-shell helper script that can be used to allow a
&quot;localhost:&quot; or &quot;lh:&quot; host-spec to be
specified without needing to setup any remote shells,
allowing you to specify remote options that affect the side
of the transfer that is using the host-spec (and using
hostname &quot;lh&quot; avoids the overriding of the remote
directory to the user&rsquo;s home dir).</p>

<p style="margin-left:18%; margin-top: 1em">For example,
the following rsync writes the local files as user
&quot;joe&quot;:</p>

<p style="margin-left:23%; margin-top: 1em">sudo rsync -aiv
--copy-as=joe host1:backups/joe/ /home/joe/</p>

<p style="margin-left:18%; margin-top: 1em">This makes all
files owned by user &quot;joe&quot;, limits the groups to
those that are available to that user, and makes it
impossible for the joe user to do a timed exploit of the
path to induce a change to a file that the joe user has no
permissions to change.</p>

<p style="margin-left:18%; margin-top: 1em">The following
command does a local copy into the &quot;dest/&quot; dir as
user &quot;joe&quot; (assuming you&rsquo;ve installed
support/lsh into a dir on your $PATH):</p>

<p style="margin-left:23%; margin-top: 1em">sudo rsync
-aive lsh -M--copy-as=joe src/ lh:dest/</p>


<p style="margin-left:9%;"><b>&minus;&minus;temp-dir=DIR</b>,
<b>&minus;T</b></p>

<p style="margin-left:18%;">This option instructs rsync to
use DIR as a scratch directory when creating temporary
copies of the files transferred on the receiving side. The
default behavior is to create each temporary file in the
same directory as the associated destination file. Beginning
with rsync 3.1.1, the temp-file names inside the specified
DIR will not be prefixed with an extra dot (though they will
still have a random suffix added).</p>

<p style="margin-left:18%; margin-top: 1em">This option is
most often used when the receiving disk partition does not
have enough free space to hold a copy of the largest file in
the transfer. In this case (i.e. when the scratch directory
is on a different disk partition), rsync will not be able to
rename each received temporary file over the top of the
associated destination file, but instead must copy it into
place. Rsync does this by copying the file over the top of
the destination file, which means that the destination file
will contain truncated data during this copy. If this were
not done this way (even if the destination file were first
removed, the data locally copied to a temporary file in the
destination directory, and then renamed into place) it would
be possible for the old file to continue taking up disk
space (if someone had it open), and thus there might not be
enough room to fit the new version on the disk at the same
time.</p>

<p style="margin-left:18%; margin-top: 1em">If you are
using this option for reasons other than a shortage of disk
space, you may wish to combine it with the
<b>&minus;&minus;delay-updates</b> option, which will ensure
that all copied files get put into subdirectories in the
destination hierarchy, awaiting the end of the transfer. If
you don&rsquo;t have enough room to duplicate all the
arriving files on the destination partition, another way to
tell rsync that you aren&rsquo;t overly concerned about disk
space is to use the <b>&minus;&minus;partial-dir</b> option
with a relative path; because this tells rsync that it is OK
to stash off a copy of a single file in a subdir in the
destination hierarchy, rsync will use the partial-dir as a
staging area to bring over the copied file, and then rename
it into place from there. (Specifying a
<b>&minus;&minus;partial-dir</b> with an absolute path does
not have this side-effect.)</p>

<p style="margin-left:9%;"><b>&minus;&minus;fuzzy</b>,
<b>&minus;y</b></p>

<p style="margin-left:18%;">This option tells rsync that it
should look for a basis file for any destination file that
is missing. The current algorithm looks in the same
directory as the destination file for either a file that has
an identical size and modified-time, or a similarly-named
file. If found, rsync uses the fuzzy basis file to try to
speed up the transfer.</p>

<p style="margin-left:18%; margin-top: 1em">If the option
is repeated, the fuzzy scan will also be done in any
matching alternate destination directories that are
specified via <b>&minus;&minus;compare-dest</b>,
<b>&minus;&minus;copy-dest</b>, or
<b>&minus;&minus;link-dest</b>.</p>

<p style="margin-left:18%; margin-top: 1em">Note that the
use of the <b>&minus;&minus;delete</b> option might get rid
of any potential fuzzy-match files, so either use
<b>&minus;&minus;delete-after</b> or specify some filename
exclusions if you need to prevent this.</p>


<p style="margin-left:9%;"><b>&minus;&minus;compare-dest=DIR</b></p>

<p style="margin-left:18%;">This option instructs rsync to
use <i>DIR</i> on the destination machine as an additional
hierarchy to compare destination files against doing
transfers (if the files are missing in the destination
directory). If a file is found in <i>DIR</i> that is
identical to the sender&rsquo;s file, the file will NOT be
transferred to the destination directory. This is useful for
creating a sparse backup of just files that have changed
from an earlier backup. This option is typically used to
copy into an empty (or newly created) directory.</p>

<p style="margin-left:18%; margin-top: 1em">Beginning in
version 2.6.4, multiple <b>&minus;&minus;compare-dest</b>
directories may be provided, which will cause rsync to
search the list in the order specified for an exact match.
If a match is found that differs only in attributes, a local
copy is made and the attributes updated. If a match is not
found, a basis file from one of the <i>DIRs</i> will be
selected to try to speed up the transfer.</p>

<p style="margin-left:18%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>&minus;&minus;copy-dest</b> and
<b>&minus;&minus;link-dest</b>.</p>

<p style="margin-left:18%; margin-top: 1em">NOTE: beginning
with version 3.1.0, rsync will remove a file from a
non-empty destination hierarchy if an exact match is found
in one of the compare-dest hierarchies (making the end
result more closely match a fresh copy).</p>


<p style="margin-left:9%;"><b>&minus;&minus;copy-dest=DIR</b></p>

<p style="margin-left:18%;">This option behaves like
<b>&minus;&minus;compare-dest</b>, but rsync will also copy
unchanged files found in <i>DIR</i> to the destination
directory using a local copy. This is useful for doing
transfers to a new destination while leaving existing files
intact, and then doing a flash-cutover when all files have
been successfully transferred.</p>

<p style="margin-left:18%; margin-top: 1em">Multiple
<b>&minus;&minus;copy-dest</b> directories may be provided,
which will cause rsync to search the list in the order
specified for an unchanged file. If a match is not found, a
basis file from one of the <i>DIRs</i> will be selected to
try to speed up the transfer.</p>

<p style="margin-left:18%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>&minus;&minus;compare-dest</b> and
<b>&minus;&minus;link-dest</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;link-dest=DIR</b></p>

<p style="margin-left:18%;">This option behaves like
<b>&minus;&minus;copy-dest</b>, but unchanged files are hard
linked from <i>DIR</i> to the destination directory. The
files must be identical in all preserved attributes (e.g.
permissions, possibly ownership) in order for the files to
be linked together. An example:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -av
--link-dest=$PWD/prior_dir host:src_dir/ new_dir/</p>

<p style="margin-left:18%; margin-top: 1em">If files
aren&rsquo;t linking, double-check their attributes. Also
check if some attributes are getting forced outside of
rsync&rsquo;s control, such a mount option that squishes
root to a single user, or mounts a removable drive with
generic ownership (such as OS X&rsquo;s &quot;Ignore
ownership on this volume&quot; option).</p>

<p style="margin-left:18%; margin-top: 1em">Beginning in
version 2.6.4, multiple <b>&minus;&minus;link-dest</b>
directories may be provided, which will cause rsync to
search the list in the order specified for an exact match
(there is a limit of 20 such directories). If a match is
found that differs only in attributes, a local copy is made
and the attributes updated. If a match is not found, a basis
file from one of the <i>DIRs</i> will be selected to try to
speed up the transfer.</p>

<p style="margin-left:18%; margin-top: 1em">This option
works best when copying into an empty destination hierarchy,
as existing files may get their attributes tweaked, and that
can affect alternate destination files via hard-links. Also,
itemizing of changes can get a bit muddled. Note that prior
to version 3.1.0, an alternate-directory exact match would
never be found (nor linked into the destination) when a
destination file already exists.</p>

<p style="margin-left:18%; margin-top: 1em">Note that if
you combine this option with
<b>&minus;&minus;ignore-times</b>, rsync will not link any
files together because it only links identical files
together as a substitute for transferring the file, never as
an additional check after the file is updated.</p>

<p style="margin-left:18%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>&minus;&minus;compare-dest</b> and
<b>&minus;&minus;copy-dest</b>.</p>

<p style="margin-left:18%; margin-top: 1em">Note that rsync
versions prior to 2.6.1 had a bug that could prevent
<b>&minus;&minus;link-dest</b> from working properly for a
non-super-user when <b>&minus;&minus;owner</b>
(<b>&minus;o</b>) was specified (or implied). You can
work-around this bug by avoiding the <b>&minus;o</b> option
(or using <b>&minus;&minus;no-o</b>) when sending to an old
rsync.</p>

<p style="margin-left:9%;"><b>&minus;&minus;compress</b>,
<b>&minus;z</b></p>

<p style="margin-left:18%;">With this option, rsync
compresses the file data as it is sent to the destination
machine, which reduces the amount of data being
transmitted&nbsp;&minus;&minus; something that is useful
over a slow connection.</p>

<p style="margin-left:18%; margin-top: 1em">Rsync supports
multiple compression methods and will choose one for you
unless you force the choice using the
<b>&minus;&minus;compress-choice</b>
(<b>&minus;&minus;zc</b>) option.</p>

<p style="margin-left:18%; margin-top: 1em">Run
<b>rsync&nbsp;&minus;&minus;version</b> to see the default
compress list compiled into your version.</p>

<p style="margin-left:18%; margin-top: 1em">When both sides
of the transfer are at least 3.2.0, rsync chooses the first
algorithm in the client&rsquo;s list of choices that is also
in the server&rsquo;s list of choices. If no common compress
choice is found, rsync exits with an error. If the remote
rsync is too old to support checksum negotiation, its list
is assumed to be &quot;zlib&quot;.</p>

<p style="margin-left:18%; margin-top: 1em">The default
order can be customized by setting the environment variable
<b>RSYNC_COMPRESS_LIST</b> to a space-separated list of
acceptable compression names. If the string contains a
&quot;<b>&amp;</b>&quot; character, it is separated into the
&quot;client string &amp; server string&quot;, otherwise the
same string applies to both. If the string (or string
portion) contains no non-whitespace characters, the default
compress list is used. Any unknown compression names are
discarded from the list, but a list with only invalid names
results in a failed negotiation.</p>

<p style="margin-left:18%; margin-top: 1em">There are some
older rsync versions that were configured to reject a
<b>&minus;z</b> option and require the use of
<b>&minus;zz</b> because their compression library was not
compatible with the default zlib compression method. You can
usually ignore this weirdness unless the rsync server
complains and tells you to specify <b>&minus;zz</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;compress-choice=STR</b>,
<b>&minus;&minus;zc=STR</b></p>

<p style="margin-left:18%;">This option can be used to
override the automatic negotiation of the compression
algorithm that occurs when <b>&minus;&minus;compress</b> is
used. The option implies <b>&minus;&minus;compress</b>
unless &quot;none&quot; was specified, which instead implies
<b>&minus;&minus;no-compress</b>.</p>

<p style="margin-left:18%; margin-top: 1em">The compression
options that you may be able to use are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="6%">


<p><b>zstd</b></p></td>
<td width="67%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="6%">


<p><b>lz4</b></p></td>
<td width="67%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="6%">


<p><b>zlibx</b></p></td>
<td width="67%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="6%">


<p><b>zlib</b></p></td>
<td width="67%">
</td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="6%">


<p><b>none</b></p></td>
<td width="67%">
</td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">Run
<b>rsync&nbsp;&minus;&minus;version</b> to see the default
compress list compiled into your version (which may differ
from the list above).</p>

<p style="margin-left:18%; margin-top: 1em">Note that if
you see an error about an option named
<b>&minus;&minus;old-compress</b> or
<b>&minus;&minus;new-compress</b>, this is rsync trying to
send the <b>&minus;&minus;compress-choice=zlib</b> or
<b>&minus;&minus;compress-choice=zlibx</b> option in a
backward-compatible manner that more rsync versions
understand. This error indicates that the older rsync
version on the server will not allow you to force the
compression type.</p>

<p style="margin-left:18%; margin-top: 1em">Note that the
&quot;zlibx&quot; compression algorithm is just the
&quot;zlib&quot; algorithm with matched data excluded from
the compression stream (to try to make it more compatible
with an external zlib implementation).</p>


<p style="margin-left:9%;"><b>&minus;&minus;compress-level=NUM</b>,
<b>&minus;&minus;zl=NUM</b></p>

<p style="margin-left:18%;">Explicitly set the compression
level to use (see <b>&minus;&minus;compress</b>,
<b>&minus;z</b>) instead of letting it default. The
<b>&minus;&minus;compress</b> option is implied as long as
the level chosen is not a &quot;don&rsquo;t compress&quot;
level for the compression algorithm that is in effect (e.g.
zlib compression treats level 0 as &quot;off&quot;).</p>

<p style="margin-left:18%; margin-top: 1em">The level
values vary depending on the checksum in effect. Because
rsync will negotiate a checksum choice by default (when the
remote rsync is new enough), it can be good to combine this
option with a <b>&minus;&minus;compress-choice</b>
(<b>&minus;&minus;zc</b>) option unless you&rsquo;re sure of
the choice in effect. For example:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -aiv
--zc=zstd --zl=22 host:src/ dest/</p>

<p style="margin-left:18%; margin-top: 1em">For zlib &amp;
zlibx compression the valid values are from 1 to 9 with 6
being the default. Specifying <b>&minus;&minus;zl=0</b>
turns compression off, and specifying
<b>&minus;&minus;zl=&minus;1</b> chooses the default level
of 6.</p>

<p style="margin-left:18%; margin-top: 1em">For zstd
compression the valid values are from &minus;131072 to 22
with 3 being the default. Specifying 0 chooses the default
of 3.</p>

<p style="margin-left:18%; margin-top: 1em">For lz4
compression there are no levels, so the value is always
0.</p>

<p style="margin-left:18%; margin-top: 1em">If you specify
a too-large or too-small value, the number is silently
limited to a valid value. This allows you to specify
something like <b>&minus;&minus;zl=999999999</b> and be
assured that you&rsquo;ll end up with the maximum
compression level no matter what algorithm was chosen.</p>

<p style="margin-left:18%; margin-top: 1em">If you want to
know the compression level that is in effect, specify
<b>&minus;&minus;debug=nstr</b> to see the &quot;negotiated
string&quot; results. This will report something like
&quot;<b>Client&nbsp;compress:&nbsp;zstd&nbsp;(level&nbsp;3)</b>&quot;
(along with the checksum choice in effect).</p>


<p style="margin-left:9%;"><b>&minus;&minus;skip-compress=LIST</b></p>

<p style="margin-left:18%;"><b>NOTE:</b> no compression
method currently supports per-file compression changes, so
this option has no effect.</p>

<p style="margin-left:18%; margin-top: 1em">Override the
list of file suffixes that will be compressed as little as
possible. Rsync sets the compression level on a per-file
basis based on the file&rsquo;s suffix. If the compression
algorithm has an &quot;off&quot; level, then no compression
occurs for those files. Other algorithms that support
changing the streaming level on-the-fly will have the level
minimized to reduces the CPU usage as much as possible for a
matching file.</p>

<p style="margin-left:18%; margin-top: 1em">The <b>LIST</b>
should be one or more file suffixes (without the dot)
separated by slashes (<b>/</b>). You may specify an empty
string to indicate that no files should be skipped.</p>

<p style="margin-left:18%; margin-top: 1em">Simple
character-class matching is supported: each must consist of
a list of letters inside the square brackets (e.g. no
special classes, such as &quot;[:alpha:]&quot;, are
supported, and &rsquo;&minus;&rsquo; has no special
meaning).</p>

<p style="margin-left:18%; margin-top: 1em">The characters
asterisk (<b>*</b>) and question-mark (<b>?</b>) have no
special meaning.</p>

<p style="margin-left:18%; margin-top: 1em">Here&rsquo;s an
example that specifies 6 suffixes to skip (since 1 of the 5
rules matches 2 suffixes):</p>


<p style="margin-left:23%; margin-top: 1em">--skip-compress=gz/jpg/mp[34]/7z/bz2</p>

<p style="margin-left:18%; margin-top: 1em">The default
file suffixes in the skip-compress list in this version of
rsync are:</p>

<p style="margin-left:23%; margin-top: 1em">3g2 3gp 7z aac
ace apk avi bz2 deb dmg ear f4v flac flv gpg gz iso jar jpeg
jpg lrz lz lz4 lzma lzo m1a m1v m2a m2ts m2v m4a m4b m4p m4r
m4v mka mkv mov mp1 mp2 mp3 mp4 mpa mpeg mpg mpv mts odb odf
odg odi odm odp ods odt oga ogg ogm ogv ogx opus otg oth otp
ots ott oxt png qt rar rpm rz rzip spx squashfs sxc sxd sxg
sxm sxw sz tbz tbz2 tgz tlz ts txz tzo vob war webm webp xz
z zip zst</p>

<p style="margin-left:18%; margin-top: 1em">This list will
be replaced by your <b>&minus;&minus;skip-compress</b> list
in all but one situation: a copy from a daemon rsync will
add your skipped suffixes to its list of non-compressing
files (and its list may be configured to a different
default).</p>


<p style="margin-left:9%;"><b>&minus;&minus;numeric-ids</b></p>

<p style="margin-left:18%;">With this option rsync will
transfer numeric group and user IDs rather than using user
and group names and mapping them at both ends.</p>

<p style="margin-left:18%; margin-top: 1em">By default
rsync will use the username and groupname to determine what
ownership to give files. The special uid 0 and the special
group 0 are never mapped via user/group names even if the
<b>&minus;&minus;numeric-ids</b> option is not
specified.</p>

<p style="margin-left:18%; margin-top: 1em">If a user or
group has no name on the source system or it has no match on
the destination system, then the numeric ID from the source
system is used instead. See also the <b>use&nbsp;chroot</b>
setting in the rsyncd.conf manpage for some comments on how
the chroot setting affects rsync&rsquo;s ability to look up
the names of the users and groups and what you can do about
it.</p>


<p style="margin-left:9%;"><b>&minus;&minus;usermap=STRING</b>,
<b>&minus;&minus;groupmap=STRING</b></p>

<p style="margin-left:18%;">These options allow you to
specify users and groups that should be mapped to other
values by the receiving side. The <b>STRING</b> is one or
more <b>FROM</b>:<b>TO</b> pairs of values separated by
commas. Any matching <b>FROM</b> value from the sender is
replaced with a <b>TO</b> value from the receiver. You may
specify usernames or user IDs for the <b>FROM</b> and
<b>TO</b> values, and the <b>FROM</b> value may also be a
wild-card string, which will be matched against the
sender&rsquo;s names (wild-cards do NOT match against ID
numbers, though see below for why a &rsquo;<b>*</b>&rsquo;
matches everything). You may instead specify a range of ID
numbers via an inclusive range: LOW-HIGH. For example:</p>


<p style="margin-left:23%; margin-top: 1em">--usermap=0-99:nobody,wayne:admin,*:normal
--groupmap=usr:1,1:usr</p>

<p style="margin-left:18%; margin-top: 1em">The first match
in the list is the one that is used. You should specify all
your user mappings using a single
<b>&minus;&minus;usermap</b> option, and/or all your group
mappings using a single <b>&minus;&minus;groupmap</b>
option.</p>

<p style="margin-left:18%; margin-top: 1em">Note that the
sender&rsquo;s name for the 0 user and group are not
transmitted to the receiver, so you should either match
these values using a 0, or use the names in effect on the
receiving side (typically &quot;root&quot;). All other
<b>FROM</b> names match those in use on the sending side.
All <b>TO</b> names match those in use on the receiving
side.</p>

<p style="margin-left:18%; margin-top: 1em">Any IDs that do
not have a name on the sending side are treated as having an
empty name for the purpose of matching. This allows them to
be matched via a &quot;<b>*</b>&quot; or using an empty
name. For instance:</p>


<p style="margin-left:23%; margin-top: 1em">--usermap=:nobody
--groupmap=*:nobody</p>

<p style="margin-left:18%; margin-top: 1em">When the
<b>&minus;&minus;numeric-ids</b> option is used, the sender
does not send any names, so all the IDs are treated as
having an empty name. This means that you will need to
specify numeric <b>FROM</b> values if you want to map these
nameless IDs to different values.</p>

<p style="margin-left:18%; margin-top: 1em">For the
<b>&minus;&minus;usermap</b> option to work, the receiver
will need to be running as a super-user (see also the
<b>&minus;&minus;super</b> and
<b>&minus;&minus;fake-super</b> options). For the
<b>&minus;&minus;groupmap</b> option to work, the receiver
will need to have permissions to set that group.</p>

<p style="margin-left:18%; margin-top: 1em">Starting with
rsync 3.2.4, the <b>&minus;&minus;usermap</b> option implies
the <b>&minus;&minus;owner</b> (<b>&minus;o</b>) option
while the <b>&minus;&minus;groupmap</b> option implies the
<b>&minus;&minus;group</b> (<b>&minus;g</b>) option (since
rsync needs to have those options enabled for the mapping
options to work).</p>

<p style="margin-left:18%; margin-top: 1em">An older rsync
client may need to use <b>&minus;s</b> to avoid a complaint
about wildcard characters, but a modern rsync handles this
automatically.</p>


<p style="margin-left:9%;"><b>&minus;&minus;chown=USER:GROUP</b></p>

<p style="margin-left:18%;">This option forces all files to
be owned by USER with group GROUP. This is a simpler
interface than using <b>&minus;&minus;usermap</b> &amp;
<b>&minus;&minus;groupmap</b> directly, but it is
implemented using those options internally so they cannot be
mixed. If either the USER or GROUP is empty, no mapping for
the omitted user/group will occur. If GROUP is empty, the
trailing colon may be omitted, but if USER is empty, a
leading colon must be supplied.</p>

<p style="margin-left:18%; margin-top: 1em">If you specify
&quot;<b>&minus;&minus;chown=foo:bar</b>&quot;, this is
exactly the same as specifying
&quot;<b>&minus;&minus;usermap=*:foo&nbsp;&minus;&minus;groupmap=*:bar</b>&quot;,
only easier (and with the same implied
<b>&minus;&minus;owner</b> and/or <b>&minus;&minus;group</b>
options).</p>

<p style="margin-left:18%; margin-top: 1em">An older rsync
client may need to use <b>&minus;s</b> to avoid a complaint
about wildcard characters, but a modern rsync handles this
automatically.</p>


<p style="margin-left:9%;"><b>&minus;&minus;timeout=SECONDS</b></p>

<p style="margin-left:18%;">This option allows you to set a
maximum I/O timeout in seconds. If no data is transferred
for the specified time then rsync will exit. The default is
0, which means no timeout.</p>


<p style="margin-left:9%;"><b>&minus;&minus;contimeout=SECONDS</b></p>

<p style="margin-left:18%;">This option allows you to set
the amount of time that rsync will wait for its connection
to an rsync daemon to succeed. If the timeout is reached,
rsync exits with an error.</p>


<p style="margin-left:9%;"><b>&minus;&minus;address=ADDRESS</b></p>

<p style="margin-left:18%;">By default rsync will bind to
the wildcard address when connecting to an rsync daemon. The
<b>&minus;&minus;address</b> option allows you to specify a
specific IP address (or hostname) to bind to.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
daemon version of the <b>&minus;&minus;address</b>
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;port=PORT</b></p>

<p style="margin-left:18%;">This specifies an alternate TCP
port number to use rather than the default of 873. This is
only needed if you are using the double-colon (::) syntax to
connect with an rsync daemon (since the URL syntax has a way
to specify the port as a part of the URL).</p>

<p style="margin-left:18%; margin-top: 1em">See also the
daemon version of the <b>&minus;&minus;port</b> option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;sockopts=OPTIONS</b></p>

<p style="margin-left:18%;">This option can provide endless
fun for people who like to tune their systems to the utmost
degree. You can set all sorts of socket options which may
make transfers faster (or slower!). Read the manpage for the
<b>setsockopt()</b> system call for details on some of the
options you may be able to set. By default no special socket
options are set. This only affects direct socket connections
to a remote rsync daemon.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
daemon version of the <b>&minus;&minus;sockopts</b>
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;blocking-io</b></p>

<p style="margin-left:18%;">This tells rsync to use
blocking I/O when launching a remote shell transport. If the
remote shell is either rsh or remsh, rsync defaults to using
blocking I/O, otherwise it defaults to using non-blocking
I/O. (Note that ssh prefers non-blocking I/O.)</p>


<p style="margin-left:9%;"><b>&minus;&minus;outbuf=MODE</b></p>

<p style="margin-left:18%;">This sets the output buffering
mode. The mode can be None (aka Unbuffered), Line, or Block
(aka Full). You may specify as little as a single letter for
the mode, and use upper or lower case.</p>

<p style="margin-left:18%; margin-top: 1em">The main use of
this option is to change Full buffering to Line buffering
when rsync&rsquo;s output is going to a file or pipe.</p>


<p style="margin-left:9%;"><b>&minus;&minus;itemize-changes</b>,
<b>&minus;i</b></p>

<p style="margin-left:18%;">Requests a simple itemized list
of the changes that are being made to each file, including
attribute changes. This is exactly the same as specifying
<b>&minus;&minus;out-format=&rsquo;%i&nbsp;%n%L&rsquo;</b>.
If you repeat the option, unchanged files will also be
output, but only if the receiving rsync is at least version
2.6.7 (you can use <b>&minus;vv</b> with older versions of
rsync, but that also turns on the output of other verbose
messages).</p>

<p style="margin-left:18%; margin-top: 1em">The
&quot;%i&quot; escape has a cryptic output that is 11
letters long. The general format is like the string
<b>YXcstpoguax</b>, where <b>Y</b> is replaced by the type
of update being done, <b>X</b> is replaced by the file-type,
and the other letters represent attributes that may be
output if they are being modified.</p>

<p style="margin-left:18%; margin-top: 1em">The update
types that replace the <b>Y</b> are as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>&lt;</b> means that a file is being transferred to
the remote host (sent).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>&gt;</b> means that a file is being transferred to
the local host (received).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>c</b> means that a local change/creation is
occurring for the item (such as the creation of a directory
or the changing of a symlink, etc.).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>h</b> means that the item is a hard link to another
item (requires <b>&minus;&minus;hard-links</b>).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>.</b> means that the item is not being updated
(though it might have attributes that are being
modified).</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>*</b> means that the rest of the itemized-output
area contains a message (e.g. &quot;deleting&quot;).</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">The file-types
that replace the <b>X</b> are: <b>f</b> for a file, a
<b>d</b> for a directory, an <b>L</b> for a symlink, a
<b>D</b> for a device, and a <b>S</b> for a special file
(e.g. named sockets and fifos).</p>

<p style="margin-left:18%; margin-top: 1em">The other
letters in the string indicate if some attributes of the
file have changed, as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="73%">


<p style="margin-top: 1em">&quot;<b>.</b>&quot; &minus; the
attribute is unchanged.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>&quot;<b>+</b>&quot; &minus; the file is newly
created.</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>&quot;&nbsp;&quot; &minus; all the attributes are
unchanged (all dots turn to spaces).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>&quot;<b>?</b>&quot; &minus; the change is unknown (when
the remote rsync is old).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A letter indicates an attribute is being updated.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">The attribute
that is associated with each letter is as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="73%">


<p style="margin-top: 1em">A <b>c</b> means either that a
regular file has a different checksum (requires
<b>&minus;&minus;checksum</b>) or that a symlink, device, or
special file has a changed value. Note that if you are
sending files to an rsync prior to 3.0.1, this change flag
will be present only for checksum-differing regular
files.</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>s</b> means the size of a regular file is different
and will be updated by the file transfer.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>t</b> means the modification time is different and
is being updated to the sender&rsquo;s value (requires
<b>&minus;&minus;times</b>). An alternate value of <b>T</b>
means that the modification time will be set to the transfer
time, which happens when a file/symlink/device is updated
without <b>&minus;&minus;times</b> and when a symlink is
changed and the receiver can&rsquo;t set its time. (Note:
when using an rsync 3.0.0 client, you might see the <b>s</b>
flag combined with <b>t</b> instead of the proper <b>T</b>
flag for this time-setting failure.)</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>p</b> means the permissions are different and are
being updated to the sender&rsquo;s value (requires
<b>&minus;&minus;perms</b>).</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>An <b>o</b> means the owner is different and is being
updated to the sender&rsquo;s value (requires
<b>&minus;&minus;owner</b> and super-user privileges).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p>A <b>g</b> means the group is different and is being
updated to the sender&rsquo;s value (requires
<b>&minus;&minus;group</b> and the authority to set the
group).</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">
</td></tr>
</table>

<p style="margin-left:27%; margin-top: 1em">o</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="36%"></td>
<td width="56%">


<p style="margin-top: 1em">A <b>u</b>|<b>n</b>|<b>b</b>
indicates the following information:</p></td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:36%; margin-top: 1em"><b>u</b> means
the access (use) time is different and is being updated to
the sender&rsquo;s value (requires
<b>&minus;&minus;atimes</b>)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="10%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="64%">


<p style="margin-top: 1em"><b>n</b> means the create time
(newness) is different and is being updated to the
sender&rsquo;s value (requires
<b>&minus;&minus;crtimes</b>)</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="10%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>b</b> means that both the access and create times are
being updated</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="10%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">
</td></tr>
</table>

<p style="margin-left:27%; margin-top: 1em">The <b>a</b>
means that the ACL information is being changed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="73%">


<p style="margin-top: 1em">The <b>x</b> means that the
extended attribute information is being changed.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">One other
output is possible: when deleting files, the &quot;%i&quot;
will output the string &quot;<b>*deleting</b>&quot; for each
item that is being removed (assuming that you are talking to
a recent enough rsync that it logs deletions instead of
outputting them as a verbose message).</p>


<p style="margin-left:9%;"><b>&minus;&minus;out-format=FORMAT</b></p>

<p style="margin-left:18%;">This allows you to specify
exactly what the rsync client outputs to the user on a
per-update basis. The format is a text string containing
embedded single-character escape sequences prefixed with a
percent (%) character. A default format of &quot;%n%L&quot;
is assumed if either <b>&minus;&minus;info=name</b> or
<b>&minus;v</b> is specified (this tells you just the name
of the file and, if the item is a link, where it points).
For a full list of the possible escape characters, see the
<b>log&nbsp;format</b> setting in the rsyncd.conf
manpage.</p>

<p style="margin-left:18%; margin-top: 1em">Specifying the
<b>&minus;&minus;out-format</b> option implies the
<b>&minus;&minus;info=name</b> option, which will mention
each file, dir, etc. that gets updated in a significant way
(a transferred file, a recreated symlink/device, or a
touched directory). In addition, if the itemize-changes
escape (%i) is included in the string (e.g. if the
<b>&minus;&minus;itemize-changes</b> option was used), the
logging of names increases to mention any item that is
changed in any way (as long as the receiving side is at
least 2.6.4). See the <b>&minus;&minus;itemize-changes</b>
option for a description of the output of
&quot;%i&quot;.</p>

<p style="margin-left:18%; margin-top: 1em">Rsync will
output the out-format string prior to a file&rsquo;s
transfer unless one of the transfer-statistic escapes is
requested, in which case the logging is done at the end of
the file&rsquo;s transfer. When this late logging is in
effect and <b>&minus;&minus;progress</b> is also specified,
rsync will also output the name of the file being
transferred prior to its progress information (followed, of
course, by the out-format output).</p>


<p style="margin-left:9%;"><b>&minus;&minus;log-file=FILE</b></p>

<p style="margin-left:18%;">This option causes rsync to log
what it is doing to a file. This is similar to the logging
that a daemon does, but can be requested for the client side
and/or the server side of a non-daemon transfer. If
specified as a client option, transfer logging will be
enabled with a default format of &quot;%i %n%L&quot;. See
the <b>&minus;&minus;log-file-format</b> option if you wish
to override this.</p>

<p style="margin-left:18%; margin-top: 1em">Here&rsquo;s an
example command that requests the remote side to log what is
happening:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -av
--remote-option=--log-file=/tmp/rlog src/ dest/</p>

<p style="margin-left:18%; margin-top: 1em">This is very
useful if you need to debug why a connection is closing
unexpectedly.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
daemon version of the <b>&minus;&minus;log-file</b>
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;log-file-format=FORMAT</b></p>

<p style="margin-left:18%;">This allows you to specify
exactly what per-update logging is put into the file
specified by the <b>&minus;&minus;log-file</b> option (which
must also be specified for this option to have any effect).
If you specify an empty string, updated files will not be
mentioned in the log file. For a list of the possible escape
characters, see the <b>log&nbsp;format</b> setting in the
rsyncd.conf manpage.</p>

<p style="margin-left:18%; margin-top: 1em">The default
FORMAT used if <b>&minus;&minus;log-file</b> is specified
and this option is not is &rsquo;%i %n%L&rsquo;.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
daemon version of the <b>&minus;&minus;log-file-format</b>
option.</p>

<p style="margin-left:9%;"><b>&minus;&minus;stats</b></p>

<p style="margin-left:18%;">This tells rsync to print a
verbose set of statistics on the file transfer, allowing you
to tell how effective rsync&rsquo;s delta-transfer algorithm
is for your data. This option is equivalent to
<b>&minus;&minus;info=stats2</b> if combined with 0 or 1
<b>&minus;v</b> options, or <b>&minus;&minus;info=stats3</b>
if combined with 2 or more <b>&minus;v</b> options.</p>

<p style="margin-left:18%; margin-top: 1em">The current
statistics are as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Number&nbsp;of&nbsp;files</b> is the count of all
&quot;files&quot; (in the generic sense), which includes
directories, symlinks, etc. The total count will be followed
by a list of counts by filetype (if the total is non-zero).
For example: &quot;(reg: 5, dir: 3, link: 2, dev: 1,
special: 1)&quot; lists the totals for regular files,
directories, symlinks, devices, and special files. If any of
value is 0, it is completely omitted from the list.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Number&nbsp;of&nbsp;created&nbsp;files</b> is the
count of how many &quot;files&quot; (generic sense) were
created (as opposed to updated). The total count will be
followed by a list of counts by filetype (if the total is
non-zero).</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Number&nbsp;of&nbsp;deleted&nbsp;files</b> is the
count of how many &quot;files&quot; (generic sense) were
deleted. The total count will be followed by a list of
counts by filetype (if the total is non-zero). Note that
this line is only output if deletions are in effect, and
only if protocol 31 is being used (the default for rsync
3.1.x).</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">



<p><b>Number&nbsp;of&nbsp;regular&nbsp;files&nbsp;transferred</b>
is the count of normal files that were updated via
rsync&rsquo;s delta-transfer algorithm, which does not
include dirs, symlinks, etc. Note that rsync 3.1.0 added the
word &quot;regular&quot; into this heading.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Total&nbsp;file&nbsp;size</b> is the total sum of all
file sizes in the transfer. This does not count any size for
directories or special files, but does include the size of
symlinks.</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Total&nbsp;transferred&nbsp;file&nbsp;size</b> is the
total sum of all files sizes for just the transferred
files.</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Literal&nbsp;data</b> is how much unmatched
file-update data we had to send to the receiver for it to
recreate the updated files.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Matched&nbsp;data</b> is how much data the receiver
got locally when recreating the updated files.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>File&nbsp;list&nbsp;size</b> is how big the file-list
data was when the sender sent it to the receiver. This is
smaller than the in-memory size for the file list due to
some compressing of duplicated data when rsync sends the
list.</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>File&nbsp;list&nbsp;generation&nbsp;time</b> is the
number of seconds that the sender spent creating the file
list. This requires a modern rsync on the sending side for
this to be present.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>File&nbsp;list&nbsp;transfer&nbsp;time</b> is the
number of seconds that the sender spent sending the file
list to the receiver.</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Total&nbsp;bytes&nbsp;sent</b> is the count of all
the bytes that rsync sent from the client side to the server
side.</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">


<p><b>Total&nbsp;bytes&nbsp;received</b> is the count of
all non-message bytes that rsync received by the client side
from the server side. &quot;Non-message&quot; bytes means
that we don&rsquo;t count the bytes for a verbose message
that the server sent to us, which makes the stats more
consistent.</p> </td></tr>
</table>


<p style="margin-left:9%;"><b>&minus;&minus;8-bit-output</b>,
<b>&minus;8</b></p>

<p style="margin-left:18%;">This tells rsync to leave all
high-bit characters unescaped in the output instead of
trying to test them to see if they&rsquo;re valid in the
current locale and escaping the invalid ones. All control
characters (but never tabs) are always escaped, regardless
of this option&rsquo;s setting.</p>

<p style="margin-left:18%; margin-top: 1em">The escape
idiom that started in 2.6.7 is to output a literal backslash
(<b>\</b>) and a hash (<b>#</b>), followed by exactly 3
octal digits. For example, a newline would output as
&quot;<b>\#012</b>&quot;. A literal backslash that is in a
filename is not escaped unless it is followed by a hash and
3 digits (0-9).</p>


<p style="margin-left:9%;"><b>&minus;&minus;human-readable</b>,
<b>&minus;h</b></p>

<p style="margin-left:18%;">Output numbers in a more
human-readable format. There are 3 possible levels:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>1.</p></td>
<td width="6%"></td>
<td width="73%">


<p>output numbers with a separator between each set of 3
digits (either a comma or a period, depending on if the
decimal point is represented by a period or a comma).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>2.</p></td>
<td width="6%"></td>
<td width="73%">


<p>output numbers in units of 1000 (with a character suffix
for larger units&nbsp;&minus;&minus; see below).</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>3.</p></td>
<td width="6%"></td>
<td width="73%">


<p>output numbers in units of 1024.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">The default is
human-readable level 1. Each <b>&minus;h</b> option
increases the level by one. You can take the level down to 0
(to output numbers as pure digits) by specifying the
<b>&minus;&minus;no-human-readable</b>
(<b>&minus;&minus;no-h</b>) option.</p>

<p style="margin-left:18%; margin-top: 1em">The unit
letters that are appended in levels 2 and 3 are: <b>K</b>
(kilo), <b>M</b> (mega), <b>G</b> (giga), <b>T</b> (tera),
or <b>P</b> (peta). For example, a 1234567-byte file would
output as 1.23M in level-2 (assuming that a period is your
local decimal point).</p>

<p style="margin-left:18%; margin-top: 1em">Backward
compatibility note: versions of rsync prior to 3.1.0 do not
support human-readable level 1, and they default to level 0.
Thus, specifying one or two <b>&minus;h</b> options will
behave in a comparable manner in old and new versions as
long as you didn&rsquo;t specify a <b>&minus;&minus;no-h</b>
option prior to one or more <b>&minus;h</b> options. See the
<b>&minus;&minus;list-only</b> option for one
difference.</p>


<p style="margin-left:9%;"><b>&minus;&minus;partial</b></p>

<p style="margin-left:18%;">By default, rsync will delete
any partially transferred file if the transfer is
interrupted. In some circumstances it is more desirable to
keep partially transferred files. Using the
<b>&minus;&minus;partial</b> option tells rsync to keep the
partial file which should make a subsequent transfer of the
rest of the file much faster.</p>


<p style="margin-left:9%;"><b>&minus;&minus;partial-dir=DIR</b></p>

<p style="margin-left:18%;">This option modifies the
behavior of the <b>&minus;&minus;partial</b> option while
also implying that it be enabled. This enhanced partial-file
method puts any partially transferred files into the
specified <i>DIR</i> instead of writing the partial file out
to the destination file. On the next transfer, rsync will
use a file found in this dir as data to speed up the
resumption of the transfer and then delete it after it has
served its purpose.</p>

<p style="margin-left:18%; margin-top: 1em">Note that if
<b>&minus;&minus;whole-file</b> is specified (or implied),
any partial-dir files that are found for a file that is
being updated will simply be removed (since rsync is sending
files without using rsync&rsquo;s delta-transfer
algorithm).</p>

<p style="margin-left:18%; margin-top: 1em">Rsync will
create the <i>DIR</i> if it is missing, but just the last
dir&nbsp;&minus;&minus; not the whole path. This makes it
easy to use a relative path (such as
&quot;<b>&minus;&minus;partial-dir=.rsync-partial</b>&quot;)
to have rsync create the partial-directory in the
destination file&rsquo;s directory when it is needed, and
then remove it again when the partial file is deleted. Note
that this directory removal is only done for a relative
pathname, as it is expected that an absolute path is to a
directory that is reserved for partial-dir work.</p>

<p style="margin-left:18%; margin-top: 1em">If the
partial-dir value is not an absolute path, rsync will add an
exclude rule at the end of all your existing excludes. This
will prevent the sending of any partial-dir files that may
exist on the sending side, and will also prevent the
untimely deletion of partial-dir items on the receiving
side. An example: the above <b>&minus;&minus;partial-dir</b>
option would add the equivalent of this
&quot;perishable&quot; exclude at the end of any other
filter rules:
<b>&minus;f&nbsp;&rsquo;&minus;p&nbsp;.rsync-partial/&rsquo;</b></p>

<p style="margin-left:18%; margin-top: 1em">If you are
supplying your own exclude rules, you may need to add your
own exclude/hide/protect rule for the partial-dir
because:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>1.</p></td>
<td width="6%"></td>
<td width="73%">


<p>the auto-added rule may be ineffective at the end of
your other rules, or</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>2.</p></td>
<td width="6%"></td>
<td width="73%">


<p>you may wish to override rsync&rsquo;s exclude
choice.</p> </td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">For instance,
if you want to make rsync clean-up any left-over
partial-dirs that may be lying around, you should specify
<b>&minus;&minus;delete-after</b> and add a &quot;risk&quot;
filter rule, e.g.
<b>&minus;f&nbsp;&rsquo;R&nbsp;.rsync-partial/&rsquo;</b>.
Avoid using <b>&minus;&minus;delete-before</b> or
<b>&minus;&minus;delete-during</b> unless you don&rsquo;t
need rsync to use any of the left-over partial-dir data
during the current run.</p>

<p style="margin-left:18%; margin-top: 1em">IMPORTANT: the
<b>&minus;&minus;partial-dir</b> should not be writable by
other users or it is a security risk! E.g. AVOID
&quot;/tmp&quot;!</p>

<p style="margin-left:18%; margin-top: 1em">You can also
set the partial-dir value the <b>RSYNC_PARTIAL_DIR</b>
environment variable. Setting this in the environment does
not force <b>&minus;&minus;partial</b> to be enabled, but
rather it affects where partial files go when
<b>&minus;&minus;partial</b> is specified. For instance,
instead of using <b>&minus;&minus;partial-dir=.rsync-tmp</b>
along with <b>&minus;&minus;progress</b>, you could set
<b>RSYNC_PARTIAL_DIR=.rsync-tmp</b> in your environment and
then use the <b>&minus;P</b> option to turn on the use of
the .rsync-tmp dir for partial transfers. The only times
that the <b>&minus;&minus;partial</b> option does not look
for this environment value are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="6%"></td>
<td width="73%">


<p style="margin-top: 1em">when
<b>&minus;&minus;inplace</b> was specified (since
<b>&minus;&minus;inplace</b> conflicts with
<b>&minus;&minus;partial-dir</b>), and</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>2.</p></td>
<td width="6%"></td>
<td width="73%">


<p>when <b>&minus;&minus;delay-updates</b> was specified
(see below).</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">When a modern
rsync resumes the transfer of a file in the partial-dir,
that partial file is now updated in-place instead of
creating yet another tmp-file copy (so it maxes out at dest
+ tmp instead of dest + partial + tmp). This requires both
ends of the transfer to be at least version 3.2.0.</p>

<p style="margin-left:18%; margin-top: 1em">For the
purposes of the daemon-config&rsquo;s
&quot;<b>refuse&nbsp;options</b>&quot; setting,
<b>&minus;&minus;partial-dir</b> does <i>not</i> imply
<b>&minus;&minus;partial</b>. This is so that a refusal of
the <b>&minus;&minus;partial</b> option can be used to
disallow the overwriting of destination files with a partial
transfer, while still allowing the safer idiom provided by
<b>&minus;&minus;partial-dir</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;delay-updates</b></p>

<p style="margin-left:18%;">This option puts the temporary
file from each updated file into a holding directory until
the end of the transfer, at which time all the files are
renamed into place in rapid succession. This attempts to
make the updating of the files a little more atomic. By
default the files are placed into a directory named
<b>.&#732;tmp&#732;</b> in each file&rsquo;s destination
directory, but if you&rsquo;ve specified the
<b>&minus;&minus;partial-dir</b> option, that directory will
be used instead. See the comments in the
<b>&minus;&minus;partial-dir</b> section for a discussion of
how this <b>.&#732;tmp&#732;</b> dir will be excluded from
the transfer, and what you can do if you want rsync to
cleanup old <b>.&#732;tmp&#732;</b> dirs that might be lying
around. Conflicts with <b>&minus;&minus;inplace</b> and
<b>&minus;&minus;append</b>.</p>

<p style="margin-left:18%; margin-top: 1em">This option
implies <b>&minus;&minus;no-inc-recursive</b> since it needs
the full file list in memory in order to be able to iterate
over it at the end.</p>

<p style="margin-left:18%; margin-top: 1em">This option
uses more memory on the receiving side (one bit per file
transferred) and also requires enough free disk space on the
receiving side to hold an additional copy of all the updated
files. Note also that you should not use an absolute path to
<b>&minus;&minus;partial-dir</b> unless:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>1.</p></td>
<td width="6%"></td>
<td width="73%">


<p>there is no chance of any of the files in the transfer
having the same name (since all the updated files will be
put into a single directory if the path is absolute),
and</p> </td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>2.</p></td>
<td width="6%"></td>
<td width="73%">


<p>there are no mount points in the hierarchy (since the
delayed updates will fail if they can&rsquo;t be renamed
into place).</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">See also the
&quot;atomic-rsync&quot; python script in the
&quot;support&quot; subdir for an update algorithm that is
even more atomic (it uses <b>&minus;&minus;link-dest</b> and
a parallel hierarchy of files).</p>


<p style="margin-left:9%;"><b>&minus;&minus;prune-empty-dirs</b>,
<b>&minus;m</b></p>

<p style="margin-left:18%;">This option tells the receiving
rsync to get rid of empty directories from the file-list,
including nested directories that have no non-directory
children. This is useful for avoiding the creation of a
bunch of useless directories when the sending rsync is
recursively scanning a hierarchy of files using
include/exclude/filter rules.</p>

<p style="margin-left:18%; margin-top: 1em">This option can
still leave empty directories on the receiving side if you
make use of TRANSFER_RULES.</p>

<p style="margin-left:18%; margin-top: 1em">Because the
file-list is actually being pruned, this option also affects
what directories get deleted when a delete is active.
However, keep in mind that excluded files and directories
can prevent existing items from being deleted due to an
exclude both hiding source files and protecting destination
files. See the perishable filter-rule option for how to
avoid this.</p>

<p style="margin-left:18%; margin-top: 1em">You can prevent
the pruning of certain empty directories from the file-list
by using a global &quot;protect&quot; filter. For instance,
this option would ensure that the directory
&quot;emptydir&quot; was kept in the file-list:</p>

<p style="margin-left:23%; margin-top: 1em">--filter
&rsquo;protect emptydir/&rsquo;</p>

<p style="margin-left:18%; margin-top: 1em">Here&rsquo;s an
example that copies all .pdf files in a hierarchy, only
creating the necessary destination directories to hold the
.pdf files, and ensures that any superfluous files and
directories in the destination are removed (note the hide
filter of non-directories being used instead of an
exclude):</p>

<p style="margin-left:23%; margin-top: 1em">rsync -avm
--del --include=&rsquo;*.pdf&rsquo; -f &rsquo;hide,!
*/&rsquo; src/ dest</p>

<p style="margin-left:18%; margin-top: 1em">If you
didn&rsquo;t want to remove superfluous destination files,
the more time-honored options of
<b>&minus;&minus;include=&rsquo;*/&rsquo;&nbsp;&minus;&minus;exclude=&rsquo;*&rsquo;</b>
would work fine in place of the hide-filter (if that is more
natural to you).</p>


<p style="margin-left:9%;"><b>&minus;&minus;progress</b></p>

<p style="margin-left:18%;">This option tells rsync to
print information showing the progress of the transfer. This
gives a bored user something to watch. With a modern rsync
this is the same as specifying
<b>&minus;&minus;info=flist2,name,progress</b>, but any
user-supplied settings for those info flags takes precedence
(e.g.
<b>&minus;&minus;info=flist0&nbsp;&minus;&minus;progress</b>).</p>

<p style="margin-left:18%; margin-top: 1em">While rsync is
transferring a regular file, it updates a progress line that
looks like this:</p>

<p style="margin-left:23%; margin-top: 1em">782448 63%
110.64kB/s 0:00:04</p>

<p style="margin-left:18%; margin-top: 1em">In this
example, the receiver has reconstructed 782448 bytes or 63%
of the sender&rsquo;s file, which is being reconstructed at
a rate of 110.64 kilobytes per second, and the transfer will
finish in 4 seconds if the current rate is maintained until
the end.</p>

<p style="margin-left:18%; margin-top: 1em">These
statistics can be misleading if rsync&rsquo;s delta-transfer
algorithm is in use. For example, if the sender&rsquo;s file
consists of the basis file followed by additional data, the
reported rate will probably drop dramatically when the
receiver gets to the literal data, and the transfer will
probably take much longer to finish than the receiver
estimated as it was finishing the matched part of the
file.</p>

<p style="margin-left:18%; margin-top: 1em">When the file
transfer finishes, rsync replaces the progress line with a
summary line that looks like this:</p>

<p style="margin-left:23%; margin-top: 1em">1,238,099 100%
146.38kB/s 0:00:08 (xfr#5, to-chk=169/396)</p>

<p style="margin-left:18%; margin-top: 1em">In this
example, the file was 1,238,099 bytes long in total, the
average rate of transfer for the whole file was 146.38
kilobytes per second over the 8 seconds that it took to
complete, it was the 5th transfer of a regular file during
the current rsync session, and there are 169 more files for
the receiver to check (to see if they are up-to-date or not)
remaining out of the 396 total files in the file-list.</p>

<p style="margin-left:18%; margin-top: 1em">In an
incremental recursion scan, rsync won&rsquo;t know the total
number of files in the file-list until it reaches the ends
of the scan, but since it starts to transfer files during
the scan, it will display a line with the text
&quot;ir-chk&quot; (for incremental recursion check) instead
of &quot;to-chk&quot; until the point that it knows the full
size of the list, at which point it will switch to using
&quot;to-chk&quot;. Thus, seeing &quot;ir-chk&quot; lets you
know that the total count of files in the file list is still
going to increase (and each time it does, the count of files
left to check will increase by the number of the files added
to the list).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="3%">


<p><b>&minus;P</b></p></td>
<td width="6%"></td>
<td width="82%">


<p>The <b>&minus;P</b> option is equivalent to
&quot;<b>&minus;&minus;partial
&minus;&minus;progress</b>&quot;. Its purpose is to make it
much easier to specify these two options for a long transfer
that may be interrupted.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">There is also a
<b>&minus;&minus;info=progress2</b> option that outputs
statistics based on the whole transfer, rather than
individual files. Use this flag without outputting a
filename (e.g. avoid <b>&minus;v</b> or specify
<b>&minus;&minus;info=name0</b>) if you want to see how the
transfer is doing without scrolling the screen with a lot of
names. (You don&rsquo;t need to specify the
<b>&minus;&minus;progress</b> option in order to use
<b>&minus;&minus;info=progress2</b>.)</p>

<p style="margin-left:18%; margin-top: 1em">Finally, you
can get an instant progress report by sending rsync a signal
of either SIGINFO or SIGVTALRM. On BSD systems, a SIGINFO is
generated by typing a Ctrl+T (Linux doesn&rsquo;t currently
support a SIGINFO signal). When the client-side process
receives one of those signals, it sets a flag to output a
single progress report which is output when the current file
transfer finishes (so it may take a little time if a big
file is being handled when the signal arrives). A filename
is output (if needed) followed by the
<b>&minus;&minus;info=progress2</b> format of progress info.
If you don&rsquo;t know which of the 3 rsync processes is
the client process, it&rsquo;s OK to signal all of them
(since the non-client processes ignore the signal).</p>

<p style="margin-left:18%; margin-top: 1em">CAUTION:
sending SIGVTALRM to an older rsync (pre-3.2.0) will kill
it.</p>


<p style="margin-left:9%;"><b>&minus;&minus;password-file=FILE</b></p>

<p style="margin-left:18%;">This option allows you to
provide a password for accessing an rsync daemon via a file
or via standard input if <b>FILE</b> is <b>&minus;</b>. The
file should contain just the password on the first line (all
other lines are ignored). Rsync will exit with an error if
<b>FILE</b> is world readable or if a root-run rsync command
finds a non-root-owned file.</p>

<p style="margin-left:18%; margin-top: 1em">This option
does not supply a password to a remote shell transport such
as ssh; to learn how to do that, consult the remote
shell&rsquo;s documentation. When accessing an rsync daemon
using a remote shell as the transport, this option only
comes into effect after the remote shell finishes its
authentication (i.e. if you have also specified a password
in the daemon&rsquo;s config file).</p>


<p style="margin-left:9%;"><b>&minus;&minus;early-input=FILE</b></p>

<p style="margin-left:18%;">This option allows rsync to
send up to 5K of data to the &quot;early exec&quot; script
on its stdin. One possible use of this data is to give the
script a secret that can be used to mount an encrypted
filesystem (which you should unmount in the the
&quot;post-xfer exec&quot; script).</p>

<p style="margin-left:18%; margin-top: 1em">The daemon must
be at least version 3.2.1.</p>


<p style="margin-left:9%;"><b>&minus;&minus;list-only</b></p>

<p style="margin-left:18%;">This option will cause the
source files to be listed instead of transferred. This
option is inferred if there is a single source arg and no
destination specified, so its main uses are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>1.</p></td>
<td width="6%"></td>
<td width="73%">


<p>to turn a copy command that includes a destination arg
into a file-listing command, or</p></td></tr>
<tr valign="top" align="left">
<td width="18%"></td>
<td width="3%">


<p>2.</p></td>
<td width="6%"></td>
<td width="73%">


<p>to be able to specify more than one source arg. Note: be
sure to include the destination.</p></td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">CAUTION: keep
in mind that a source arg with a wild-card is expanded by
the shell into multiple args, so it is never safe to try to
specify a single wild-card arg to try to infer this option.
A safe example is:</p>

<p style="margin-left:23%; margin-top: 1em">rsync -av
--list-only foo* dest/</p>

<p style="margin-left:18%; margin-top: 1em">This option
always uses an output format that looks similar to this:</p>

<p style="margin-left:23%; margin-top: 1em">drwxrwxr-x
4,096 2022/09/30 12:53:11 support <br>
-rw-rw-r-- 80 2005/01/11 10:37:37 support/Makefile</p>

<p style="margin-left:18%; margin-top: 1em">The only option
that affects this output style is (as of 3.1.0) the
<b>&minus;&minus;human-readable</b> (<b>&minus;h</b>)
option. The default is to output sizes as byte counts with
digit separators (in a 14-character-width column).
Specifying at least one <b>&minus;h</b> option makes the
sizes output with unit suffixes. If you want old-style
bytecount sizes without digit separators (and an
11-character-width column) use
<b>&minus;&minus;no-h</b>.</p>

<p style="margin-left:18%; margin-top: 1em">Compatibility
note: when requesting a remote listing of files from an
rsync that is version 2.6.3 or older, you may encounter an
error if you ask for a non-recursive listing. This is
because a file listing implies the <b>&minus;&minus;dirs</b>
option w/o <b>&minus;&minus;recursive</b>, and older rsyncs
don&rsquo;t have that option. To avoid this problem, either
specify the <b>&minus;&minus;no-dirs</b> option (if you
don&rsquo;t need to expand a directory&rsquo;s content), or
turn on recursion and exclude the content of subdirectories:
<b>&minus;r&nbsp;&minus;&minus;exclude=&rsquo;/*/*&rsquo;</b>.</p>


<p style="margin-left:9%;"><b>&minus;&minus;bwlimit=RATE</b></p>

<p style="margin-left:18%;">This option allows you to
specify the maximum transfer rate for the data sent over the
socket, specified in units per second. The RATE value can be
suffixed with a string to indicate a size multiplier, and
may be a fractional value (e.g.
<b>&minus;&minus;bwlimit=1.5m</b>). If no suffix is
specified, the value will be assumed to be in units of 1024
bytes (as if &quot;K&quot; or &quot;KiB&quot; had been
appended). See the <b>&minus;&minus;max-size</b> option for
a description of all the available suffixes. A value of 0
specifies no limit.</p>

<p style="margin-left:18%; margin-top: 1em">For
backward-compatibility reasons, the rate limit will be
rounded to the nearest KiB unit, so no rate smaller than
1024 bytes per second is possible.</p>

<p style="margin-left:18%; margin-top: 1em">Rsync writes
data over the socket in blocks, and this option both limits
the size of the blocks that rsync writes, and tries to keep
the average transfer rate at the requested limit. Some
burstiness may be seen where rsync writes out a block of
data and then sleeps to bring the average rate into
compliance.</p>

<p style="margin-left:18%; margin-top: 1em">Due to the
internal buffering of data, the
<b>&minus;&minus;progress</b> option may not be an accurate
reflection on how fast the data is being sent. This is
because some files can show up as being rapidly sent when
the data is quickly buffered, while other can show up as
very slow when the flushing of the output buffer occurs.
This may be fixed in a future version.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
daemon version of the <b>&minus;&minus;bwlimit</b>
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;stop-after=MINS</b>,
(<b>&minus;&minus;time-limit=MINS</b>)</p>

<p style="margin-left:18%;">This option tells rsync to stop
copying when the specified number of minutes has
elapsed.</p>

<p style="margin-left:18%; margin-top: 1em">For maximal
flexibility, rsync does not communicate this option to the
remote rsync since it is usually enough that one side of the
connection quits as specified. This allows the
option&rsquo;s use even when only one side of the connection
supports it. You can tell the remote side about the time
limit using <b>&minus;&minus;remote-option</b>
(<b>&minus;M</b>), should the need arise.</p>

<p style="margin-left:18%; margin-top: 1em">The
<b>&minus;&minus;time-limit</b> version of this option is
deprecated.</p>


<p style="margin-left:9%;"><b>&minus;&minus;stop-at=y-m-dTh:m</b></p>

<p style="margin-left:18%;">This option tells rsync to stop
copying when the specified point in time has been reached.
The date &amp; time can be fully specified in a numeric
format of year-month-dayThour:minute (e.g. 2000-12-31T23:59)
in the local timezone. You may choose to separate the date
numbers using slashes instead of dashes.</p>

<p style="margin-left:18%; margin-top: 1em">The value can
also be abbreviated in a variety of ways, such as specifying
a 2-digit year and/or leaving off various values. In all
cases, the value will be taken to be the next possible point
in time where the supplied information matches. If the value
specifies the current time or a past time, rsync exits with
an error.</p>

<p style="margin-left:18%; margin-top: 1em">For example,
&quot;1-30&quot; specifies the next January 30th (at
midnight local time), &quot;14:00&quot; specifies the next 2
P.M., &quot;1&quot; specifies the next 1st of the month at
midnight, &quot;31&quot; specifies the next month where we
can stop on its 31st day, and &quot;:59&quot; specifies the
next 59th minute after the hour.</p>

<p style="margin-left:18%; margin-top: 1em">For maximal
flexibility, rsync does not communicate this option to the
remote rsync since it is usually enough that one side of the
connection quits as specified. This allows the
option&rsquo;s use even when only one side of the connection
supports it. You can tell the remote side about the time
limit using <b>&minus;&minus;remote-option</b>
(<b>&minus;M</b>), should the need arise. Do keep in mind
that the remote host may have a different default timezone
than your local host.</p>

<p style="margin-left:9%;"><b>&minus;&minus;fsync</b></p>

<p style="margin-left:18%;">Cause the receiving side to
fsync each finished file. This may slow down the transfer,
but can help to provide peace of mind when updating critical
files.</p>


<p style="margin-left:9%;"><b>&minus;&minus;write-batch=FILE</b></p>

<p style="margin-left:18%;">Record a file that can later be
applied to another identical destination with
<b>&minus;&minus;read-batch</b>. See the &quot;BATCH
MODE&quot; section for details, and also the
<b>&minus;&minus;only-write-batch</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">This option
overrides the negotiated checksum &amp; compress lists and
always negotiates a choice based on old-school md5/md4/zlib
choices. If you want a more modern choice, use the
<b>&minus;&minus;checksum-choice</b>
(<b>&minus;&minus;cc</b>) and/or
<b>&minus;&minus;compress-choice</b>
(<b>&minus;&minus;zc</b>) options.</p>


<p style="margin-left:9%;"><b>&minus;&minus;only-write-batch=FILE</b></p>

<p style="margin-left:18%;">Works like
<b>&minus;&minus;write-batch</b>, except that no updates are
made on the destination system when creating the batch. This
lets you transport the changes to the destination system via
some other means and then apply the changes via
<b>&minus;&minus;read-batch</b>.</p>

<p style="margin-left:18%; margin-top: 1em">Note that you
can feel free to write the batch directly to some portable
media: if this media fills to capacity before the end of the
transfer, you can just apply that partial transfer to the
destination and repeat the whole process to get the rest of
the changes (as long as you don&rsquo;t mind a partially
updated destination system while the multi-update cycle is
happening).</p>

<p style="margin-left:18%; margin-top: 1em">Also note that
you only save bandwidth when pushing changes to a remote
system because this allows the batched data to be diverted
from the sender into the batch file without having to flow
over the wire to the receiver (when pulling, the sender is
remote, and thus can&rsquo;t write the batch).</p>


<p style="margin-left:9%;"><b>&minus;&minus;read-batch=FILE</b></p>

<p style="margin-left:18%;">Apply all of the changes stored
in FILE, a file previously generated by
<b>&minus;&minus;write-batch</b>. If <i>FILE</i> is
<b>&minus;</b>, the batch data will be read from standard
input. See the &quot;BATCH MODE&quot; section for
details.</p>


<p style="margin-left:9%;"><b>&minus;&minus;protocol=NUM</b></p>

<p style="margin-left:18%;">Force an older protocol version
to be used. This is useful for creating a batch file that is
compatible with an older version of rsync. For instance, if
rsync 2.6.4 is being used with the
<b>&minus;&minus;write-batch</b> option, but rsync 2.6.3 is
what will be used to run the <b>&minus;&minus;read-batch</b>
option, you should use &quot;&minus;&minus;protocol=28&quot;
when creating the batch file to force the older protocol
version to be used in the batch file (assuming you
can&rsquo;t upgrade the rsync on the reading system).</p>


<p style="margin-left:9%;"><b>&minus;&minus;iconv=CONVERT_SPEC</b></p>

<p style="margin-left:18%;">Rsync can convert filenames
between character sets using this option. Using a
CONVERT_SPEC of &quot;.&quot; tells rsync to look up the
default character-set via the locale setting. Alternately,
you can fully specify what conversion to do by giving a
local and a remote charset separated by a comma in the order
<b>&minus;&minus;iconv=LOCAL,REMOTE</b>, e.g.
<b>&minus;&minus;iconv=utf8,iso88591</b>. This order ensures
that the option will stay the same whether you&rsquo;re
pushing or pulling files. Finally, you can specify either
<b>&minus;&minus;no-iconv</b> or a CONVERT_SPEC of
&quot;&minus;&quot; to turn off any conversion. The default
setting of this option is site-specific, and can also be
affected via the <b>RSYNC_ICONV</b> environment
variable.</p>

<p style="margin-left:18%; margin-top: 1em">For a list of
what charset names your local iconv library supports, you
can run
&quot;<b>iconv&nbsp;&minus;&minus;list</b>&quot;.</p>

<p style="margin-left:18%; margin-top: 1em">If you specify
the <b>&minus;&minus;secluded-args</b> (<b>&minus;s</b>)
option, rsync will translate the filenames you specify on
the command-line that are being sent to the remote host. See
also the <b>&minus;&minus;files-from</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">Note that rsync
does not do any conversion of names in filter files
(including include/exclude files). It is up to you to ensure
that you&rsquo;re specifying matching rules that can match
on both sides of the transfer. For instance, you can specify
extra include/exclude rules if there are filename
differences on the two sides that need to be accounted
for.</p>

<p style="margin-left:18%; margin-top: 1em">When you pass
an <b>&minus;&minus;iconv</b> option to an rsync daemon that
allows it, the daemon uses the charset specified in its
&quot;charset&quot; configuration parameter regardless of
the remote charset you actually pass. Thus, you may feel
free to specify just the local charset for a daemon transfer
(e.g. <b>&minus;&minus;iconv=utf8</b>).</p>


<p style="margin-left:9%;"><b>&minus;&minus;tr=BAD/GOOD</b></p>

<p style="margin-left:18%;">Transliterates filenames on the
receiver, after the iconv conversion (if any). This can be
used to remove characters illegal on the destination
filesystem. If you use this option, consider saving a
&quot;find . &minus;ls&quot; listing of the source in the
destination to help you determine the original filenames in
case of need.</p>

<p style="margin-left:18%; margin-top: 1em">The argument
consists of a string of characters to remove, optionally
followed by a slash and a string of corresponding characters
with which to replace them. The second string may be
shorter, in which case any leftover characters in the first
string are simply deleted. For example,
<b>&minus;&minus;tr=&rsquo;:\/!&rsquo;</b> replaces colons
with exclamation marks and deletes backslashes. Slashes
cannot be transliterated because it would cause havoc.</p>

<p style="margin-left:9%;"><b>&minus;&minus;ipv4</b>,
<b>&minus;4</b> or <b>&minus;&minus;ipv6</b>,
<b>&minus;6</b></p>

<p style="margin-left:18%;">Tells rsync to prefer IPv4/IPv6
when creating sockets or running ssh. This affects sockets
that rsync has direct control over, such as the outgoing
socket when directly contacting an rsync daemon, as well as
the forwarding of the <b>&minus;4</b> or <b>&minus;6</b>
option to ssh when rsync can deduce that ssh is being used
as the remote shell. For other remote shells you&rsquo;ll
need to specify the
&quot;<b>&minus;&minus;rsh&nbsp;SHELL&nbsp;&minus;4</b>&quot;
option directly (or whatever IPv4/IPv6 hint options it
uses).</p>

<p style="margin-left:18%; margin-top: 1em">See also the
daemon version of these options.</p>

<p style="margin-left:18%; margin-top: 1em">If rsync was
compiled without support for IPv6, the
<b>&minus;&minus;ipv6</b> option will have no effect. The
<b>rsync&nbsp;&minus;&minus;version</b> output will contain
&quot;<b>no&nbsp;IPv6</b>&quot; if is the case.</p>


<p style="margin-left:9%;"><b>&minus;&minus;checksum-seed=NUM</b></p>

<p style="margin-left:18%;">Set the checksum seed to the
integer NUM. This 4 byte checksum seed is included in each
block and MD4 file checksum calculation (the more modern MD5
file checksums don&rsquo;t use a seed). By default the
checksum seed is generated by the server and defaults to the
current <b>time</b>(). This option is used to set a specific
checksum seed, which is useful for applications that want
repeatable block checksums, or in the case where the user
wants a more random checksum seed. Setting NUM to 0 causes
rsync to use the default of <b>time</b>() for checksum
seed.</p>

<h2>DAEMON OPTIONS
<a name="DAEMON OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The options
allowed when starting an rsync daemon are as follows:
<b><br>
&minus;&minus;daemon</b></p>

<p style="margin-left:18%;">This tells rsync that it is to
run as a daemon. The daemon you start running may be
accessed using an rsync client using the <b>host::module</b>
or <b>rsync://host/module/</b> syntax.</p>

<p style="margin-left:18%; margin-top: 1em">If standard
input is a socket then rsync will assume that it is being
run via inetd, otherwise it will detach from the current
terminal and become a background daemon. The daemon will
read the config file (rsyncd.conf) on each connect made by a
client and respond to requests accordingly.</p>

<p style="margin-left:18%; margin-top: 1em">See the
<b>rsyncd.conf</b>(5) manpage for more details.</p>


<p style="margin-left:9%;"><b>&minus;&minus;address=ADDRESS</b></p>

<p style="margin-left:18%;">By default rsync will bind to
the wildcard address when run as a daemon with the
<b>&minus;&minus;daemon</b> option. The
<b>&minus;&minus;address</b> option allows you to specify a
specific IP address (or hostname) to bind to. This makes
virtual hosting possible in conjunction with the
<b>&minus;&minus;config</b> option.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
address global option in the rsyncd.conf manpage and the
client version of the <b>&minus;&minus;address</b>
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;bwlimit=RATE</b></p>

<p style="margin-left:18%;">This option allows you to
specify the maximum transfer rate for the data the daemon
sends over the socket. The client can still specify a
smaller <b>&minus;&minus;bwlimit</b> value, but no larger
value will be allowed.</p>

<p style="margin-left:18%; margin-top: 1em">See the client
version of the <b>&minus;&minus;bwlimit</b> option for some
extra details.</p>


<p style="margin-left:9%;"><b>&minus;&minus;config=FILE</b></p>

<p style="margin-left:18%;">This specifies an alternate
config file than the default. This is only relevant when
<b>&minus;&minus;daemon</b> is specified. The default is
/etc/rsyncd.conf unless the daemon is running over a remote
shell program and the remote user is not the super-user; in
that case the default is rsyncd.conf in the current
directory (typically $HOME).</p>


<p style="margin-left:9%;"><b>&minus;&minus;dparam=OVERRIDE</b>,
<b>&minus;M</b></p>

<p style="margin-left:18%;">This option can be used to set
a daemon-config parameter when starting up rsync in daemon
mode. It is equivalent to adding the parameter at the end of
the global settings prior to the first module&rsquo;s
definition. The parameter names can be specified without
spaces, if you so desire. For instance:</p>

<p style="margin-left:23%; margin-top: 1em">rsync --daemon
-M pidfile=/path/rsync.pid</p>


<p style="margin-left:9%;"><b>&minus;&minus;no-detach</b></p>

<p style="margin-left:18%;">When running as a daemon, this
option instructs rsync to not detach itself and become a
background process. This option is required when running as
a service on Cygwin, and may also be useful when rsync is
supervised by a program such as <b>daemontools</b> or
AIX&rsquo;s <b>System&nbsp;Resource&nbsp;Controller</b>.
<b>&minus;&minus;no-detach</b> is also recommended when
rsync is run under a debugger. This option has no effect if
rsync is run from inetd or sshd.</p>


<p style="margin-left:9%;"><b>&minus;&minus;port=PORT</b></p>

<p style="margin-left:18%;">This specifies an alternate TCP
port number for the daemon to listen on rather than the
default of 873.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
client version of the <b>&minus;&minus;port</b> option and
the port global setting in the rsyncd.conf manpage.</p>


<p style="margin-left:9%;"><b>&minus;&minus;log-file=FILE</b></p>

<p style="margin-left:18%;">This option tells the rsync
daemon to use the given log-file name instead of using the
&quot;<b>log&nbsp;file</b>&quot; setting in the config
file.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
client version of the <b>&minus;&minus;log-file</b>
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;log-file-format=FORMAT</b></p>

<p style="margin-left:18%;">This option tells the rsync
daemon to use the given FORMAT string instead of using the
&quot;<b>log&nbsp;format</b>&quot; setting in the config
file. It also enables
&quot;<b>transfer&nbsp;logging</b>&quot; unless the string
is empty, in which case transfer logging is turned off.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
client version of the <b>&minus;&minus;log-file-format</b>
option.</p>


<p style="margin-left:9%;"><b>&minus;&minus;sockopts</b></p>

<p style="margin-left:18%;">This overrides the
<b>socket&nbsp;options</b> setting in the rsyncd.conf file
and has the same syntax.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
client version of the <b>&minus;&minus;sockopts</b>
option.</p>

<p style="margin-left:9%;"><b>&minus;&minus;verbose</b>,
<b>&minus;v</b></p>

<p style="margin-left:18%;">This option increases the
amount of information the daemon logs during its startup
phase. After the client connects, the daemon&rsquo;s
verbosity level will be controlled by the options that the
client used and the &quot;<b>max&nbsp;verbosity</b>&quot;
setting in the module&rsquo;s config section.</p>

<p style="margin-left:18%; margin-top: 1em">See also the
client version of the <b>&minus;&minus;verbose</b>
option.</p>

<p style="margin-left:9%;"><b>&minus;&minus;ipv4</b>,
<b>&minus;4</b> or <b>&minus;&minus;ipv6</b>,
<b>&minus;6</b></p>

<p style="margin-left:18%;">Tells rsync to prefer IPv4/IPv6
when creating the incoming sockets that the rsync daemon
will use to listen for connections. One of these options may
be required in older versions of Linux to work around an
IPv6 bug in the kernel (if you see an &quot;address already
in use&quot; error when nothing else is using the port, try
specifying <b>&minus;&minus;ipv6</b> or
<b>&minus;&minus;ipv4</b> when starting the daemon).</p>

<p style="margin-left:18%; margin-top: 1em">See also the
client version of these options.</p>

<p style="margin-left:18%; margin-top: 1em">If rsync was
compiled without support for IPv6, the
<b>&minus;&minus;ipv6</b> option will have no effect. The
<b>rsync&nbsp;&minus;&minus;version</b> output will contain
&quot;<b>no&nbsp;IPv6</b>&quot; if is the case.</p>

<p style="margin-left:9%;"><b>&minus;&minus;help</b>,
<b>&minus;h</b></p>

<p style="margin-left:18%;">When specified after
<b>&minus;&minus;daemon</b>, print a short help page
describing the options available for starting an rsync
daemon.</p>

<h2>FILTER RULES
<a name="FILTER RULES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The filter rules
allow for custom control of several aspects of how files are
handled:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Control which files the sending side puts into the file
list that describes the transfer hierarchy</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Control which files the receiving side protects from
deletion when the file is not in the sender&rsquo;s file
list</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Control which extended attribute names are skipped when
copying xattrs</p></td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">The rules are
either directly specified via option arguments or they can
be read in from one or more files. The filter-rule files can
even be a part of the hierarchy of files being copied,
affecting different parts of the tree in different ways.</p>

<h3>SIMPLE INCLUDE/EXCLUDE RULES
<a name="SIMPLE INCLUDE/EXCLUDE RULES"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">We will first
cover the basics of how include &amp; exclude rules affect
what files are transferred, ignoring any deletion
side-effects. Filter rules mainly affect the contents of
directories that rsync is &quot;recursing&quot; into, but
they can also affect a top-level item in the transfer that
was specified as a argument.</p>

<p style="margin-left:9%; margin-top: 1em">The default for
any unmatched file/dir is for it to be included in the
transfer, which puts the file/dir into the sender&rsquo;s
file list. The use of an exclude rule causes one or more
matching files/dirs to be left out of the sender&rsquo;s
file list. An include rule can be used to limit the effect
of an exclude rule that is matching too many files.</p>

<p style="margin-left:9%; margin-top: 1em">The order of the
rules is important because the first rule that matches is
the one that takes effect. Thus, if an early rule excludes a
file, no include rule that comes after it can have any
effect. This means that you must place any include overrides
somewhere prior to the exclude that it is intended to
limit.</p>

<p style="margin-left:9%; margin-top: 1em">When a directory
is excluded, all its contents and sub-contents are also
excluded. The sender doesn&rsquo;t scan through any of it at
all, which can save a lot of time when skipping large
unneeded sub-trees.</p>

<p style="margin-left:9%; margin-top: 1em">It is also
important to understand that the include/exclude rules are
applied to every file and directory that the sender is
recursing into. Thus, if you want a particular deep file to
be included, you have to make sure that none of the
directories that must be traversed on the way down to that
file are excluded or else the file will never be discovered
to be included. As an example, if the directory
&quot;<b>a/path</b>&quot; was given as a transfer argument
and you want to ensure that the file
&quot;<b>a/path/down/deep/wanted.txt</b>&quot; is a part of
the transfer, then the sender must not exclude the
directories &quot;<b>a/path</b>&quot;,
&quot;<b>a/path/down</b>&quot;, or
&quot;<b>a/path/down/deep</b>&quot; as it makes it way
scanning through the file tree.</p>

<p style="margin-left:9%; margin-top: 1em">When you are
working on the rules, it can be helpful to ask rsync to tell
you what is being excluded/included and why. Specifying
<b>&minus;&minus;debug=FILTER</b> or (when pulling files)
<b>&minus;M&minus;&minus;debug=FILTER</b> turns on level 1
of the FILTER debug information that will output a message
any time that a file or directory is included or excluded
and which rule it matched. Beginning in 3.2.4 it will also
warn if a filter rule has trailing whitespace, since an
exclude of &quot;foo&nbsp;&quot; (with a trailing space)
will not exclude a file named &quot;foo&quot;.</p>

<p style="margin-left:9%; margin-top: 1em">Exclude and
include rules can specify wildcard PATTERN MATCHING RULES
(similar to shell wildcards) that allow you to match things
like a file suffix or a portion of a filename.</p>

<p style="margin-left:9%; margin-top: 1em">A rule can be
limited to only affecting a directory by putting a trailing
slash onto the filename.</p>

<h3>SIMPLE INCLUDE/EXCLUDE EXAMPLE
<a name="SIMPLE INCLUDE/EXCLUDE EXAMPLE"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">With the
following file tree created on the sending side:</p>

<p style="margin-left:14%; margin-top: 1em">mkdir x/ <br>
touch x/file.txt <br>
mkdir x/y/ <br>
touch x/y/file.txt <br>
touch x/y/zzz.txt <br>
mkdir x/z/ <br>
touch x/z/file.txt</p>

<p style="margin-left:9%; margin-top: 1em">Then the
following rsync command will transfer the file
&quot;<b>x/y/file.txt</b>&quot; and the directories needed
to hold it, resulting in the path
&quot;<b>/tmp/x/y/file.txt</b>&quot; existing on the remote
host:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -ai
-f&rsquo;+ x/&rsquo; -f&rsquo;+ x/y/&rsquo; -f&rsquo;+
x/y/file.txt&rsquo; -f&rsquo;- *&rsquo; x host:/tmp/</p>

<p style="margin-left:9%; margin-top: 1em">Aside: this copy
could also have been accomplished using the <b>&minus;R</b>
option (though the 2 commands behave differently if
deletions are enabled):</p>

<p style="margin-left:14%; margin-top: 1em">rsync -aiR
x/y/file.txt host:/tmp/</p>

<p style="margin-left:9%; margin-top: 1em">The following
command does not need an include of the &quot;x&quot;
directory because it is not a part of the transfer (note the
trailing slash). Running this command would copy just
&quot;<b>/tmp/x/file.txt</b>&quot; because the &quot;y&quot;
and &quot;z&quot; dirs get excluded:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -ai
-f&rsquo;+ file.txt&rsquo; -f&rsquo;- *&rsquo; x/
host:/tmp/x/</p>

<p style="margin-left:9%; margin-top: 1em">This command
would omit the zzz.txt file while copying &quot;x&quot; and
everything else it contains:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -ai
-f&rsquo;- zzz.txt&rsquo; x host:/tmp/</p>

<h3>FILTER RULES WHEN DELETING
<a name="FILTER RULES WHEN DELETING"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">By default the
include &amp; exclude filter rules affect both the sender
(as it creates its file list) and the receiver (as it
creates its file lists for calculating deletions). If no
delete option is in effect, the receiver skips creating the
delete-related file lists. This two-sided default can be
manually overridden so that you are only specifying sender
rules or receiver rules, as described in the FILTER RULES IN
DEPTH section.</p>

<p style="margin-left:9%; margin-top: 1em">When deleting,
an exclude protects a file from being removed on the
receiving side while an include overrides that protection
(putting the file at risk of deletion). The default is for a
file to be at risk&nbsp;&minus;&minus; its safety depends on
it matching a corresponding file from the sender.</p>

<p style="margin-left:9%; margin-top: 1em">An example of
the two-sided exclude effect can be illustrated by the
copying of a C development directory between 2 systems. When
doing a touch-up copy, you might want to skip copying the
built executable and the <b>.o</b> files (sender hide) so
that the receiving side can build their own and not lose any
object files that are already correct (receiver protect).
For instance:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -ai --del
-f&rsquo;- *.o&rsquo; -f&rsquo;- cmd&rsquo; src
host:/dest/</p>

<p style="margin-left:9%; margin-top: 1em">Note that using
<b>&minus;f&rsquo;&minus;p&nbsp;*.o&rsquo;</b> is even
better than <b>&minus;f&rsquo;&minus;&nbsp;*.o&rsquo;</b> if
there is a chance that the directory structure may have
changed. The &quot;p&quot; modifier is discussed in FILTER
RULE MODIFIERS.</p>

<p style="margin-left:9%; margin-top: 1em">One final note,
if your shell doesn&rsquo;t mind unexpanded wildcards, you
could simplify the typing of the filter options by using an
underscore in place of the space and leaving off the quotes.
For instance,
<b>&minus;f&nbsp;&minus;_*.o&nbsp;&minus;f&nbsp;&minus;_cmd</b>
(and similar) could be used instead of the filter options
above.</p>

<h3>FILTER RULES IN DEPTH
<a name="FILTER RULES IN DEPTH"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">Rsync supports
old-style include/exclude rules and new-style filter rules.
The older rules are specified using
<b>&minus;&minus;include</b> and
<b>&minus;&minus;exclude</b> as well as the
<b>&minus;&minus;include-from</b> and
<b>&minus;&minus;exclude-from</b>. These are limited in
behavior but they don&rsquo;t require a &quot;&minus;&quot;
or &quot;+&quot; prefix. An old-style exclude rule is turned
into a &quot;<b>&minus;&nbsp;name</b>&quot; filter rule
(with no modifiers) and an old-style include rule is turned
into a &quot;<b>+&nbsp;name</b>&quot; filter rule (with no
modifiers).</p>

<p style="margin-left:9%; margin-top: 1em">Rsync builds an
ordered list of filter rules as specified on the
command-line and/or read-in from files. New style filter
rules have the following syntax:</p>

<p style="margin-left:14%; margin-top: 1em">RULE
[PATTERN_OR_FILENAME] <br>
RULE,MODIFIERS [PATTERN_OR_FILENAME]</p>

<p style="margin-left:9%; margin-top: 1em">You have your
choice of using either short or long RULE names, as
described below. If you use a short-named rule, the
&rsquo;,&rsquo; separating the RULE from the MODIFIERS is
optional. The PATTERN or FILENAME that follows (when
present) must come after either a single space or an
underscore (_). Any additional spaces and/or underscores are
considered to be a part of the pattern name. Here are the
available rule prefixes: <b><br>
exclude,&nbsp;&rsquo;&minus;&rsquo;</b></p>

<p style="margin-left:18%;">specifies an exclude pattern
that (by default) is both a <b>hide</b> and a
<b>protect</b>.</p>


<p style="margin-left:9%;"><b>include,&nbsp;&rsquo;+&rsquo;</b></p>

<p style="margin-left:18%;">specifies an include pattern
that (by default) is both a <b>show</b> and a
<b>risk</b>.</p>


<p style="margin-left:9%;"><b>merge,&nbsp;&rsquo;.&rsquo;</b></p>

<p style="margin-left:18%;">specifies a merge-file on the
client side to read for more rules.</p>


<p style="margin-left:9%;"><b>dir-merge,&nbsp;&rsquo;:&rsquo;</b></p>

<p style="margin-left:18%;">specifies a per-directory
merge-file. Using this kind of filter rule requires that you
trust the sending side&rsquo;s filter checking, so it has
the side-effect mentioned under the
<b>&minus;&minus;trust-sender</b> option.</p>


<p style="margin-left:9%;"><b>hide,&nbsp;&rsquo;H&rsquo;</b></p>

<p style="margin-left:18%;">specifies a pattern for hiding
files from the transfer. Equivalent to a sender-only
exclude, so <b>&minus;f&rsquo;H&nbsp;foo&rsquo;</b> could
also be specified as
<b>&minus;f&rsquo;&minus;s&nbsp;foo&rsquo;</b>.</p>


<p style="margin-left:9%;"><b>show,&nbsp;&rsquo;S&rsquo;</b></p>

<p style="margin-left:18%;">files that match the pattern
are not hidden. Equivalent to a sender-only include, so
<b>&minus;f&rsquo;S&nbsp;foo&rsquo;</b> could also be
specified as <b>&minus;f&rsquo;+s&nbsp;foo&rsquo;</b>.</p>


<p style="margin-left:9%;"><b>protect,&nbsp;&rsquo;P&rsquo;</b></p>

<p style="margin-left:18%;">specifies a pattern for
protecting files from deletion. Equivalent to a
receiver-only exclude, so
<b>&minus;f&rsquo;P&nbsp;foo&rsquo;</b> could also be
specified as
<b>&minus;f&rsquo;&minus;r&nbsp;foo&rsquo;</b>.</p>


<p style="margin-left:9%;"><b>risk,&nbsp;&rsquo;R&rsquo;</b></p>

<p style="margin-left:18%;">files that match the pattern
are not protected. Equivalent to a receiver-only include, so
<b>&minus;f&rsquo;R&nbsp;foo&rsquo;</b> could also be
specified as <b>&minus;f&rsquo;+r&nbsp;foo&rsquo;</b>.</p>


<p style="margin-left:9%;"><b>clear,&nbsp;&rsquo;!&rsquo;</b></p>

<p style="margin-left:18%;">clears the current
include/exclude list (takes no arg)</p>

<p style="margin-left:9%; margin-top: 1em">When rules are
being read from a file (using merge or dir-merge), empty
lines are ignored, as are whole-line comments that start
with a &rsquo;<b>#</b>&rsquo; (filename rules that contain a
hash character are unaffected).</p>

<p style="margin-left:9%; margin-top: 1em">Note also that
the <b>&minus;&minus;filter</b>,
<b>&minus;&minus;include</b>, and
<b>&minus;&minus;exclude</b> options take one rule/pattern
each. To add multiple ones, you can repeat the options on
the command-line, use the merge-file syntax of the
<b>&minus;&minus;filter</b> option, or the
<b>&minus;&minus;include-from</b> /
<b>&minus;&minus;exclude-from</b> options.</p>

<h3>PATTERN MATCHING RULES
<a name="PATTERN MATCHING RULES"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">Most of the
rules mentioned above take an argument that specifies what
the rule should match. If rsync is recursing through a
directory hierarchy, keep in mind that each pattern is
matched against the name of every directory in the descent
path as rsync finds the filenames to send.</p>

<p style="margin-left:9%; margin-top: 1em">The matching
rules for the pattern argument take several forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>If a pattern contains a <b>/</b> (not counting a
trailing slash) or a &quot;<b>**</b>&quot; (which can match
a slash), then the pattern is matched against the full
pathname, including any leading directories within the
transfer. If the pattern doesn&rsquo;t contain a
(non-trailing) <b>/</b> or a &quot;<b>**</b>&quot;, then it
is matched only against the final component of the filename
or pathname. For example, <b>foo</b> means that the final
path component must be &quot;foo&quot; while <b>foo/bar</b>
would match the last 2 elements of the path (as long as both
elements are within the transfer).</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A pattern that ends with a <b>/</b> only matches a
directory, not a regular file, symlink, or device.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A pattern that starts with a <b>/</b> is anchored to the
start of the transfer path instead of the end. For example,
<b>/foo/**</b> or <b>/foo/bar/**</b> match only leading
elements in the path. If the rule is read from a
per-directory filter file, the transfer path being matched
will begin at the level of the filter file instead of the
top of the transfer. See the section on ANCHORING
INCLUDE/EXCLUDE PATTERNS for a full discussion of how to
specify a pattern that matches at the root of the
transfer.</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Rsync chooses
between doing a simple string match and wildcard matching by
checking if the pattern contains one of these three wildcard
characters: &rsquo;<b>*</b>&rsquo;, &rsquo;<b>?</b>&rsquo;,
and &rsquo;<b>[</b>&rsquo; :</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="82%">


<p style="margin-top: 1em">a &rsquo;<b>?</b>&rsquo; matches
any single character except a slash (<b>/</b>).</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>a &rsquo;<b>*</b>&rsquo; matches zero or more non-slash
characters.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>a &rsquo;<b>**</b>&rsquo; matches zero or more
characters, including slashes.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>a &rsquo;<b>[</b>&rsquo; introduces a character class,
such as <b>[a-z]</b> or <b>[[:alpha:]]</b>, that must match
one character.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>a trailing <b>***</b> in the pattern is a shorthand that
allows you to match a directory and all its contents using a
single rule. For example, specifying
&quot;<b>dir_name/***</b>&quot; will match both the
&quot;dir_name&quot; directory (as if
&quot;<b>dir_name/</b>&quot; had been specified) and
everything in the directory (as if
&quot;<b>dir_name/**</b>&quot; had been specified).</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>a backslash can be used to escape a wildcard character,
but it is only interpreted as an escape character if at
least one wildcard character is present in the match
pattern. For instance, the pattern
&quot;<b>foo\bar</b>&quot; matches that single backslash
literally, while the pattern &quot;<b>foo\bar*</b>&quot;
would need to be changed to &quot;<b>foo\\bar*</b>&quot; to
avoid the &quot;<b>\b</b>&quot; becoming just
&quot;b&quot;.</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Here are some
examples of exclude/include matching:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="82%">


<p style="margin-top: 1em">Option
<b>&minus;f&rsquo;&minus;&nbsp;*.o&rsquo;</b> would exclude
all filenames ending with <b>.o</b></p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Option <b>&minus;f&rsquo;&minus;&nbsp;/foo&rsquo;</b>
would exclude a file (or directory) named foo in the
transfer-root directory</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Option <b>&minus;f&rsquo;&minus;&nbsp;foo/&rsquo;</b>
would exclude any directory named foo</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Option
<b>&minus;f&rsquo;&minus;&nbsp;foo/*/bar&rsquo;</b> would
exclude any file/dir named bar which is at two levels below
a directory named foo (if foo is in the transfer)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Option
<b>&minus;f&rsquo;&minus;&nbsp;/foo/**/bar&rsquo;</b> would
exclude any file/dir named bar that was two or more levels
below a top-level directory named foo (note that /foo/bar is
<b>not</b> excluded by this)</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Options
<b>&minus;f&rsquo;+&nbsp;*/&rsquo;&nbsp;&minus;f&rsquo;+&nbsp;*.c&rsquo;&nbsp;&minus;f&rsquo;&minus;&nbsp;*&rsquo;</b>
would include all directories and .c source files but
nothing else</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>Options
<b>&minus;f&rsquo;+&nbsp;foo/&rsquo;&nbsp;&minus;f&rsquo;+&nbsp;foo/bar.c&rsquo;&nbsp;&minus;f&rsquo;&minus;&nbsp;*&rsquo;</b>
would include only the foo directory and foo/bar.c (the foo
directory must be explicitly included or it would be
excluded by the &quot;<b>&minus;&nbsp;*</b>&quot;)</p></td></tr>
</table>

<h3>FILTER RULE MODIFIERS
<a name="FILTER RULE MODIFIERS"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">The following
modifiers are accepted after an include (+) or exclude
(&minus;) rule:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="82%">


<p style="margin-top: 1em">A <b>/</b> specifies that the
include/exclude rule should be matched against the absolute
pathname of the current item. For example,
<b>&minus;f&rsquo;&minus;/&nbsp;/etc/passwd&rsquo;</b> would
exclude the passwd file any time the transfer was sending
files from the &quot;/etc&quot; directory, and
&quot;&minus;/ subdir/foo&quot; would always exclude
&quot;foo&quot; when it is in a dir named
&quot;subdir&quot;, even if &quot;foo&quot; is at the root
of the current transfer.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A <b>!</b> specifies that the include/exclude should
take effect if the pattern fails to match. For instance,
<b>&minus;f&rsquo;&minus;!&nbsp;*/&rsquo;</b> would exclude
all non-directories.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A <b>C</b> is used to indicate that all the global
CVS-exclude rules should be inserted as excludes in place of
the &quot;&minus;C&quot;. No arg should follow.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>An <b>s</b> is used to indicate that the rule applies to
the sending side. When a rule affects the sending side, it
affects what files are put into the sender&rsquo;s file
list. The default is for a rule to affect both sides unless
<b>&minus;&minus;delete-excluded</b> was specified, in which
case default rules become sender-side only. See also the
hide (H) and show (S) rules, which are an alternate way to
specify sending-side includes/excludes.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>An <b>r</b> is used to indicate that the rule applies to
the receiving side. When a rule affects the receiving side,
it prevents files from being deleted. See the <b>s</b>
modifier for more info. See also the protect (P) and risk
(R) rules, which are an alternate way to specify
receiver-side includes/excludes.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A <b>p</b> indicates that a rule is perishable, meaning
that it is ignored in directories that are being deleted.
For instance, the <b>&minus;&minus;cvs-exclude</b>
(<b>&minus;C</b>) option&rsquo;s default rules that exclude
things like &quot;CVS&quot; and &quot;<b>*.o</b>&quot; are
marked as perishable, and will not prevent a directory that
was removed on the source from being deleted on the
destination.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>An <b>x</b> indicates that a rule affects xattr names in
xattr copy/delete operations (and is thus ignored when
matching file/dir names). If no xattr-matching rules are
specified, a default xattr filtering rule is used (see the
<b>&minus;&minus;xattrs</b> option).</p></td></tr>
</table>

<h3>MERGE-FILE FILTER RULES
<a name="MERGE-FILE FILTER RULES"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">You can merge
whole files into your filter rules by specifying either a
merge (.) or a dir-merge (:) filter rule (as introduced in
the FILTER RULES section above).</p>

<p style="margin-left:9%; margin-top: 1em">There are two
kinds of merged files&nbsp;&minus;&minus; single-instance
(&rsquo;.&rsquo;) and per-directory (&rsquo;:&rsquo;). A
single-instance merge file is read one time, and its rules
are incorporated into the filter list in the place of the
&quot;.&quot; rule. For per-directory merge files, rsync
will scan every directory that it traverses for the named
file, merging its contents when the file exists into the
current list of inherited rules. These per-directory rule
files must be created on the sending side because it is the
sending side that is being scanned for the available files
to transfer. These rule files may also need to be
transferred to the receiving side if you want them to affect
what files don&rsquo;t get deleted (see PER-DIRECTORY RULES
AND DELETE below).</p>

<p style="margin-left:9%; margin-top: 1em">Some
examples:</p>

<p style="margin-left:14%; margin-top: 1em">merge
/etc/rsync/default.rules <br>
. /etc/rsync/default.rules <br>
dir-merge .per-dir-filter <br>
dir-merge,n- .non-inherited-per-dir-excludes <br>
:n- .non-inherited-per-dir-excludes</p>

<p style="margin-left:9%; margin-top: 1em">The following
modifiers are accepted after a merge or dir-merge rule:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="82%">


<p style="margin-top: 1em">A <b>&minus;</b> specifies that
the file should consist of only exclude patterns, with no
other rule-parsing except for in-file comments.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A <b>+</b> specifies that the file should consist of
only include patterns, with no other rule-parsing except for
in-file comments.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A <b>C</b> is a way to specify that the file should be
read in a CVS-compatible manner. This turns on
&rsquo;n&rsquo;, &rsquo;w&rsquo;, and &rsquo;&minus;&rsquo;,
but also allows the list-clearing token (!) to be specified.
If no filename is provided, &quot;.cvsignore&quot; is
assumed.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A <b>e</b> will exclude the merge-file name from the
transfer; e.g. &quot;dir-merge,e .rules&quot; is like
&quot;dir-merge .rules&quot; and &quot;&minus;
.rules&quot;.</p> </td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>An <b>n</b> specifies that the rules are not inherited
by subdirectories.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>A <b>w</b> specifies that the rules are word-split on
whitespace instead of the normal line-splitting. This also
turns off comments. Note: the space that separates the
prefix from the rule is treated specially, so &quot;&minus;
foo + bar&quot; is parsed as two rules (assuming that
prefix-parsing wasn&rsquo;t also disabled).</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>You may also specify any of the modifiers for the
&quot;+&quot; or &quot;&minus;&quot; rules (above) in order
to have the rules that are read in from the file default to
having that modifier set (except for the <b>!</b> modifier,
which would not be useful). For instance,
&quot;merge,&minus;/ .excl&quot; would treat the contents of
.excl as absolute-path excludes, while &quot;dir-merge,s
.filt&quot; and &quot;:sC&quot; would each make all their
per-directory rules apply only on the sending side. If the
merge rule specifies sides to affect (via the <b>s</b> or
<b>r</b> modifier or both), then the rules in the file must
not specify sides (via a modifier or a rule prefix such as
<b>hide</b>).</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Per-directory
rules are inherited in all subdirectories of the directory
where the merge-file was found unless the &rsquo;n&rsquo;
modifier was used. Each subdirectory&rsquo;s rules are
prefixed to the inherited per-directory rules from its
parents, which gives the newest rules a higher priority than
the inherited rules. The entire set of dir-merge rules are
grouped together in the spot where the merge-file was
specified, so it is possible to override dir-merge rules via
a rule that got specified earlier in the list of global
rules. When the list-clearing rule (&quot;!&quot;) is read
from a per-directory file, it only clears the inherited
rules for the current merge file.</p>

<p style="margin-left:9%; margin-top: 1em">Another way to
prevent a single rule from a dir-merge file from being
inherited is to anchor it with a leading slash. Anchored
rules in a per-directory merge-file are relative to the
merge-file&rsquo;s directory, so a pattern &quot;/foo&quot;
would only match the file &quot;foo&quot; in the directory
where the dir-merge filter file was found.</p>

<p style="margin-left:9%; margin-top: 1em">Here&rsquo;s an
example filter file which you&rsquo;d specify via
<b>&minus;&minus;filter=&quot;.&nbsp;file&quot;:</b></p>

<p style="margin-left:14%; margin-top: 1em">merge
/home/user/.global-filter <br>
- *.gz <br>
dir-merge .rules <br>
+ *.[ch] <br>
- *.o <br>
- foo*</p>

<p style="margin-left:9%; margin-top: 1em">This will merge
the contents of the /home/user/.global-filter file at the
start of the list and also turns the &quot;.rules&quot;
filename into a per-directory filter file. All rules read in
prior to the start of the directory scan follow the global
anchoring rules (i.e. a leading slash matches at the root of
the transfer).</p>

<p style="margin-left:9%; margin-top: 1em">If a
per-directory merge-file is specified with a path that is a
parent directory of the first transfer directory, rsync will
scan all the parent dirs from that starting point to the
transfer directory for the indicated per-directory file. For
instance, here is a common filter (see <b>&minus;F</b>):</p>


<p style="margin-left:14%; margin-top: 1em">--filter=&rsquo;:
/.rsync-filter&rsquo;</p>

<p style="margin-left:9%; margin-top: 1em">That rule tells
rsync to scan for the file .rsync-filter in all directories
from the root down through the parent directory of the
transfer prior to the start of the normal directory scan of
the file in the directories that are sent as a part of the
transfer. (Note: for an rsync daemon, the root is always the
same as the module&rsquo;s &quot;path&quot;.)</p>

<p style="margin-left:9%; margin-top: 1em">Some examples of
this pre-scanning for per-directory files:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -avF
/src/path/ /dest/dir <br>
rsync -av --filter=&rsquo;: ../../.rsync-filter&rsquo;
/src/path/ /dest/dir <br>
rsync -av --filter=&rsquo;: .rsync-filter&rsquo; /src/path/
/dest/dir</p>

<p style="margin-left:9%; margin-top: 1em">The first two
commands above will look for &quot;.rsync-filter&quot; in
&quot;/&quot; and &quot;/src&quot; before the normal scan
begins looking for the file in &quot;/src/path&quot; and its
subdirectories. The last command avoids the parent-dir scan
and only looks for the &quot;.rsync-filter&quot; files in
each directory that is a part of the transfer.</p>

<p style="margin-left:9%; margin-top: 1em">If you want to
include the contents of a &quot;.cvsignore&quot; in your
patterns, you should use the rule &quot;:C&quot;, which
creates a dir-merge of the .cvsignore file, but parsed in a
CVS-compatible manner. You can use this to affect where the
<b>&minus;&minus;cvs-exclude</b> (<b>&minus;C</b>)
option&rsquo;s inclusion of the per-directory .cvsignore
file gets placed into your rules by putting the
&quot;:C&quot; wherever you like in your filter rules.
Without this, rsync would add the dir-merge rule for the
.cvsignore file at the end of all your other rules (giving
it a lower priority than your command-line rules). For
example:</p>

<p style="margin-left:14%; margin-top: 1em">cat &lt;&lt;EOT
| rsync -avC --filter=&rsquo;. -&rsquo; a/ b <br>
+ foo.o <br>
:C <br>
- *.old <br>
EOT <br>
rsync -avC --include=foo.o -f :C
--exclude=&rsquo;*.old&rsquo; a/ b</p>

<p style="margin-left:9%; margin-top: 1em">Both of the
above rsync commands are identical. Each one will merge all
the per-directory .cvsignore rules in the middle of the list
rather than at the end. This allows their dir-specific rules
to supersede the rules that follow the :C instead of being
subservient to all your rules. To affect the other CVS
exclude rules (i.e. the default list of exclusions, the
contents of $HOME/.cvsignore, and the value of $CVSIGNORE)
you should omit the <b>&minus;C</b> command-line option and
instead insert a &quot;&minus;C&quot; rule into your filter
rules; e.g.
&quot;<b>&minus;&minus;filter=&minus;C</b>&quot;.</p>

<h3>LIST-CLEARING FILTER RULE
<a name="LIST-CLEARING FILTER RULE"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">You can clear
the current include/exclude list by using the &quot;!&quot;
filter rule (as introduced in the FILTER RULES section
above). The &quot;current&quot; list is either the global
list of rules (if the rule is encountered while parsing the
filter options) or a set of per-directory rules (which are
inherited in their own sub-list, so a subdirectory can use
this to clear out the parent&rsquo;s rules).</p>

<h3>ANCHORING INCLUDE/EXCLUDE PATTERNS
<a name="ANCHORING INCLUDE/EXCLUDE PATTERNS"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">As mentioned
earlier, global include/exclude patterns are anchored at the
&quot;root of the transfer&quot; (as opposed to
per-directory patterns, which are anchored at the
merge-file&rsquo;s directory). If you think of the transfer
as a subtree of names that are being sent from sender to
receiver, the transfer-root is where the tree starts to be
duplicated in the destination directory. This root governs
where patterns that start with a / match.</p>

<p style="margin-left:9%; margin-top: 1em">Because the
matching is relative to the transfer-root, changing the
trailing slash on a source path or changing your use of the
<b>&minus;&minus;relative</b> option affects the path you
need to use in your matching (in addition to changing how
much of the file tree is duplicated on the destination
host). The following examples demonstrate this.</p>

<p style="margin-left:9%; margin-top: 1em">Let&rsquo;s say
that we want to match two source files, one with an absolute
path of &quot;/home/me/foo/bar&quot;, and one with a path of
&quot;/home/you/bar/baz&quot;. Here is how the various
command choices differ for a 2-source transfer:</p>

<p style="margin-left:14%; margin-top: 1em">Example cmd:
rsync -a /home/me /home/you /dest <br>
+/- pattern: /me/foo/bar <br>
+/- pattern: /you/bar/baz <br>
Target file: /dest/me/foo/bar <br>
Target file: /dest/you/bar/baz</p>

<p style="margin-left:14%; margin-top: 1em">Example cmd:
rsync -a /home/me/ /home/you/ /dest <br>
+/- pattern: /foo/bar (note missing &quot;me&quot;) <br>
+/- pattern: /bar/baz (note missing &quot;you&quot;) <br>
Target file: /dest/foo/bar <br>
Target file: /dest/bar/baz</p>

<p style="margin-left:14%; margin-top: 1em">Example cmd:
rsync -a --relative /home/me/ /home/you /dest <br>
+/- pattern: /home/me/foo/bar (note full path) <br>
+/- pattern: /home/you/bar/baz (ditto) <br>
Target file: /dest/home/me/foo/bar <br>
Target file: /dest/home/you/bar/baz</p>

<p style="margin-left:14%; margin-top: 1em">Example cmd: cd
/home; rsync -a --relative me/foo you/ /dest <br>
+/- pattern: /me/foo/bar (starts at specified path) <br>
+/- pattern: /you/bar/baz (ditto) <br>
Target file: /dest/me/foo/bar <br>
Target file: /dest/you/bar/baz</p>

<p style="margin-left:9%; margin-top: 1em">The easiest way
to see what name you should filter is to just look at the
output when using <b>&minus;&minus;verbose</b> and put a /
in front of the name (use the <b>&minus;&minus;dry-run</b>
option if you&rsquo;re not yet ready to copy any files).</p>

<h3>PER-DIRECTORY RULES AND DELETE
<a name="PER-DIRECTORY RULES AND DELETE"></a>
</h3>


<p style="margin-left:9%; margin-top: 1em">Without a delete
option, per-directory rules are only relevant on the sending
side, so you can feel free to exclude the merge files
themselves without affecting the transfer. To make this
easy, the &rsquo;e&rsquo; modifier adds this exclude for
you, as seen in these two equivalent commands:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -av
--filter=&rsquo;: .excl&rsquo; --exclude=.excl host:src/dir
/dest <br>
rsync -av --filter=&rsquo;:e .excl&rsquo; host:src/dir
/dest</p>

<p style="margin-left:9%; margin-top: 1em">However, if you
want to do a delete on the receiving side AND you want some
files to be excluded from being deleted, you&rsquo;ll need
to be sure that the receiving side knows what files to
exclude. The easiest way is to include the per-directory
merge files in the transfer and use
<b>&minus;&minus;delete-after</b>, because this ensures that
the receiving side gets all the same exclude rules as the
sending side before it tries to delete anything:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -avF
--delete-after host:src/dir /dest</p>

<p style="margin-left:9%; margin-top: 1em">However, if the
merge files are not a part of the transfer, you&rsquo;ll
need to either specify some global exclude rules (i.e.
specified on the command line), or you&rsquo;ll need to
maintain your own per-directory merge files on the receiving
side. An example of the first is this (assume that the
remote .rules files exclude themselves):</p>

<p style="margin-left:14%; margin-top: 1em">rsync -av
--filter=&rsquo;: .rules&rsquo; --filter=&rsquo;.
/my/extra.rules&rsquo; <br>
--delete host:src/dir /dest</p>

<p style="margin-left:9%; margin-top: 1em">In the above
example the extra.rules file can affect both sides of the
transfer, but (on the sending side) the rules are
subservient to the rules merged from the .rules files
because they were specified after the per-directory merge
rule.</p>

<p style="margin-left:9%; margin-top: 1em">In one final
example, the remote side is excluding the .rsync-filter
files from the transfer, but we want to use our own
.rsync-filter files to control what gets deleted on the
receiving side. To do this we must specifically exclude the
per-directory merge files (so that they don&rsquo;t get
deleted) and then put rules into the local files to control
what else should not get deleted. Like one of these
commands:</p>

<p style="margin-left:14%; margin-top: 1em">rsync -av
--filter=&rsquo;:e /.rsync-filter&rsquo; --delete \ <br>
host:src/dir /dest <br>
rsync -avFF --delete host:src/dir /dest</p>

<h2>TRANSFER RULES
<a name="TRANSFER RULES"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">In addition to
the FILTER RULES that affect the recursive file scans that
generate the file list on the sending and (when deleting)
receiving sides, there are transfer rules. These rules
affect which files the generator decides need to be
transferred without the side effects of an exclude filter
rule. Transfer rules affect only files and never
directories.</p>

<p style="margin-left:9%; margin-top: 1em">Because a
transfer rule does not affect what goes into the
sender&rsquo;s (and receiver&rsquo;s) file list, it cannot
have any effect on which files get deleted on the receiving
side. For example, if the file &quot;foo&quot; is present in
the sender&rsquo;s list but its size is such that it is
omitted due to a transfer rule, the receiving side does not
request the file. However, its presence in the file list
means that a delete pass will not remove a matching file
named &quot;foo&quot; on the receiving side. On the other
hand, a server-side exclude (hide) of the file
&quot;foo&quot; leaves the file out of the server&rsquo;s
file list, and absent a receiver-side exclude (protect) the
receiver will remove a matching file named &quot;foo&quot;
if deletions are requested.</p>

<p style="margin-left:9%; margin-top: 1em">Given that the
files are still in the sender&rsquo;s file list, the
<b>&minus;&minus;prune-empty-dirs</b> option will not judge
a directory as being empty even if it contains only files
that the transfer rules omitted.</p>

<p style="margin-left:9%; margin-top: 1em">Similarly, a
transfer rule does not have any extra effect on which files
are deleted on the receiving side, so setting a maximum file
size for the transfer does not prevent big files from being
deleted.</p>

<p style="margin-left:9%; margin-top: 1em">Examples of
transfer rules include the default &quot;quick check&quot;
algorithm (which compares size &amp; modify time), the
<b>&minus;&minus;update</b> option, the
<b>&minus;&minus;max-size</b> option, the
<b>&minus;&minus;ignore-non-existing</b> option, and a few
others.</p>

<h2>BATCH MODE
<a name="BATCH MODE"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Batch mode can
be used to apply the same set of updates to many identical
systems. Suppose one has a tree which is replicated on a
number of hosts. Now suppose some changes have been made to
this source tree and those changes need to be propagated to
the other hosts. In order to do this using batch mode, rsync
is run with the write-batch option to apply the changes made
to the source tree to one of the destination trees. The
write-batch option causes the rsync client to store in a
&quot;batch file&quot; all the information needed to repeat
this operation against other, identical destination
trees.</p>

<p style="margin-left:9%; margin-top: 1em">Generating the
batch file once saves having to perform the file status,
checksum, and data block generation more than once when
updating multiple destination trees. Multicast transport
protocols can be used to transfer the batch update files in
parallel to many hosts at once, instead of sending the same
data to every host individually.</p>

<p style="margin-left:9%; margin-top: 1em">To apply the
recorded changes to another destination tree, run rsync with
the read-batch option, specifying the name of the same batch
file, and the destination tree. Rsync updates the
destination tree using the information stored in the batch
file.</p>

<p style="margin-left:9%; margin-top: 1em">For your
convenience, a script file is also created when the
write-batch option is used: it will be named the same as the
batch file with &quot;.sh&quot; appended. This script file
contains a command-line suitable for updating a destination
tree using the associated batch file. It can be executed
using a Bourne (or Bourne-like) shell, optionally passing in
an alternate destination tree pathname which is then used
instead of the original destination path. This is useful
when the destination tree path on the current host differs
from the one used to create the batch file.</p>

<p style="margin-left:9%; margin-top: 1em">Examples:</p>

<p style="margin-left:14%; margin-top: 1em">$ rsync
--write-batch=foo -a host:/source/dir/ /adest/dir/ <br>
$ scp foo* remote: <br>
$ ssh remote ./foo.sh /bdest/dir/</p>

<p style="margin-left:14%; margin-top: 1em">$ rsync
--write-batch=foo -a /source/dir/ /adest/dir/ <br>
$ ssh remote rsync --read-batch=- -a /bdest/dir/ &lt;foo</p>

<p style="margin-left:9%; margin-top: 1em">In these
examples, rsync is used to update /adest/dir/ from
/source/dir/ and the information to repeat this operation is
stored in &quot;foo&quot; and &quot;foo.sh&quot;. The host
&quot;remote&quot; is then updated with the batched data
going into the directory /bdest/dir. The differences between
the two examples reveals some of the flexibility you have in
how you deal with batches:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="82%">


<p style="margin-top: 1em">The first example shows that the
initial copy doesn&rsquo;t have to be
local&nbsp;&minus;&minus; you can push or pull data to/from
a remote host using either the remote-shell syntax or rsync
daemon syntax, as desired.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>The first example uses the created &quot;foo.sh&quot;
file to get the right rsync options when running the
read-batch command on the remote host.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>The second example reads the batch data via standard
input so that the batch file doesn&rsquo;t need to be copied
to the remote machine first. This example avoids the foo.sh
script because it needed to use a modified
<b>&minus;&minus;read-batch</b> option, but you could edit
the script file if you wished to make use of it (just be
sure that no other option is trying to use standard input,
such as the <b>&minus;&minus;exclude-from=&minus;</b>
option).</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Caveats:</p>

<p style="margin-left:9%; margin-top: 1em">The read-batch
option expects the destination tree that it is updating to
be identical to the destination tree that was used to create
the batch update fileset. When a difference between the
destination trees is encountered the update might be
discarded with a warning (if the file appears to be
up-to-date already) or the file-update may be attempted and
then, if the file fails to verify, the update discarded with
an error. This means that it should be safe to re-run a
read-batch operation if the command got interrupted. If you
wish to force the batched-update to always be attempted
regardless of the file&rsquo;s size and date, use the
<b>&minus;I</b> option (when reading the batch). If an error
occurs, the destination tree will probably be in a partially
updated state. In that case, rsync can be used in its
regular (non-batch) mode of operation to fix up the
destination tree.</p>

<p style="margin-left:9%; margin-top: 1em">The rsync
version used on all destinations must be at least as new as
the one used to generate the batch file. Rsync will die with
an error if the protocol version in the batch file is too
new for the batch-reading rsync to handle. See also the
<b>&minus;&minus;protocol</b> option for a way to have the
creating rsync generate a batch file that an older rsync can
understand. (Note that batch files changed format in version
2.6.3, so mixing versions older than that with newer
versions will not work.)</p>

<p style="margin-left:9%; margin-top: 1em">When reading a
batch file, rsync will force the value of certain options to
match the data in the batch file if you didn&rsquo;t set
them to the same as the batch-writing command. Other options
can (and should) be changed. For instance
<b>&minus;&minus;write-batch</b> changes to
<b>&minus;&minus;read-batch</b>,
<b>&minus;&minus;files-from</b> is dropped, and the
<b>&minus;&minus;filter</b> / <b>&minus;&minus;include</b> /
<b>&minus;&minus;exclude</b> options are not needed unless
one of the <b>&minus;&minus;delete</b> options is
specified.</p>

<p style="margin-left:9%; margin-top: 1em">The code that
creates the BATCH.sh file transforms any
filter/include/exclude options into a single list that is
appended as a &quot;here&quot; document to the shell script
file. An advanced user can use this to modify the exclude
list if a change in what gets deleted by
<b>&minus;&minus;delete</b> is desired. A normal user can
ignore this detail and just use the shell script as an easy
way to run the appropriate <b>&minus;&minus;read-batch</b>
command for the batched data.</p>

<p style="margin-left:9%; margin-top: 1em">The original
batch mode in rsync was based on &quot;rsync+&quot;, but the
latest version uses a new implementation.</p>

<h2>SYMBOLIC LINKS
<a name="SYMBOLIC LINKS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Three basic
behaviors are possible when rsync encounters a symbolic link
in the source directory.</p>

<p style="margin-left:9%; margin-top: 1em">By default,
symbolic links are not transferred at all. A message
&quot;skipping non-regular&quot; file is emitted for any
symlinks that exist.</p>

<p style="margin-left:9%; margin-top: 1em">If
<b>&minus;&minus;links</b> is specified, then symlinks are
added to the transfer (instead of being noisily ignored),
and the default handling is to recreate them with the same
target on the destination. Note that
<b>&minus;&minus;archive</b> implies
<b>&minus;&minus;links</b>.</p>

<p style="margin-left:9%; margin-top: 1em">If
<b>&minus;&minus;copy-links</b> is specified, then symlinks
are &quot;collapsed&quot; by copying their referent, rather
than the symlink.</p>

<p style="margin-left:9%; margin-top: 1em">Rsync can also
distinguish &quot;safe&quot; and &quot;unsafe&quot; symbolic
links. An example where this might be used is a web site
mirror that wishes to ensure that the rsync module that is
copied does not include symbolic links to <b>/etc/passwd</b>
in the public section of the site. Using
<b>&minus;&minus;copy-unsafe-links</b> will cause any links
to be copied as the file they point to on the destination.
Using <b>&minus;&minus;safe-links</b> will cause unsafe
links to be omitted by the receiver. (Note that you must
specify or imply <b>&minus;&minus;links</b> for
<b>&minus;&minus;safe-links</b> to have any effect.)</p>

<p style="margin-left:9%; margin-top: 1em">Symbolic links
are considered unsafe if they are absolute symlinks (start
with <b>/</b>), empty, or if they contain enough
&quot;..&quot; components to ascend from the top of the
transfer.</p>

<p style="margin-left:9%; margin-top: 1em">Here&rsquo;s a
summary of how the symlink options are interpreted. The list
is in order of precedence, so if your combination of options
isn&rsquo;t mentioned, use the first line that is a complete
subset of your options: <b><br>
&minus;&minus;copy-links</b></p>

<p style="margin-left:18%;">Turn all symlinks into normal
files and directories (leaving no symlinks in the transfer
for any other options to affect).</p>


<p style="margin-left:9%;"><b>&minus;&minus;copy-dirlinks</b></p>

<p style="margin-left:18%;">Turn just symlinks to
directories into real directories, leaving all other
symlinks to be handled as described below.</p>


<p style="margin-left:9%;"><b>&minus;&minus;links&nbsp;&minus;&minus;copy-unsafe-links</b></p>

<p style="margin-left:18%;">Turn all unsafe symlinks into
files and create all safe symlinks.</p>


<p style="margin-left:9%;"><b>&minus;&minus;copy-unsafe-links</b></p>

<p style="margin-left:18%;">Turn all unsafe symlinks into
files, noisily skip all safe symlinks.</p>


<p style="margin-left:9%;"><b>&minus;&minus;links&nbsp;&minus;&minus;safe-links</b></p>

<p style="margin-left:18%;">The receiver skips creating
unsafe symlinks found in the transfer and creates the safe
ones.</p>

<p style="margin-left:9%;"><b>&minus;&minus;links</b></p>

<p style="margin-left:18%;">Create all symlinks.</p>

<p style="margin-left:9%; margin-top: 1em">For the effect
of <b>&minus;&minus;munge-links</b>, see the discussion in
that option&rsquo;s section.</p>

<p style="margin-left:9%; margin-top: 1em">Note that the
<b>&minus;&minus;keep-dirlinks</b> option does not effect
symlinks in the transfer but instead affects how rsync
treats a symlink to a directory that already exists on the
receiving side. See that option&rsquo;s section for a
warning.</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Rsync
occasionally produces error messages that may seem a little
cryptic. The one that seems to cause the most confusion is
&quot;protocol version mismatch&nbsp;&minus;&minus; is your
shell clean?&quot;.</p>

<p style="margin-left:9%; margin-top: 1em">This message is
usually caused by your startup scripts or remote shell
facility producing unwanted garbage on the stream that rsync
is using for its transport. The way to diagnose this problem
is to run your remote shell like this:</p>

<p style="margin-left:14%; margin-top: 1em">ssh remotehost
/bin/true &gt; out.dat</p>

<p style="margin-left:9%; margin-top: 1em">then look at
out.dat. If everything is working correctly then out.dat
should be a zero length file. If you are getting the above
error from rsync then you will probably find that out.dat
contains some text or data. Look at the contents and try to
work out what is producing it. The most common cause is
incorrectly configured shell startup scripts (such as .cshrc
or .profile) that contain output statements for
non-interactive logins.</p>

<p style="margin-left:9%; margin-top: 1em">If you are
having trouble debugging filter patterns, then try
specifying the <b>&minus;vv</b> option. At this level of
verbosity rsync will show why each individual file is
included or excluded.</p>

<h2>EXIT VALUES
<a name="EXIT VALUES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="58%">


<p style="margin-top: 1em"><b>0</b> &minus; Success</p></td>
<td width="24%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="58%">


<p><b>1</b> &minus; Syntax or usage error</p></td>
<td width="24%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="58%">


<p><b>2</b> &minus; Protocol incompatibility</p></td>
<td width="24%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="58%">


<p><b>3</b> &minus; Errors selecting input/output files,
dirs</p> </td>
<td width="24%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="58%"></td>
<td width="24%">
</td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">o</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="27%"></td>
<td width="55%">


<p style="margin-top: 1em"><b>4</b> &minus; Requested
action not supported. Either:</p></td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:27%; margin-top: 1em">an attempt was
made to manipulate 64-bit files on a platform that cannot
support them</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="10%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="73%">


<p style="margin-top: 1em">an option was specified that is
supported by the client and not by the server</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="10%">


<p>o</p></td>
<td width="8%"></td>
<td width="73%">
</td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em"><b>5</b>
&minus; Error starting client-server protocol</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="64%">


<p style="margin-top: 1em"><b>6</b> &minus; Daemon unable
to append to log-file</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>10</b> &minus; Error in socket I/O</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>11</b> &minus; Error in file I/O</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>12</b> &minus; Error in rsync protocol data
stream</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>13</b> &minus; Errors with program diagnostics</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>14</b> &minus; Error in IPC code</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>20</b> &minus; Received SIGUSR1 or SIGINT</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>21</b> &minus; Some error returned by
<b>waitpid()</b></p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>22</b> &minus; Error allocating core memory
buffers</p> </td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>23</b> &minus; Partial transfer due to error</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>24</b> &minus; Partial transfer due to vanished
source files</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>25</b> &minus; The &minus;&minus;max-delete limit
stopped deletions</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>30</b> &minus; Timeout in data send/receive</p></td>
<td width="18%">
</td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="64%">


<p><b>35</b> &minus; Timeout waiting for daemon
connection</p> </td>
<td width="18%">
</td></tr>
</table>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>CVSIGNORE</b></p>

<p style="margin-left:18%;">The CVSIGNORE environment
variable supplements any ignore patterns in .cvsignore
files. See the <b>&minus;&minus;cvs-exclude</b> option for
more details.</p>

<p style="margin-left:9%;"><b>RSYNC_ICONV</b></p>

<p style="margin-left:18%;">Specify a default
<b>&minus;&minus;iconv</b> setting using this environment
variable. First supported in 3.0.0.</p>

<p style="margin-left:9%;"><b>RSYNC_OLD_ARGS</b></p>

<p style="margin-left:18%;">Specify a &quot;1&quot; if you
want the <b>&minus;&minus;old-args</b> option to be enabled
by default, a &quot;2&quot; (or more) if you want it to be
enabled in the repeated-option state, or a &quot;0&quot; to
make sure that it is disabled by default. When this
environment variable is set to a non-zero value, it
supersedes the <b>RSYNC_PROTECT_ARGS</b> variable.</p>

<p style="margin-left:18%; margin-top: 1em">This variable
is ignored if <b>&minus;&minus;old-args</b>,
<b>&minus;&minus;no-old-args</b>, or
<b>&minus;&minus;secluded-args</b> is specified on the
command line.</p>

<p style="margin-left:18%; margin-top: 1em">First supported
in 3.2.4.</p>

<p style="margin-left:9%;"><b>RSYNC_PROTECT_ARGS</b></p>

<p style="margin-left:18%;">Specify a non-zero numeric
value if you want the <b>&minus;&minus;secluded-args</b>
option to be enabled by default, or a zero value to make
sure that it is disabled by default.</p>

<p style="margin-left:18%; margin-top: 1em">This variable
is ignored if <b>&minus;&minus;secluded-args</b>,
<b>&minus;&minus;no-secluded-args</b>, or
<b>&minus;&minus;old-args</b> is specified on the command
line.</p>

<p style="margin-left:18%; margin-top: 1em">First supported
in 3.1.0. Starting in 3.2.4, this variable is ignored if
<b>RSYNC_OLD_ARGS</b> is set to a non-zero value.</p>

<p style="margin-left:9%;"><b>RSYNC_RSH</b></p>

<p style="margin-left:18%;">This environment variable
allows you to override the default shell used as the
transport for rsync. Command line options are permitted
after the command name, just as in the
<b>&minus;&minus;rsh</b> (<b>&minus;e</b>) option.</p>

<p style="margin-left:9%;"><b>RSYNC_PROXY</b></p>

<p style="margin-left:18%;">This environment variable
allows you to redirect your rsync client to use a web proxy
when connecting to an rsync daemon. You should set
<b>RSYNC_PROXY</b> to a hostname:port pair.</p>

<p style="margin-left:9%;"><b>RSYNC_PASSWORD</b></p>

<p style="margin-left:18%;">This environment variable
allows you to set the password for an rsync <b>daemon</b>
connection, which avoids the password prompt. Note that this
does <b>not</b> supply a password to a remote shell
transport such as ssh (consult its documentation for how to
do that).</p>

<p style="margin-left:9%;"><b>USER</b> or
<b>LOGNAME</b></p>

<p style="margin-left:18%;">The USER or LOGNAME environment
variables are used to determine the default username sent to
an rsync daemon. If neither is set, the username defaults to
&quot;nobody&quot;. If both are set, <b>USER</b> takes
precedence.</p>

<p style="margin-left:9%;"><b>RSYNC_PARTIAL_DIR</b></p>

<p style="margin-left:18%;">This environment variable
specifies the directory to use for a
<b>&minus;&minus;partial</b> transfer without implying that
partial transfers be enabled. See the
<b>&minus;&minus;partial-dir</b> option for full
details.</p>

<p style="margin-left:9%;"><b>RSYNC_COMPRESS_LIST</b></p>

<p style="margin-left:18%;">This environment variable
allows you to customize the negotiation of the compression
algorithm by specifying an alternate order or a reduced list
of names. Use the command
<b>rsync&nbsp;&minus;&minus;version</b> to see the available
compression names. See the <b>&minus;&minus;compress</b>
option for full details.</p>

<p style="margin-left:9%;"><b>RSYNC_CHECKSUM_LIST</b></p>

<p style="margin-left:18%;">This environment variable
allows you to customize the negotiation of the checksum
algorithm by specifying an alternate order or a reduced list
of names. Use the command
<b>rsync&nbsp;&minus;&minus;version</b> to see the available
checksum names. See the <b>&minus;&minus;checksum-choice</b>
option for full details.</p>

<p style="margin-left:9%;"><b>RSYNC_MAX_ALLOC</b></p>

<p style="margin-left:18%;">This environment variable sets
an allocation maximum as if you had used the
<b>&minus;&minus;max-alloc</b> option.</p>

<p style="margin-left:9%;"><b>RSYNC_PORT</b></p>

<p style="margin-left:18%;">This environment variable is
not read by rsync, but is instead set in its sub-environment
when rsync is running the remote shell in combination with a
daemon connection. This allows a script such as
<b>rsync-ssl</b> to be able to know the port number that the
user specified on the command line.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="5%">


<p><b>HOME</b></p></td>
<td width="4%"></td>
<td width="82%">


<p>This environment variable is used to find the
user&rsquo;s default .cvsignore file.</p></td></tr>
</table>

<p style="margin-left:9%;"><b>RSYNC_CONNECT_PROG</b></p>

<p style="margin-left:18%;">This environment variable is
mainly used in debug setups to set the program to use when
making a daemon connection. See CONNECTING TO AN RSYNC
DAEMON for full details.</p>

<p style="margin-left:9%;"><b>RSYNC_SHELL</b></p>

<p style="margin-left:18%;">This environment variable is
mainly used in debug setups to set the program to use to run
the program specified by <b>RSYNC_CONNECT_PROG</b>. See
CONNECTING TO AN RSYNC DAEMON for full details.</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em">/etc/rsyncd.conf
or rsyncd.conf</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:9%; margin-top: 1em"><b>rsync-ssl</b>(1),
<b>rsyncd.conf</b>(5), <b>rrsync</b>(1)</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="8%"></td>
<td width="82%">


<p style="margin-top: 1em">Times are transferred as *nix
time_t values.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>When transferring to FAT filesystems rsync may re-sync
unmodified files. See the comments on the
<b>&minus;&minus;modify-window</b> option.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>File permissions, devices, etc. are transferred as
native numerical values.</p></td></tr>
<tr valign="top" align="left">
<td width="9%"></td>
<td width="1%">


<p>o</p></td>
<td width="8%"></td>
<td width="82%">


<p>See also the comments on the <b>&minus;&minus;delete</b>
option.</p> </td></tr>
</table>

<p style="margin-left:9%; margin-top: 1em">Please report
bugs! See the web site at
<a href="https://rsync.samba.org/">https://rsync.samba.org/</a>.</p>

<h2>VERSION
<a name="VERSION"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">This manpage is
current for version 3.4.1 of rsync.</p>

<h2>INTERNAL OPTIONS
<a name="INTERNAL OPTIONS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">The options
<b>&minus;&minus;server</b> and <b>&minus;&minus;sender</b>
are used internally by rsync, and should never be typed by a
user under normal circumstances. Some awareness of these
options may be needed in certain scenarios, such as when
setting up a login that can only run an rsync command. For
instance, the support directory of the rsync distribution
has an example script named rrsync (for restricted rsync)
that can be used with a restricted ssh login.</p>

<h2>CREDITS
<a name="CREDITS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Rsync is
distributed under the GNU General Public License. See the
file COPYING for details.</p>

<p style="margin-left:9%; margin-top: 1em">An rsync web
site is available at
<a href="https://rsync.samba.org/">https://rsync.samba.org/</a>.
The site includes an FAQ-O-Matic which may cover questions
unanswered by this manual page.</p>

<p style="margin-left:9%; margin-top: 1em">The rsync github
project is
<a href="https://github.com/RsyncProject/rsync">https://github.com/RsyncProject/rsync</a>.</p>

<p style="margin-left:9%; margin-top: 1em">We would be
delighted to hear from you if you like this program. Please
contact the mailing-list at
<a href="mailto:rsync@lists.samba.org">rsync@lists.samba.org</a>.</p>

<p style="margin-left:9%; margin-top: 1em">This program
uses the excellent zlib compression library written by
Jean-loup Gailly and Mark Adler.</p>

<h2>THANKS
<a name="THANKS"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Special thanks
go out to: John Van Essen, Matt McCutchen, Wesley W.
Terpstra, David Dykstra, Jos Backus, Sebastian Krahmer,
Martin Pool, and our gone-but-not-forgotten compadre, J.W.
Schultz.</p>

<p style="margin-left:9%; margin-top: 1em">Thanks also to
Richard Brent, Brendan Mackay, Bill Waite, Stephen Rothwell
and David Bell. I&rsquo;ve probably missed some people, my
apologies if I have.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:9%; margin-top: 1em">Rsync was
originally written by Andrew Tridgell and Paul Mackerras.
Many people from around the world have helped to maintain
and improve it.</p>

<p style="margin-left:9%; margin-top: 1em">Mailing lists
for support and development are available at
<a href="https://lists.samba.org/">https://lists.samba.org/</a>.</p>
<hr>
</body>
</html>
